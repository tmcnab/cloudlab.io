function js_beautify(n,t){function ft(n){for(n=typeof n=="undefined"?!1:n;o.length&&(o[o.length-1]===" "||o[o.length-1]===nt||o[o.length-1]===ct||n&&(o[o.length-1]==="\n"||o[o.length-1]==="\r"));)o.pop()}function ri(n){return n.replace(/^\s\s*|\s\s*$/,"")}function ci(){var n=w;w=!1,s(),w=n}function s(n){if((i.eat_next_space=!1,!w||!ht(i.mode))&&(n=typeof n=="undefined"?!0:n,i.if_line=!1,ft(),o.length)){o[o.length-1]==="\n"&&n||(d=!0,o.push("\n")),ct&&o.push(ct);for(var t=0;t<i.indentation_level;t+=1)o.push(nt);i.var_line&&i.var_line_reindented&&o.push(nt),i.case_body&&o.push(nt)}}function c(){if(i.eat_next_space){i.eat_next_space=!1;return}var n=" ";o.length&&(n=o[o.length-1]),n!==" "&&n!=="\n"&&n!==nt&&o.push(" ")}function l(){d=!1,i.eat_next_space=!1,o.push(h)}function vt(){i.indentation_level+=1}function ei(){o.length&&o[o.length-1]===nt&&o.pop()}function g(n){i&&at.push(i),i={previous_mode:i?i.mode:"BLOCK",mode:n,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:i?i.indentation_level+(i.case_body?1:0)+(i.var_line&&i.var_line_reindented?1:0):0,ternary_depth:0}}function ht(n){return n==="[EXPRESSION]"||n==="[INDENTED-EXPRESSION]"}function lt(n){return n==="[EXPRESSION]"||n==="[INDENTED-EXPRESSION]"||n==="(EXPRESSION)"}function wt(){kt=i.mode==="DO_BLOCK",at.length>0&&(i=at.pop())}function vi(n,t){for(var i=0;i<n.length;i++)if(ri(n[i])[0]!=t)return!1;return!0}function v(n,t){for(var i=0;i<t.length;i+=1)if(t[i]===n)return!0;return!1}function ni(n){for(var i=r,t=e.charAt(i);v(t,pt)&&t!=n;){if(i++,i>=a)return 0;t=e.charAt(i)}return t}function gt(){var n,et,y,t,rt,it,l,tt,g,p;if(k=0,r>=a)return["","TK_EOF"];if(ot=!1,n=e.charAt(r),r+=1,et=w&&ht(i.mode),et){for(y=0;v(n,pt);){if(n==="\n"?(ft(),o.push("\n"),d=!0,y=0):n==="\t"?y+=4:n==="\r"||(y+=1),r>=a)return["","TK_EOF"];n=e.charAt(r),r+=1}if(i.indentation_baseline===-1&&(i.indentation_baseline=y),d){for(t=0;t<i.indentation_level+1;t+=1)o.push(nt);if(i.indentation_baseline!==-1)for(t=0;t<y-i.indentation_baseline;t++)o.push(" ")}}else{while(v(n,pt)){if(n==="\n"&&(k+=oi?k<=oi?1:0:1),r>=a)return["","TK_EOF"];n=e.charAt(r),r+=1}if(fi&&k>1)for(t=0;t<k;t+=1)s(t===0),d=!0;ot=k>0}if(v(n,dt)){if(r<a)while(v(e.charAt(r),dt))if(n+=e.charAt(r),r+=1,r===a)break;return r!==a&&n.match(/^[0-9]+[Ee]$/)&&(e.charAt(r)==="-"||e.charAt(r)==="+")?(rt=e.charAt(r),r+=1,it=gt(r),n+=rt+it[0],[n,"TK_WORD"]):n==="in"?[n,"TK_OPERATOR"]:(ot&&u!=="TK_OPERATOR"&&u!=="TK_EQUALS"&&!i.if_line&&(fi||f!=="var")&&s(),[n,"TK_WORD"])}if(n==="("||n==="[")return[n,"TK_START_EXPR"];if(n===")"||n==="]")return[n,"TK_END_EXPR"];if(n==="{")return[n,"TK_START_BLOCK"];if(n==="}")return[n,"TK_END_BLOCK"];if(n===";")return[n,"TK_SEMICOLON"];if(n==="/"){if(l="",tt=!0,e.charAt(r)==="*"){if(r+=1,r<a)while(!(e.charAt(r)==="*"&&e.charAt(r+1)&&e.charAt(r+1)==="/")&&r<a)if(n=e.charAt(r),l+=n,(n==="\r"||n==="\n")&&(tt=!1),r+=1,r>=a)break;return r+=2,tt?["/*"+l+"*/","TK_INLINE_COMMENT"]:["/*"+l+"*/","TK_BLOCK_COMMENT"]}if(e.charAt(r)==="/"){for(l=n;e.charAt(r)!=="\r"&&e.charAt(r)!=="\n";)if(l+=e.charAt(r),r+=1,r>=a)break;return r+=1,ot&&s(),[l,"TK_COMMENT"]}}if(n==="'"||n==='"'||n==="/"&&(u==="TK_WORD"&&v(f,["return","do"])||u==="TK_COMMENT"||u==="TK_START_EXPR"||u==="TK_START_BLOCK"||u==="TK_END_BLOCK"||u==="TK_OPERATOR"||u==="TK_EQUALS"||u==="TK_EOF"||u==="TK_SEMICOLON")){var b=n,c=!1,h=n;if(r<a)if(b==="/"){for(g=!1;c||g||e.charAt(r)!==b;)if(h+=e.charAt(r),c?c=!1:(c=e.charAt(r)==="\\",e.charAt(r)==="["?g=!0:e.charAt(r)==="]"&&(g=!1)),r+=1,r>=a)return[h,"TK_STRING"]}else while(c||e.charAt(r)!==b)if(h+=e.charAt(r),c=c?!1:e.charAt(r)==="\\",r+=1,r>=a)return[h,"TK_STRING"];if(r+=1,h+=b,b==="/")while(r<a&&v(e.charAt(r),dt))h+=e.charAt(r),r+=1;return[h,"TK_STRING"]}if(n==="#"){if(o.length===0&&e.charAt(r)==="!"){for(h=n;r<a&&n!="\n";)n=e.charAt(r),h+=n,r+=1;return o.push(ri(h)+"\n"),s(),gt()}if(p="#",r<a&&v(e.charAt(r),hi)){do n=e.charAt(r),p+=n,r+=1;while(r<a&&n!=="#"&&n!=="=");return n==="#"||(e.charAt(r)==="["&&e.charAt(r+1)==="]"?(p+="[]",r+=2):e.charAt(r)==="{"&&e.charAt(r+1)==="}"&&(p+="{}",r+=2)),[p,"TK_WORD"]}}if(n==="<"&&e.substring(r-1,r+3)==="<!--")return r+=3,i.in_html_comment=!0,["<!--","TK_COMMENT"];if(n==="-"&&i.in_html_comment&&e.substring(r-1,r+2)==="-->")return i.in_html_comment=!1,r+=2,ot&&s(),["-->","TK_COMMENT"];if(v(n,ut)){while(r<a&&v(n+e.charAt(r),ut))if(n+=e.charAt(r),r+=1,r>=a)break;return n==="="?[n,"TK_EQUALS"]:[n,"TK_OPERATOR"]}return[n,"TK_UNKNOWN"]}var e,o,h,u,f,st,et,i,at,nt,pt,dt,ut,r,rt,hi,p,yt,kt,ot,d,k,ct="",y,a,ii,bt,b,it,ti,tt,li;t=t?t:{},t.space_after_anon_function!==undefined&&t.jslint_happy===undefined&&(t.jslint_happy=t.space_after_anon_function),t.braces_on_own_line!==undefined&&(y=t.braces_on_own_line?"expand":"collapse"),y=t.brace_style?t.brace_style:y?y:"collapse";var si=t.indent_size?t.indent_size:4,pi=t.indent_char?t.indent_char:" ",fi=typeof t.preserve_newlines=="undefined"?!0:t.preserve_newlines,oi=typeof t.max_preserve_newlines=="undefined"?!1:t.max_preserve_newlines,ai=t.jslint_happy==="undefined"?!1:t.jslint_happy,w=typeof t.keep_array_indentation=="undefined"?!1:t.keep_array_indentation,yi=typeof t.space_before_conditional=="undefined"?!0:t.space_before_conditional,ui=typeof t.indent_case=="undefined"?!1:t.indent_case;for(d=!1,a=n.length,nt="";si>0;)nt+=pi,si-=1;while(n&&(n[0]===" "||n[0]==="\t"))ct+=n[0],n=n.substring(1);for(e=n,et="",u="TK_START_EXPR",f="",st="",o=[],kt=!1,pt="\n\r\t ".split(""),dt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),hi="0123456789".split(""),ut="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",ut+=" <%= <% %> <?= <? ?>",ut=ut.split(" "),rt="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),at=[],g("BLOCK"),r=0;;){if(ii=gt(r),h=ii[0],yt=ii[1],yt==="TK_EOF")break;switch(yt){case"TK_START_EXPR":if(h==="["){if(u==="TK_WORD"||f===")"){v(f,rt)&&c(),g("(EXPRESSION)"),l();break}i.mode==="[EXPRESSION]"||i.mode==="[INDENTED-EXPRESSION]"?st==="]"&&f===","?(i.mode==="[EXPRESSION]"&&(i.mode="[INDENTED-EXPRESSION]",w||vt()),g("[EXPRESSION]"),w||s()):f==="["?(i.mode==="[EXPRESSION]"&&(i.mode="[INDENTED-EXPRESSION]",w||vt()),g("[EXPRESSION]"),w||s()):g("[EXPRESSION]"):g("[EXPRESSION]")}else g("(EXPRESSION)");f===";"||u==="TK_START_BLOCK"?s():u==="TK_END_EXPR"||u==="TK_START_EXPR"||u==="TK_END_BLOCK"||f==="."||(u!=="TK_WORD"&&u!=="TK_OPERATOR"?c():et==="function"||et==="typeof"?ai&&c():(v(f,rt)||f==="catch")&&yi&&c()),l();break;case"TK_END_EXPR":if(h==="]")if(w){if(f==="}"){ei(),l(),wt();break}}else if(i.mode==="[INDENTED-EXPRESSION]"&&f==="]"){wt(),s(),l();break}wt(),l();break;case"TK_START_BLOCK":et==="do"?g("DO_BLOCK"):g("BLOCK"),y=="expand"||y=="expand-strict"?(bt=!1,y=="expand-strict"?(bt=ni()=="}",bt||s(!0)):u!=="TK_OPERATOR"&&(f==="return"||f==="="?c():s(!0)),l(),bt||vt()):(u!=="TK_OPERATOR"&&u!=="TK_START_EXPR"?u==="TK_START_BLOCK"?s():c():ht(i.previous_mode)&&f===","&&(st==="}"?c():s()),vt(),l());break;case"TK_END_BLOCK":wt(),y=="expand"||y=="expand-strict"?(f!=="{"&&s(),l()):(u==="TK_START_BLOCK"?d?ei():ft():ht(i.mode)&&w?(w=!1,s(),w=!0):s(),l());break;case"TK_WORD":if(kt){c(),l(),c(),kt=!1;break}if(h==="function"&&(i.var_line&&(i.var_line_reindented=!0),(d||f===";")&&f!=="{"&&u!="TK_BLOCK_COMMENT"&&u!="TK_COMMENT"))for(k=d?k:0,fi||(k=1),b=0;b<2-k;b++)s(!1);if(h==="case"||h==="default"){f===":"||i.case_body?ei():(ui||i.indentation_level--,s(),ui||i.indentation_level++),l(),i.in_case=!0,i.case_body=!1;break}p="NONE",u==="TK_END_BLOCK"?v(h.toLowerCase(),["else","catch","finally"])?y=="expand"||y=="end-expand"||y=="expand-strict"?p="NEWLINE":(p="SPACE",c()):p="NEWLINE":u==="TK_SEMICOLON"&&(i.mode==="BLOCK"||i.mode==="DO_BLOCK")?p="NEWLINE":u==="TK_SEMICOLON"&&lt(i.mode)?p="SPACE":u==="TK_STRING"?p="NEWLINE":u==="TK_WORD"?(f==="else"&&ft(!0),p="SPACE"):u==="TK_START_BLOCK"?p="NEWLINE":u==="TK_END_EXPR"&&(c(),p="NEWLINE"),v(h,rt)&&f!==")"&&(p=f=="else"?"SPACE":"NEWLINE"),i.if_line&&u==="TK_END_EXPR"&&(i.if_line=!1),v(h.toLowerCase(),["else","catch","finally"])?u!=="TK_END_BLOCK"||y=="expand"||y=="end-expand"||y=="expand-strict"?s():(ft(!0),c()):p==="NEWLINE"?(u==="TK_START_EXPR"||f==="="||f===",")&&h==="function"||(h==="function"&&f=="new"?c():f==="return"||f==="throw"?c():u!=="TK_END_EXPR"?(u!=="TK_START_EXPR"||h!=="var")&&f!==":"&&(h==="if"&&et==="else"&&f!=="{"?c():(i.var_line=!1,i.var_line_reindented=!1,s())):v(h,rt)&&f!=")"&&(i.var_line=!1,i.var_line_reindented=!1,s())):ht(i.mode)&&f===","&&st==="}"?s():p==="SPACE"&&c(),l(),et=h,h==="var"&&(i.var_line=!0,i.var_line_reindented=!1,i.var_line_tainted=!1),h==="if"&&(i.if_line=!0),h==="else"&&(i.if_line=!1);break;case"TK_SEMICOLON":l(),i.var_line=!1,i.var_line_reindented=!1,i.mode=="OBJECT"&&(i.mode="BLOCK");break;case"TK_STRING":u==="TK_START_BLOCK"||u==="TK_END_BLOCK"||u==="TK_SEMICOLON"?s():u==="TK_WORD"&&c(),l();break;case"TK_EQUALS":i.var_line&&(i.var_line_tainted=!0),c(),l(),c();break;case"TK_OPERATOR":if(it=!0,ti=!0,i.var_line&&h===","&&lt(i.mode)&&(i.var_line_tainted=!1),i.var_line&&h===",")if(i.var_line_tainted){l(),i.var_line_reindented=!0,i.var_line_tainted=!1,s();break}else i.var_line_tainted=!1;if(f==="return"||f==="throw"){c(),l();break}if(h===":"&&i.in_case){ui&&(i.case_body=!0),l(),s(),i.in_case=!1;break}if(h==="::"){l();break}if(h===","){i.var_line?i.var_line_tainted?(l(),s(),i.var_line_tainted=!1):(l(),c()):u==="TK_END_BLOCK"&&i.mode!=="(EXPRESSION)"?(l(),i.mode==="OBJECT"&&f==="}"?s():c()):i.mode==="OBJECT"?(l(),s()):(l(),c());break}else v(h,["--","++","!"])||v(h,["-","+"])&&(v(u,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||v(f,rt))?(it=!1,ti=!1,f===";"&&lt(i.mode)&&(it=!0),u==="TK_WORD"&&v(f,rt)&&(it=!0),i.mode==="BLOCK"&&(f==="{"||f===";")&&s()):h==="."?it=!1:h===":"?i.ternary_depth==0?(i.mode="OBJECT",it=!1):i.ternary_depth-=1:h==="?"&&(i.ternary_depth+=1);it&&c(),l(),ti&&c(),h==="!";break;case"TK_BLOCK_COMMENT":if(tt=h.split(/\x0a|\x0d\x0a/),vi(tt.slice(1),"*"))for(s(),o.push(tt[0]),b=1;b<tt.length;b++)s(),o.push(" "),o.push(ri(tt[b]));else for(tt.length>1?(s(),ft()):c(),b=0;b<tt.length;b++)o.push(tt[b]),o.push("\n");ni("\n")!="\n"&&s();break;case"TK_INLINE_COMMENT":c(),l(),lt(i.mode)?c():ci();break;case"TK_COMMENT":ot?s():c(),l(),ni("\n")!="\n"&&ci();break;case"TK_UNKNOWN":(f==="return"||f==="throw")&&c(),l()}st=f,u=yt,f=h}return li=ct+o.join("").replace(/[\n ]+$/,"")}var JSHINT,PageHelper;!function(n){n(function(){"use strict";n.support.transition=function(){var r=document.body||document.documentElement,t=r.style,i=t.transition!==undefined||t.WebkitTransition!==undefined||t.MozTransition!==undefined||t.MsTransition!==undefined||t.OTransition!==undefined;return i&&{end:function(){var t="TransitionEnd";return n.browser.webkit?t="webkitTransitionEnd":n.browser.mozilla?t="transitionend":n.browser.opera&&(t="oTransitionEnd"),t}()}}()})}(window.jQuery),!function(n){"use strict";var i='[data-dismiss="alert"]',t=function(t){n(t).on("click",i,this.close)};t.prototype={constructor:t,close:function(t){function f(){i.remove(),i.trigger("closed")}var u=n(this),r=u.attr("data-target"),i;r||(r=u.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),i=n(r),i.trigger("close"),t&&t.preventDefault(),i.length||(i=u.hasClass("alert")?u:u.parent()),i.removeClass("in"),n.support.transition&&i.hasClass("fade")?i.on(n.support.transition.end,f):f()}},n.fn.alert=function(i){return this.each(function(){var u=n(this),r=u.data("alert");r||u.data("alert",r=new t(this)),typeof i=="string"&&r[i].call(u)})},n.fn.alert.Constructor=t,n(function(){n("body").on("click.alert.data-api",i,t.prototype.close)})}(window.jQuery),!function(n){"use strict";var t=function(t,i){this.$element=n(t),this.options=n.extend({},n.fn.button.defaults,i)};t.prototype={constructor:t,setState:function(n){var i="disabled",t=this.$element,u=t.data(),r=t.is("input")?"val":"html";n=n+"Text",u.resetText||t.data("resetText",t[r]()),t[r](u[n]||this.options[n]),setTimeout(function(){n=="loadingText"?t.addClass(i).attr(i,i):t.removeClass(i).removeAttr(i)},0)},toggle:function(){var n=this.$element.parent('[data-toggle="buttons-radio"]');n&&n.find(".active").removeClass("active"),this.$element.toggleClass("active")}},n.fn.button=function(i){return this.each(function(){var u=n(this),r=u.data("button"),f=typeof i=="object"&&i;r||u.data("button",r=new t(this,f)),i=="toggle"?r.toggle():i&&r.setState(i)})},n.fn.button.defaults={loadingText:"loading..."},n.fn.button.Constructor=t,n(function(){n("body").on("click.button.data-api","[data-toggle^=button]",function(t){n(t.target).button("toggle")})})}(window.jQuery),!function(n){"use strict";var t=function(t,i){this.$element=n(t),this.options=n.extend({},n.fn.carousel.defaults,i),this.options.slide&&this.slide(this.options.slide)};t.prototype={cycle:function(){return this.interval=setInterval(n.proxy(this.next,this),this.options.interval),this},to:function(t){var u=this.$element.find(".active"),i=u.parent().children(),r=i.index(u),f=this;if(!(t>i.length-1)&&!(t<0))return this.sliding?this.$element.one("slid",function(){f.to(t)}):r==t?this.pause().cycle():this.slide(t>r?"next":"prev",n(i[t]))},pause:function(){return clearInterval(this.interval),this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,i){var f=this.$element.find(".active"),r=i||f[t](),o=this.interval,u=t=="next"?"left":"right",s=t=="next"?"first":"last",e=this;if(this.sliding=!0,o&&this.pause(),r=r.length?r:this.$element.find(".item")[s](),!n.support.transition&&this.$element.hasClass("slide"))this.$element.trigger("slide"),f.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid");else{r.addClass(t),r[0].offsetWidth,f.addClass(u),r.addClass(u),this.$element.trigger("slide");this.$element.one(n.support.transition.end,function(){r.removeClass([t,u].join(" ")).addClass("active"),f.removeClass(["active",u].join(" ")),e.sliding=!1,setTimeout(function(){e.$element.trigger("slid")},0)})}return o&&this.cycle(),this}},n.fn.carousel=function(i){return this.each(function(){var f=n(this),r=f.data("carousel"),u=typeof i=="object"&&i;r||f.data("carousel",r=new t(this,u)),typeof i=="number"?r.to(i):typeof i=="string"||(i=u.slide)?r[i]():r.cycle()})},n.fn.carousel.defaults={interval:5e3},n.fn.carousel.Constructor=t,n(function(){n("body").on("click.carousel.data-api","[data-slide]",function(t){var r=n(this),u,i=n(r.attr("data-target")||(u=r.attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,"")),f=!i.data("modal")&&n.extend({},i.data(),r.data());i.carousel(f),t.preventDefault()})})}(window.jQuery),!function(n){"use strict";var t=function(t,i){this.$element=n(t),this.options=n.extend({},n.fn.collapse.defaults,i),this.options.parent&&(this.$parent=n(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,dimension:function(){var n=this.$element.hasClass("width");return n?"width":"height"},show:function(){var i=this.dimension(),u=n.camelCase(["scroll",i].join("-")),t=this.$parent&&this.$parent.find(".in"),r;t&&t.length&&(r=t.data("collapse"),t.collapse("hide"),r||t.data("collapse",null)),this.$element[i](0),this.transition("addClass","show","shown"),this.$element[i](this.$element[0][u])},hide:function(){var n=this.dimension();this.reset(this.$element[n]()),this.transition("removeClass","hide","hidden"),this.$element[n](0)},reset:function(n){var t=this.dimension();this.$element.removeClass("collapse")[t](n||"auto")[0].offsetWidth,this.$element.addClass("collapse")},transition:function(t,i,r){var f=this,u=function(){i=="show"&&f.reset(),f.$element.trigger(r)};this.$element.trigger(i)[t]("in"),n.support.transition&&this.$element.hasClass("collapse")?this.$element.one(n.support.transition.end,u):u()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},n.fn.collapse=function(i){return this.each(function(){var u=n(this),r=u.data("collapse"),f=typeof i=="object"&&i;r||u.data("collapse",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.collapse.defaults={toggle:!0},n.fn.collapse.Constructor=t,n(function(){n("body").on("click.collapse.data-api","[data-toggle=collapse]",function(t){var i=n(this),u,r=i.attr("data-target")||t.preventDefault()||(u=i.attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,""),f=n(r).data("collapse")?"toggle":i.data();n(r).collapse(f)})})}(window.jQuery),!function(n){"use strict";function i(){n(r).parent().removeClass("open")}var r='[data-toggle="dropdown"]',t=function(t){var i=n(t).on("click.dropdown.data-api",this.toggle);n("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};t.prototype={constructor:t,toggle:function(){var f=n(this),r=f.attr("data-target"),u,e;return r||(r=f.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),u=n(r),u.length||(u=f.parent()),e=u.hasClass("open"),i(),!e&&u.toggleClass("open"),!1}},n.fn.dropdown=function(i){return this.each(function(){var u=n(this),r=u.data("dropdown");r||u.data("dropdown",r=new t(this)),typeof i=="string"&&r[i].call(u)})},n.fn.dropdown.Constructor=t,n(function(){n("html").on("click.dropdown.data-api",i);n("body").on("click.dropdown.data-api",r,t.prototype.toggle)})}(window.jQuery),!function(n){"use strict";function e(){var t=this,r=setTimeout(function(){t.$element.off(n.support.transition.end),i.call(t)},500);this.$element.one(n.support.transition.end,function(){clearTimeout(r),i.call(t)})}function i(){this.$element.hide().trigger("hidden"),f.call(this)}function f(t){var f=this,u=this.$element.hasClass("fade")?"fade":"",i;this.isShown&&this.options.backdrop?(i=n.support.transition&&u,this.$backdrop=n('<div class="modal-backdrop '+u+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(n.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(n.support.transition.end,t):t()):!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),n.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(n.support.transition.end,n.proxy(r,this)):r.call(this)):t&&t()}function r(){this.$backdrop.remove(),this.$backdrop=null}function u(){var t=this;if(this.isShown&&this.options.keyboard)n(document).on("keyup.dismiss.modal",function(n){n.which==27&&t.hide()});else this.isShown||n(document).off("keyup.dismiss.modal")}var t=function(t,i){this.options=n.extend({},n.fn.modal.defaults,i),this.$element=n(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",n.proxy(this.hide,this))};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this;this.isShown||(n("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),u.call(this),f.call(this,function(){var i=n.support.transition&&t.$element.hasClass("fade");!t.$element.parent().length&&t.$element.appendTo(document.body),t.$element.show(),i&&t.$element[0].offsetWidth,t.$element.addClass("in"),i?t.$element.one(n.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(t){if(t&&t.preventDefault(),this.isShown){var r=this;this.isShown=!1,n("body").removeClass("modal-open"),u.call(this),this.$element.trigger("hide").removeClass("in"),n.support.transition&&this.$element.hasClass("fade")?e.call(this):i.call(this)}}},n.fn.modal=function(i){return this.each(function(){var u=n(this),r=u.data("modal"),f=typeof i=="object"&&i;r||u.data("modal",r=new t(this,f)),typeof i=="string"?r[i]():r.show()})},n.fn.modal.defaults={backdrop:!0,keyboard:!0},n.fn.modal.Constructor=t,n(function(){n("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var r=n(this),u,i=n(r.attr("data-target")||(u=r.attr("href"))&&u.replace(/.*(?=#[^\s]+$)/,"")),f=i.data("modal")?"toggle":n.extend({},i.data(),r.data());t.preventDefault(),i.modal(f)})})}(window.jQuery),!function(n){"use strict";var t=function(n,t){this.init("tooltip",n,t)};t.prototype={constructor:t,init:function(t,i,r){var f,u;if(this.type=t,this.$element=n(i),this.options=this.getOptions(r),this.enabled=!0,this.options.trigger!="manual"){f=this.options.trigger=="hover"?"mouseenter":"focus",u=this.options.trigger=="hover"?"mouseleave":"blur";this.$element.on(f,this.options.selector,n.proxy(this.enter,this));this.$element.on(u,this.options.selector,n.proxy(this.leave,this))}this.options.selector?this._options=n.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=n.extend({},n.fn[this.type].defaults,t,this.$element.data()),t.delay&&typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var i=n(t.currentTarget)[this.type](this._options).data(this.type);i.options.delay&&i.options.delay.show?(i.hoverState="in",setTimeout(function(){i.hoverState=="in"&&i.show()},i.options.delay.show)):i.show()},leave:function(t){var i=n(t.currentTarget)[this.type](this._options).data(this.type);i.options.delay&&i.options.delay.hide?(i.hoverState="out",setTimeout(function(){i.hoverState=="out"&&i.hide()},i.options.delay.hide)):i.hide()},show:function(){var t,f,n,u,e,i,r;if(this.hasContent()&&this.enabled){t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),i=typeof this.options.placement=="function"?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,f=/in/.test(i),t.remove().css({top:0,left:0,display:"block"}).appendTo(f?this.$element:document.body),n=this.getPosition(f),u=t[0].offsetWidth,e=t[0].offsetHeight;switch(f?i.split(" ")[1]:i){case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-u/2};break;case"top":r={top:n.top-e,left:n.left+n.width/2-u/2};break;case"left":r={top:n.top+n.height/2-e/2,left:n.left-u};break;case"right":r={top:n.top+n.height/2-e/2,left:n.left+n.width}}t.css(r).addClass(i).addClass("in")}},setContent:function(){var n=this.tip();n.find(".tooltip-inner").html(this.getTitle()),n.removeClass("fade in top bottom left right")},hide:function(){function i(){var i=setTimeout(function(){t.off(n.support.transition.end).remove()},500);t.one(n.support.transition.end,function(){clearTimeout(i),t.remove()})}var r=this,t=this.tip();t.removeClass("in"),n.support.transition&&this.$tip.hasClass("fade")?i():t.remove()},fixTitle:function(){var n=this.$element;(n.attr("title")||typeof n.attr("data-original-title")!="string")&&n.attr("data-original-title",n.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return n.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var n,i=this.$element,t=this.options;return n=i.attr("data-original-title")||(typeof t.title=="function"?t.title.call(i[0]):t.title),n=n.toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip=this.$tip||n(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},n.fn.tooltip=function(i){return this.each(function(){var u=n(this),r=u.data("tooltip"),f=typeof i=="object"&&i;r||u.data("tooltip",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.tooltip.Constructor=t,n.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery),!function(n){"use strict";var t=function(n,t){this.init("popover",n,t)};t.prototype=n.extend({},n.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var t=this.tip(),r=this.getTitle(),i=this.getContent();t.find(".popover-title")[n.type(r)=="object"?"append":"html"](r),t.find(".popover-content > *")[n.type(i)=="object"?"append":"html"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var n,i=this.$element,t=this.options;return n=i.attr("data-content")||(typeof t.content=="function"?t.content.call(i[0]):t.content),n=n.toString().replace(/(^\s*|\s*$)/,"")},tip:function(){return this.$tip||(this.$tip=n(this.options.template)),this.$tip}}),n.fn.popover=function(i){return this.each(function(){var u=n(this),r=u.data("popover"),f=typeof i=="object"&&i;r||u.data("popover",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.popover.Constructor=t,n.fn.popover.defaults=n.extend({},n.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(n){"use strict";function t(t,i){var u=n.proxy(this.process,this),f=n(t).is("body")?n(window):n(t),r;this.options=n.extend({},n.fn.scrollspy.defaults,i),this.$scrollElement=f.on("scroll.scroll.data-api",u),this.selector=(this.options.target||(r=n(t).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=n("body").on("click.scroll.data-api",this.selector,u),this.refresh(),this.process()}t.prototype={constructor:t,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var t=n(this).attr("href");return/^#\w/.test(t)&&n(t).length?t:null}),this.offsets=n.map(this.targets,function(t){return n(t).position().top})},process:function(){for(var i=this.$scrollElement.scrollTop()+this.options.offset,t=this.offsets,r=this.targets,u=this.activeTarget,n=t.length;n--;)u!=r[n]&&i>=t[n]&&(!t[n+1]||i<=t[n+1])&&this.activate(r[n])},activate:function(n){var t;this.activeTarget=n,this.$body.find(this.selector).parent(".active").removeClass("active"),t=this.$body.find(this.selector+'[href="'+n+'"]').parent("li").addClass("active"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active")}},n.fn.scrollspy=function(i){return this.each(function(){var u=n(this),r=u.data("scrollspy"),f=typeof i=="object"&&i;r||u.data("scrollspy",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.scrollspy.Constructor=t,n.fn.scrollspy.defaults={offset:10},n(function(){n('[data-spy="scroll"]').each(function(){var t=n(this);t.scrollspy(t.data())})})}(window.jQuery),!function(n){"use strict";var t=function(t){this.element=n(t)};t.prototype={constructor:t,show:function(){var t=this.element,f=t.closest("ul:not(.dropdown-menu)"),i=t.attr("data-target"),u,r;(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),t.parent("li").hasClass("active"))||(u=f.find(".active a").last()[0],t.trigger({type:"show",relatedTarget:u}),r=n(i),this.activate(t.parent("li"),f),this.activate(r,r.parent(),function(){t.trigger({type:"shown",relatedTarget:u})}))},activate:function(t,i,r){function f(){u.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),t.addClass("active"),e?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active"),r&&r()}var u=i.find("> .active"),e=r&&n.support.transition&&u.hasClass("fade");e?u.one(n.support.transition.end,f):f(),u.removeClass("in")}},n.fn.tab=function(i){return this.each(function(){var u=n(this),r=u.data("tab");r||u.data("tab",r=new t(this)),typeof i=="string"&&r[i]()})},n.fn.tab.Constructor=t,n(function(){n("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(t){t.preventDefault(),n(this).tab("show")})})}(window.jQuery),!function(n){"use strict";var t=function(t,i){this.$element=n(t),this.options=n.extend({},n.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=n(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var n=this.$menu.find(".active").attr("data-value");return this.$element.val(n),this.hide()},show:function(){var t=n.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var r=this,i,u;return(this.query=this.$element.val(),!this.query)?this.shown?this.hide():this:(i=n.grep(this.source,function(n){if(r.matcher(n))return n}),i=this.sorter(i),!i.length)?this.shown?this.hide():this:this.render(i.slice(0,this.options.items)).show()},matcher:function(n){return~n.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(n){for(var u=[],i=[],r=[],t;t=n.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?i.push(t):r.push(t):u.push(t);return u.concat(i,r)},highlighter:function(n){return n.replace(new RegExp("("+this.query+")","ig"),function(n,t){return"<strong>"+t+"</strong>"})},render:function(t){var i=this;return t=n(t).map(function(t,r){return t=n(i.options.item).attr("data-value",r),t.find("a").html(i.highlighter(r)),t[0]}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var r=this.$menu.find(".active").removeClass("active"),i=r.next();i.length||(i=n(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var i=this.$menu.find(".active").removeClass("active"),t=i.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",n.proxy(this.blur,this)).on("keypress",n.proxy(this.keypress,this)).on("keyup",n.proxy(this.keyup,this));if(n.browser.webkit||n.browser.msie)this.$element.on("keydown",n.proxy(this.keypress,this));this.$menu.on("click",n.proxy(this.click,this)).on("mouseenter","li",n.proxy(this.mouseenter,this))},keyup:function(n){n.stopPropagation(),n.preventDefault();switch(n.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:this.hide();break;default:this.lookup()}},keypress:function(n){if(n.stopPropagation(),this.shown)switch(n.keyCode){case 9:case 13:case 27:n.preventDefault();break;case 38:n.preventDefault(),this.prev();break;case 40:n.preventDefault(),this.next()}},blur:function(n){var t=this;n.stopPropagation(),n.preventDefault(),setTimeout(function(){t.hide()},150)},click:function(n){n.stopPropagation(),n.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),n(t.currentTarget).addClass("active")}},n.fn.typeahead=function(i){return this.each(function(){var u=n(this),r=u.data("typeahead"),f=typeof i=="object"&&i;r||u.data("typeahead",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},n.fn.typeahead.Constructor=t,n(function(){n("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=n(this);i.data("typeahead")||(t.preventDefault(),i.typeahead(i.data()))})})}(window.jQuery),typeof exports!="undefined"&&(exports.js_beautify=js_beautify);var MarkdownDeep=new function(){function ut(n,t){if(n.indexOf!==undefined)return n.indexOf(t);for(var i=0;i<n.length;i++)if(n[i]===t)return i;return-1}function l(){this.m_SpanFormatter=new ri(this),this.m_SpareBlocks=[],this.m_StringBuilder=new v,this.m_StringBuilderFinal=new v}function fu(n,t,i,r){return n.slice(0,t).concat(r).concat(n.slice(t+i))}function fi(n){return n>="0"&&n<="9"}function eu(n){return n>="0"&&n<="9"||n>="a"&&n<="f"||n>="A"&&n<="F"}function br(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"}function d(n){return n>="a"&&n<="z"||n>="A"&&n<="Z"||n>="0"&&n<="9"}function f(n){return n==" "||n=="\t"||n=="\r"||n=="\n"}function at(n){return n==" "||n=="\t"}function ii(n){return n=="\r"||n=="\n"}function ti(n){return n=="*"||n=="_"}function ei(n,t){switch(n){case"\\":case"`":case"*":case"_":case"{":case"}":case"[":case"]":case"(":case")":case">":case"#":case"+":case"-":case".":case"!":return!0;case":":case"|":case"=":case"<":return t}return!1}function ui(n,t){var r,i;if(n.charAt(t)!="&")return-1;if(r=t,t++,n.charAt(t)=="#"?(t++,n.charAt(t)=="x"||n.charAt(t)=="X"?(t++,i=eu):i=fi):i=d,i(n.charAt(t))){for(t++;i(n.charAt(t));)t++;if(n.charAt(t)==";")return t++,t}return t=r,-1}function tt(n,t){var r=n.indexOf("\\"),u,i;if(r<0)return n;for(u=new v,i=0;r>=0;)ei(n.charAt(r+1),t)&&(r>i&&u.Append(n.substr(i,r-i)),i=r+1),r=n.indexOf("\\",r+1);return i<n.length&&u.Append(n.substr(i,n.length-i)),u.ToString()}function p(n){for(var t=0,i=n.length;t<i&&f(n.charAt(t));)t++;while(i-1>t&&f(n.charAt(i-1)))i--;return n.substr(t,i-t)}function su(n){var i=n.indexOf("@"),t;return i<0?!1:(t=n.lastIndexOf("."),t<i)?!1:!0}function cu(n){return(n=n.toLowerCase(),n.substr(0,7)=="http://")?!0:n.substr(0,8)=="https://"?!0:n.substr(0,6)=="ftp://"?!0:n.substr(0,7)=="file://"?!0:!1}function hu(n){var i,t;if(!n||!br(n.charAt(0)))return!1;for(i=0;i<n.length;i++)if(t=n.charAt(i),!d(t)&&t!="_"&&t!="-"&&t!=":"&&t!=".")return!1;return!0}function yr(n,t,i){for(var r=i-1,o,e,u;r>=t&&f(n.charAt(r));)r--;if(r<t||n.charAt(r)!="}")return null;for(o=r,r--;r>=t&&n.charAt(r)!="{";)r--;if(r<t||n.charAt(r+1)!="#"||(e=r+2,u=n.substr(e,o-e),!hu(u)))return null;while(r>t&&f(n.charAt(r-1)))r--;return{id:u,end:r}}function pr(n,t){return n.substr(0,t.length)==t}function lu(n,t){return n.substr(-t.length)==t}function gi(n){return n.indexOf("://")>=0||pr(n,"mailto:")}function v(){this.m_content=[]}function yt(){this.reset.apply(this,arguments)}function g(n){this.name=n,this.attributes={},this.flags=0,this.closed=!1,this.closing=!1}function vr(n){return n=n.toLowerCase(),n.substr(0,7)=="http://"||n.substr(0,8)=="https://"||n.substr(0,6)=="ftp://"}function pt(n){var i=n.m_position,t=ku(n);return t!=null?t:(n.m_position=i,null)}function ku(n){var i,u,t,r;if(n.current()!="<")return null;if(n.SkipForward(1),n.SkipString("!--")&&(n.Mark(),n.Find("-->")))return i=new g("!"),i.attributes.content=n.Extract(),i.closed=!0,n.SkipForward(3),i;if(u=n.SkipChar("/"),n.Mark(),!n.SkipIdentifier())return null;if(t=new g(n.Extract()),t.closing=u,u)return n.current()!=">"?null:(n.SkipForward(1),t);while(!n.eof()){if(n.SkipWhitespace(),n.SkipString("/>"))return t.closed=!0,t;if(n.SkipChar(">"))return t;if((n.Mark(),!n.SkipIdentifier())||(r=n.Extract(),n.SkipWhitespace(),!n.SkipChar("=")))return null;if(n.SkipWhitespace(),n.SkipChar('"')){if(n.Mark(),!n.Find('"'))return null;t.attributes[r]=n.Extract(),n.SkipForward(1)}else{for(n.Mark();!n.eof()&&!f(n.current())&&n.current()!=">"&&n.current()!="/";)n.SkipForward(1);n.eof()||(t.attributes[r]=n.Extract())}}return null}function ht(n,t,i){this.id=n,this.url=t,this.title=i==undefined?null:i}function gu(n,t){var r=n.m_position,i=vu(n,t);return i==null&&(n.m_position=r),i}function vu(n,t){var i,r;return(n.SkipWhitespace(),!n.SkipChar("["))?null:(n.Mark(),!n.Find("]"))?null:(i=n.Extract(),i.length==0)?null:n.SkipString("]:")?(r=or(n,i,t),n.SkipLinespace(),!n.eol())?null:r:null}function or(n,t,i){var r,s,o,u,c,l,e,h;if(n.SkipWhitespace(),n.eol())return null;if(r=new ht(t),n.SkipChar("<")){for(n.Mark();n.current()!=">";){if(n.eof())return null;n.SkipEscapableChar(i)}if(s=n.Extract(),!n.SkipChar(">"))return null;r.url=tt(p(s),i),n.SkipWhitespace()}else{for(n.Mark(),o=1;!n.eol();){if(u=n.current(),f(u))break;if(t==null)if(u=="(")o++;else if(u==")"&&(o--,o==0))break;n.SkipEscapableChar(i)}r.url=tt(p(n.Extract()),i)}if(n.SkipLinespace(),n.current()==")")return r;c=n.eol(),l=n.m_position,n.eol()&&(n.SkipEol(),n.SkipLinespace());switch(n.current()){case"'":case'"':e=n.current();break;case"(":e=")";break;default:return c?(n.m_position=l,r):null}for(n.SkipForward(1),n.Mark();;){if(n.eol())return null;if(n.current()==e){if(e!=")"){if(h=n.m_position,n.SkipForward(1),n.SkipLinespace(),t==null&&n.current()!=")"||t!=null&&!n.eol())continue;n.m_position=h}break}n.SkipEscapableChar(i)}return r.title=tt(n.Extract(),i),n.SkipForward(1),r}function ct(n,t){this.def=n,this.link_text=t}function kr(n,t,i){this.type=n,this.startOffset=t,this.length=i,this.data=null}function ri(n){this.m_Markdown=n,this.m_Scanner=new yt,this.m_SpareTokens=[],this.m_DisableLinks=!1,this.m_Tokens=[]}function ai(){}function b(n,t){this.m_Markdown=n,this.m_parentType=i,this.m_bMarkdownInHtml=t}function kt(){this.m_Columns=[],this.m_Headers=null,this.m_Rows=[]}function uu(n){var t,r,u,i;if(n.SkipLinespace(),n.current()!="|"&&n.current()!=":"&&n.current()!="-")return null;for(t=null,n.SkipChar("|")&&(t=new kt,t.LeadingBar=!0);;){if(n.SkipLinespace(),n.current()=="|")return null;for(r=n.SkipChar(":");n.current()=="-";)n.SkipForward(1);if(u=n.SkipChar(":"),n.SkipLinespace(),i=ou,r&&u?i=ir:r?i=rr:u&&(i=fr),n.eol())return t==null?null:(t.m_Columns.push(i),t);if(!n.SkipChar("|"))return null;if(t==null&&(t=new kt),t.m_Columns.push(i),n.SkipLinespace(),n.eol())return t.TrailingBar=!0,t}}var n;l.prototype={SafeMode:!1,ExtraMode:!1,MarkdownInHtml:!1,AutoHeadingIDs:!1,UrlBaseLocation:null,UrlRootLocation:null,NewWindowForExternalLinks:!1,NewWindowForLocalLinks:!1,NoFollowLinks:!1,HtmlClassFootnotes:"footnotes",HtmlClassTitledImages:null,RenderingTitledImage:!1,FormatCodeBlockAttributes:null,FormatCodeBlock:null,ExtractHeadBlocks:!1,HeadBlockContent:""},n=l.prototype,l.prototype.GetListItems=function(n,t){for(var u=this.ProcessBlocks(n),r,o,f,s,e,i=0;i<u.length;i++){if(r=u[i],(r.blockType==hi||r.blockType==y||r.blockType==yi)&&r.children){u=fu(u,i,1,r.children),i--;continue}if(t<r.lineStart)break}if((i--,i<0)||(o=u[i],o.blockType!=di&&o.blockType!=pi))return null;for(f=[],s=o.children,e=0;e<s.length;e++)f.push(s[e].lineStart);return i++,i<u.length?f.push(u[i].lineStart):f.push(n.length),f},l.prototype.Transform=function(n){var a=n.indexOf("\r"),h,s,e,c,t,l,u,f,o,i;if(a>=0&&(h=n.indexOf("\n"),h>=0&&(n=h<a?n.replace(/\n\r/g,"\n"):n.replace(/\r\n/g,"\n")),n=n.replace(/\r/g,"\n")),this.HeadBlockContent="",s=this.ProcessBlocks(n),this.m_Abbreviations!=null){e=[];for(c in this.m_Abbreviations)e.push(this.m_Abbreviations[c]);e.sort(function(n,t){return t.Abbr.length-n.Abbr.length}),this.m_Abbreviations=e}for(t=this.m_StringBuilderFinal,t.Clear(),u=0;u<s.length;u++)l=s[u],l.Render(this,t);if(this.m_UsedFootnotes.length>0){for(t.Append('\n<div class="'),t.Append(this.HtmlClassFootnotes),t.Append('">\n'),t.Append("<hr />\n"),t.Append("<ol>\n"),u=0;u<this.m_UsedFootnotes.length;u++)f=this.m_UsedFootnotes[u],t.Append('<li id="#fn:'),t.Append(f.data),t.Append('">\n'),o='<a href="#fnref:'+f.data+'" rev="footnote">&#8617;</a>',i=f.children[f.children.length-1],i.blockType==r?(i.blockType=li,i.data=o):(i=new ai,i.contentLen=0,i.blockType=li,i.data=o,f.children.push(i)),f.Render(this,t),t.Append("</li>\n");t.Append("</ol\n"),t.Append("</div>\n")}return t.ToString()},l.prototype.OnQualifyUrl=function(n){var i,t;if(gi(n))return n;if(pr(n,"/")){if(i=this.UrlRootLocation,!i){if(!this.UrlBaseLocation)return n;t=this.UrlBaseLocation.indexOf("://"),t==-1?t=0:t+=3,t=this.UrlBaseLocation.indexOf("/",t),i=t<0?this.UrlBaseLocation:this.UrlBaseLocation.substr(0,t)}return i+n}return this.UrlBaseLocation?lu(this.UrlBaseLocation,"/")?this.UrlBaseLocation+n:this.UrlBaseLocation+"/"+n:n},l.prototype.OnGetImageSize=function(){return null},l.prototype.OnPrepareLink=function(n){var t=n.attributes.href;this.NoFollowLinks&&(n.attributes.rel="nofollow"),(this.NewWindowForExternalLinks&&gi(t)||this.NewWindowForLocalLinks&&!gi(t))&&(n.attributes.target="_blank"),n.attributes.href=this.OnQualifyUrl(t)},l.prototype.OnPrepareImage=function(n,t){var i=this.OnGetImageSize(n.attributes.src,t);i!=null&&(n.attributes.width=i.width,n.attributes.height=i.height),n.attributes.src=this.OnQualifyUrl(n.attributes.src)},l.prototype.GetLinkDefinition=function(n){var t=this.m_LinkDefinitions[n];return t==undefined?null:t},n.ProcessBlocks=function(n){return this.m_LinkDefinitions=[],this.m_Footnotes=[],this.m_UsedFootnotes=[],this.m_UsedHeaderIDs=[],this.m_Abbreviations=null,new b(this,this.MarkdownInHtml).Process(n)},n.AddLinkDefinition=function(n){this.m_LinkDefinitions[n.id]=n},n.AddFootnote=function(n){this.m_Footnotes[n.data]=n},n.ClaimFootnote=function(n){var t=this.m_Footnotes[n];return t!=undefined?(this.m_UsedFootnotes.push(t),delete this.m_Footnotes[n],this.m_UsedFootnotes.length-1):-1},n.AddAbbreviation=function(n,t){this.m_Abbreviations==null&&(this.m_Abbreviations=[]),this.m_Abbreviations[n]={Abbr:n,Title:t}},n.GetAbbreviations=function(){return this.m_Abbreviations},n.MakeUniqueHeaderID=function(n,t,i){var u,r,f;if(!this.AutoHeadingIDs)return null;for(u=this.m_SpanFormatter.MakeID(n,t,i),u||(u="section"),r=u,f=1;this.m_UsedHeaderIDs[r]!=undefined;)r=u+"-"+f.toString(),f++;return this.m_UsedHeaderIDs[r]=!0,r},n.GetStringBuilder=function(){return this.m_StringBuilder.Clear(),this.m_StringBuilder},n=v.prototype,n.Append=function(n){n&&this.m_content.push(n)},n.Clear=function(){this.m_content.length=0},n.ToString=function(){return this.m_content.join("")},n.HtmlRandomize=function(n){for(var r=n.length,i,t=0;t<r;t++)i=Math.random(),i>.9&&n.charAt(t)!="@"?this.Append(n.charAt(t)):i>.45?(this.Append("&#"),this.Append(n.charCodeAt(t).toString()),this.Append(";")):(this.Append("&#x"),this.Append(n.charCodeAt(t).toString(16)),this.Append(";"))},n.HtmlEncode=function(n,t,i){for(var f=t+i,r=t,u=t;u<f;u++)switch(n.charAt(u)){case"&":u>r&&this.Append(n.substr(r,u-r)),this.Append("&amp;"),r=u+1;break;case"<":u>r&&this.Append(n.substr(r,u-r)),this.Append("&lt;"),r=u+1;break;case">":u>r&&this.Append(n.substr(r,u-r)),this.Append("&gt;"),r=u+1;break;case'"':u>r&&this.Append(n.substr(r,u-r)),this.Append("&quot;"),r=u+1}u>r&&this.Append(n.substr(r,u-r))},n.SmartHtmlEncodeAmpsAndAngles=function(n,t,i){for(var e=t+i,u=t,f,r=t;r<e;r++)switch(n.charAt(r)){case"&":f=ui(n,r),f<0?(r>u&&this.Append(n.substr(u,r-u)),this.Append("&amp;"),u=r+1):r=f-1;break;case"<":r>u&&this.Append(n.substr(u,r-u)),this.Append("&lt;"),u=r+1;break;case">":r>u&&this.Append(n.substr(u,r-u)),this.Append("&gt;"),u=r+1;break;case'"':r>u&&this.Append(n.substr(u,r-u)),this.Append("&quot;"),u=r+1}r>u&&this.Append(n.substr(u,r-u))},n.SmartHtmlEncodeAmps=function(n,t,i){for(var e=t+i,u=t,f,r=t;r<e;r++)switch(n.charAt(r)){case"&":f=ui(n,r),f<0?(r>u&&this.Append(n.substr(u,r-u)),this.Append("&amp;"),u=r+1):r=f-1}r>u&&this.Append(n.substr(u,r-u))},n.HtmlEncodeAndConvertTabsToSpaces=function(n,t,i){for(var e=t+i,r=t,f=0,u=t;u<e;u++){switch(n.charAt(u)){case"\t":for(u>r&&this.Append(n.substr(r,u-r)),r=u+1,this.Append(" "),f++;f%4!=0;)this.Append(" "),f++;f--;break;case"\r":case"\n":u>r&&this.Append(n.substr(r,u-r)),this.Append("\n"),r=u+1;continue;case"&":u>r&&this.Append(n.substr(r,u-r)),this.Append("&amp;"),r=u+1;break;case"<":u>r&&this.Append(n.substr(r,u-r)),this.Append("&lt;"),r=u+1;break;case">":u>r&&this.Append(n.substr(r,u-r)),this.Append("&gt;"),r=u+1;break;case'"':u>r&&this.Append(n.substr(r,u-r)),this.Append("&quot;"),r=u+1}f++}u>r&&this.Append(n.substr(r,u-r))},n=yt.prototype,n.bof=function(){return this.m_position==this.start},n.eof=function(){return this.m_position>=this.end},n.eol=function(){if(this.m_position>=this.end)return!0;var n=this.buf.charAt(this.m_position);return n=="\r"||n=="\n"||n==undefined||n==""},n.reset=function(){this.buf=arguments.length>0?arguments[0]:null,this.start=arguments.length>1?arguments[1]:0,this.end=arguments.length>2?this.start+arguments[2]:this.buf==null?0:this.buf.length,this.m_position=this.start,this.charset_offsets={}},n.current=function(){return this.m_position>=this.end?"\x00":this.buf.charAt(this.m_position)},n.remainder=function(){return this.buf.substr(this.m_position)},n.SkipToEof=function(){this.m_position=this.end},n.SkipForward=function(n){this.m_position+=n},n.SkipToEol=function(){this.m_position=this.buf.indexOf("\n",this.m_position),this.m_position<0&&(this.m_position=this.end)},n.SkipEol=function(){var n=this.m_position;return this.buf.charAt(this.m_position)=="\r"&&this.m_position++,this.buf.charAt(this.m_position)=="\n"&&this.m_position++,this.m_position!=n},n.SkipToNextLine=function(){this.SkipToEol(),this.SkipEol()},n.CharAtOffset=function(n){return this.m_position+n>=this.end?"\x00":this.buf.charAt(this.m_position+n)},n.SkipChar=function(n){return this.buf.charAt(this.m_position)==n?(this.m_position++,!0):!1},n.SkipString=function(n){return this.buf.substr(this.m_position,n.length)==n?(this.m_position+=n.length,!0):!1},n.SkipWhitespace=function(){for(var t=this.m_position,n;;){if(n=this.buf.charAt(this.m_position),n!=" "&&n!="\t"&&n!="\r"&&n!="\n")break;this.m_position++}return this.m_position!=t},n.SkipLinespace=function(){for(var t=this.m_position,n;;){if(n=this.buf.charAt(this.m_position),n!=" "&&n!="\t")break;this.m_position++}return this.m_position!=t},n.FindRE=function(n){n.lastIndex=this.m_position;var t=n.exec(this.buf);return t==null?(this.m_position=this.end,!1):t.index+t[0].length>this.end?(this.m_position=this.end,!1):(this.m_position=t.index,!0)},n.FindOneOf=function(t){var r=-1,u,i;for(u in t)i=t[u],i==null&&(i={},i.m_searched_from=-1,i.m_found_at=-1,t[u]=i),(i.m_searched_from==-1||this.m_position<i.m_searched_from||this.m_position>=i.m_found_at&&i.m_found_at!=-1)&&(i.m_searched_from=this.m_position,i.m_found_at=this.buf.indexOf(u,this.m_position)),(r==-1||i.m_found_at<r)&&(r=i.m_found_at);return r==-1?(r=this.end,!1):(n.m_position=r,!0)},n.Find=function(n){return(this.m_position=this.buf.indexOf(n,this.m_position),this.m_position<0)?(this.m_position=this.end,!1):!0},n.Mark=function(){this.mark=this.m_position},n.Extract=function(){return this.mark>=this.m_position?"":this.buf.substr(this.mark,this.m_position-this.mark)},n.SkipIdentifier=function(){var n=this.buf.charAt(this.m_position);if(n>="a"&&n<="z"||n>="A"&&n<="Z"||n=="_")for(this.m_position++;;)if(n=this.buf.charAt(this.m_position),n>="a"&&n<="z"||n>="A"&&n<="Z"||n=="_"||n>="0"&&n<="9")this.m_position++;else return!0;return!1},n.SkipFootnoteID=function(){var i=this.m_position,n,t;for(this.SkipLinespace(),this.Mark();;)if(n=this.current(),d(n)||n=="-"||n=="_"||n==":"||n=="."||n==" ")this.SkipForward(1);else break;return this.m_position>this.mark&&(t=p(this.Extract()),t.length>0)?(this.SkipLinespace(),t):(this.m_position=i,null)},n.SkipHtmlEntity=function(){if(this.buf.charAt(this.m_position)!="&")return!1;var n=ui(this.buf,this.m_position);return n<0?!1:(this.m_position=n,!0)},n.SkipEscapableChar=function(n){return this.buf.charAt(this.m_position)=="\\"&&ei(this.buf.charAt(this.m_position+1),n)?(this.m_position+=2,!0):(this.m_position<this.end&&this.m_position++,!1)};var cr=1,si=2,ar=4,lr=8;n=g.prototype,n.attributeCount=function(){var n,t;if(!this.attributes)return 0;n=0;for(t in this.attributes)n++;return n},n.get_Flags=function(){return this.flags==0&&(this.flags=nf[this.name.toLowerCase()],this.flags==undefined&&(this.flags=si)),this.flags},n.IsSafe=function(){var i=this.name.toLowerCase(),n,t;if(!bu[i])return!1;if(n=du[i],!n)return this.attributeCount()==0;if(!this.attributes)return!0;for(t in this.attributes)if(!n[t.toLowerCase()])return!1;return this.attributes.href&&!vr(this.attributes.href)?!1:this.attributes.src&&!vr(this.attributes.src)?!1:!0},n.RenderOpening=function(n){n.Append("<"),n.Append(this.name);for(var t in this.attributes)n.Append(" "),n.Append(t),n.Append('="'),n.Append(this.attributes[t]),n.Append('"');this.closed?n.Append(" />"):n.Append(">")},n.RenderClosing=function(n){n.Append("</"),n.Append(this.name),n.Append(">")};var bu={b:1,blockquote:1,code:1,dd:1,dt:1,dl:1,del:1,em:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,i:1,kbd:1,li:1,ol:1,ul:1,p:1,pre:1,s:1,sub:1,sup:1,strong:1,strike:1,img:1,a:1},du={a:{href:1,title:1},img:{src:1,width:1,height:1,alt:1,title:1}},t=cr,w=si,vi=ar,e=lr,nf={p:t|e,div:t,h1:t|e,h2:t|e,h3:t|e,h4:t|e,h5:t|e,h6:t|e,blockquote:t,pre:t,table:t,dl:t,ol:t,ul:t,form:t,fieldset:t,iframe:t,script:t|w,noscript:t|w,math:t|w,ins:t|w,del:t|w,img:t|w,li:e,dd:e,dt:e,td:e,th:e,legend:e,address:e,hr:t|vi,"!":t|vi,head:t};delete t,delete w,delete vi,n=ht.prototype,n.RenderLink=function(n,t,i){if(this.url.substr(0,7).toLowerCase()=="mailto:")t.Append('<a href="'),t.HtmlRandomize(this.url),t.Append('"'),this.title&&(t.Append(' title="'),t.SmartHtmlEncodeAmpsAndAngles(this.title,0,this.title.length),t.Append('"')),t.Append(">"),t.HtmlRandomize(i),t.Append("</a>");else{var u=new g("a"),r=n.GetStringBuilder();r.SmartHtmlEncodeAmpsAndAngles(this.url,0,this.url.length),u.attributes.href=r.ToString(),this.title&&(r.Clear(),r.SmartHtmlEncodeAmpsAndAngles(this.title,0,this.title.length),u.attributes.title=r.ToString()),n.OnPrepareLink(u),u.RenderOpening(t),t.Append(i),t.Append("</a>")}},n.RenderImg=function(n,t,i){var u=new g("img"),r=n.GetStringBuilder();r.SmartHtmlEncodeAmpsAndAngles(this.url,0,this.url.length),u.attributes.src=r.ToString(),i&&(r.Clear(),r.SmartHtmlEncodeAmpsAndAngles(i,0,i.length),u.attributes.alt=r.ToString()),this.title&&(r.Clear(),r.SmartHtmlEncodeAmpsAndAngles(this.title,0,this.title.length),u.attributes.title=r.ToString()),u.closed=!0,n.OnPrepareImage(u,n.RenderingTitledImage),u.RenderOpening(t)};var k=0,er=1,wi=2,sr=3,gr=4,hr=5,wr=6,tu=7,nu=8,rt=9,bt=10,et=11,ot=12,it=13,ru=14,iu=15;n=ri.prototype,n.FormatParagraph=function(n,t,i,r){if(this.Tokenize(t,i,r),this.m_Tokens.length==1&&this.m_Markdown.HtmlClassTitledImages!=null&&this.m_Tokens[0].type==bt){var u=this.m_Tokens[0].data;n.Append('<div class="'),n.Append(this.m_Markdown.HtmlClassTitledImages),n.Append('">\n'),this.m_Markdown.RenderingTitledImage=!0,this.Render(n,t),this.m_Markdown.RenderingTitledImage=!1,n.Append("\n"),u.def.title&&(n.Append("<p>"),n.SmartHtmlEncodeAmpsAndAngles(u.def.title,0,u.def.title.length),n.Append("</p>\n")),n.Append("</div>\n")}else n.Append("<p>"),this.Render(n,t),n.Append("</p>\n")},n.Format2=function(n,t){this.Format(n,t,0,t.length)},n.Format=function(n,t,i,r){this.Tokenize(t,i,r),this.Render(n,t)},n.FormatDirect=function(n){var t=new v;return this.Format(t,n,0,n.length),t.ToString()},n.MakeID=function(n,t,i){var s,u,o,e,r,f;for(this.Tokenize(n,t,i),s=this.m_Tokens,u=new v,o=0;o<s.length;o++){e=s[o];switch(e.type){case k:u.Append(n.substr(e.startOffset,e.length));break;case rt:u.Append(e.data.link_text)}this.FreeToken(e)}for(r=this.m_Scanner,r.reset(u.ToString());!r.eof();){if(br(r.current()))break;r.SkipForward(1)}for(u.Clear();!r.eof();){if(f=r.current(),d(f)||f=="_"||f=="-"||f==".")u.Append(f.toLowerCase());else if(f==" ")u.Append("-");else if(ii(f)){u.Append("-"),r.SkipEol();continue}r.SkipForward(1)}return u.ToString()},n.Render=function(n,t){for(var s=this.m_Tokens,h=s.length,i,o,r,f,u,e=0;e<h;e++){i=s[e];switch(i.type){case k:n.HtmlEncode(t,i.startOffset,i.length);break;case er:n.SmartHtmlEncodeAmps(t,i.startOffset,i.length);break;case wi:case et:case ot:case it:n.Append(t.substr(i.startOffset,i.length));break;case nu:n.Append("<br />\n");break;case sr:n.Append("<em>");break;case gr:n.Append("</em>");break;case hr:n.Append("<strong>");break;case wr:n.Append("</strong>");break;case tu:n.Append("<code>"),n.HtmlEncode(t,i.startOffset,i.length),n.Append("</code>");break;case rt:r=i.data,o=new ri(this.m_Markdown),o.m_DisableLinks=!0,r.def.RenderLink(this.m_Markdown,n,o.FormatDirect(r.link_text));break;case bt:r=i.data,r.def.RenderImg(this.m_Markdown,n,r.link_text);break;case ru:f=i.data,n.Append('<sup id="fnref:'),n.Append(f.id),n.Append('"><a href="#fn:'),n.Append(f.id),n.Append('" rel="footnote">'),n.Append(f.index+1),n.Append("</a></sup>");break;case iu:u=i.data,n.Append("<abbr"),u.Title&&(n.Append(' title="'),n.HtmlEncode(u.Title,0,u.Title.length),n.Append('"')),n.Append(">"),n.HtmlEncode(u.Abbr,0,u.Abbr.length),n.Append("</abbr>")}this.FreeToken(i)}},n.Tokenize=function(n,t,i){var r=this.m_Scanner,o,h,u,p,l,f,v,y,a;r.reset(n,t,i),o=this.m_Tokens,o.length=0;for(var s=null,c=this.m_Markdown.GetAbbreviations(),w=c==null?/[\*\_\`\[\!\<\&\ \\]/g:null,b=this.m_Markdown.ExtraMode,e=r.m_position;!r.eof();){if(w!=null&&!r.FindRE(w))break;h=r.m_position,u=null;switch(r.current()){case"*":case"_":if(u=this.CreateEmphasisMark(),u!=null)switch(u.type){case it:case et:case ot:s==null&&(s=[]),s.push(u)}break;case"`":u=this.ProcessCodeSpan();break;case"[":case"!":p=r.m_position,u=this.ProcessLinkOrImageOrFootnote(),u==null&&(r.m_position=p);break;case"<":f=r.m_position,l=pt(r),l!=null?!this.m_Markdown.SafeMode||l.IsSafe()?u=this.CreateToken(er,f,r.m_position-f):r.m_position=f:(r.m_position=f,u=this.ProcessAutoLink(),u==null&&(r.m_position=f));break;case"&":f=r.m_position,r.SkipHtmlEntity()&&(u=this.CreateToken(wi,f,r.m_position-f));break;case" ":r.CharAtOffset(1)==" "&&ii(r.CharAtOffset(2))&&(r.SkipForward(2),r.eof()||(r.SkipEol(),u=this.CreateToken(nu,h,0)));break;case"\\":ei(r.CharAtOffset(1),b)&&(u=this.CreateToken(k,r.m_position+1,1),r.SkipForward(2))}if(u==null&&c!=null&&!d(r.CharAtOffset(-1))){v=r.m_position;for(y in c){if(a=c[y],r.SkipString(a.Abbr)&&!d(r.current())){u=this.CreateDataToken(iu,a);break}r.position=v}}u!=null?(h>e&&o.push(this.CreateToken(k,e,h-e)),o.push(u),e=r.m_position):r.SkipForward(1)}r.m_position>e&&o.push(this.CreateToken(k,e,r.m_position-e)),s!=null&&this.ResolveEmphasisMarks(o,s)},n.CreateEmphasisMark=function(){var n=this.m_Scanner,i=n.current(),o=i=="*"?"_":"*",t=n.m_position,e,r,u;if(n.bof()||f(n.CharAtOffset(-1))){while(ti(n.current()))n.SkipForward(1);if(n.eof()||f(n.current()))return this.CreateToken(wi,t,n.m_position-t);n.m_position=t}while(ti(n.CharAtOffset(-1)))n.SkipForward(-1);for(e=n.bof()||f(n.CharAtOffset(-1)),n.m_position=t;n.current()==i;)n.SkipForward(1);for(r=n.m_position-t;ti(n.CharAtOffset(1));)n.SkipForward(1);return(u=n.eof()||f(n.current()),n.m_position=t+r,e)?this.CreateToken(et,t,n.m_position-t):u?this.CreateToken(ot,t,n.m_position-t):this.m_Markdown.ExtraMode&&i=="_"?null:this.CreateToken(it,t,n.m_position-t)},n.SplitMarkToken=function(n,t,i,r){var u=this.CreateToken(i.type,i.startOffset+r,i.length-r);return i.length=r,t.splice(ut(t,i)+1,0,u),n.splice(ut(n,i)+1,0,u),u},n.ResolveEmphasisMarks=function(n,t){for(var s=this.m_Scanner.buf,o=!0,f,i,e,u,r;o;)for(o=!1,f=0;f<t.length;f++)if(i=t[f],i.type==et||i.type==it)for(e=f+1;e<t.length;e++){if(u=t[e],u.type!=ot&&u.type!=it)break;if(s.charAt(i.startOffset)==s.charAt(u.startOffset)){r=Math.min(i.length,u.length),r>=3&&(r=r%2==1?1:2),i.length>r&&(i=this.SplitMarkToken(n,t,i,i.length-r),f--),u.length>r&&this.SplitMarkToken(n,t,u,r),i.type=r==1?sr:hr,u.type=r==1?gr:wr,t.splice(ut(t,i),1),t.splice(ut(t,u),1),o=!0;break}}},n.ProcessAutoLink=function(){var t,u,e,n,i,r;if(this.m_DisableLinks)return null;for(t=this.m_Scanner,t.SkipForward(1),t.Mark(),u=this.m_Markdown.ExtraMode;!t.eof();){if(e=t.current(),f(e))break;if(e==">")return(n=tt(t.Extract(),u),i=null,su(n)?(n.toLowerCase().substr(0,7)=="mailto:"?r=n.substr(7):(r=n,n="mailto:"+n),i=new ct(new ht("auto",n,null),r)):cu(n)&&(i=new ct(new ht("auto",n,null),n)),i!=null)?(t.SkipForward(1),this.CreateDataToken(rt,i)):null;t.SkipEscapableChar(u)}return null},n.ProcessLinkOrImageOrFootnote=function(){var n=this.m_Scanner,a=n.SkipChar("!")?bt:rt,e,s,l,v,h,p,o,y,t,u,r,i,c;if(!n.SkipChar("["))return null;if(e=this.m_position,this.m_Markdown.ExtraMode&&a==rt&&n.SkipChar("^")){if(n.SkipLinespace(),n.Mark(),s=n.SkipFootnoteID(),s!=null&&n.SkipChar("]")&&(l=this.m_Markdown.ClaimFootnote(s),l>=0))return this.CreateDataToken(ru,{index:l,id:s});this.m_position=e}if(this.m_DisableLinks)return null;for(v=this.m_Markdown.ExtraMode,n.Mark(),h=1;!n.eof();){if(p=n.current(),p=="[")h++;else if(p=="]"&&(h--,h==0))break;n.SkipEscapableChar(v)}if(n.eof())return null;if(o=tt(n.Extract(),v),n.SkipForward(1),e=n.m_position,n.SkipChar("("))return(y=or(n,null,this.m_Markdown.ExtraMode),y==null)?null:(n.SkipWhitespace(),!n.SkipChar(")"))?null:this.CreateDataToken(a,new ct(y,o));if(n.SkipChar(" ")||n.SkipChar("\t"),n.eol()&&(n.SkipEol(),n.SkipLinespace()),t=null,n.current()=="["){if(n.SkipForward(1),n.Mark(),!n.Find("]"))return null;t=n.Extract(),n.SkipForward(1)}else n.m_position=e;if(!t)for(t=o;;){if(u=t.indexOf("\n"),u<0)break;for(r=u;r>0&&f(t.charAt(r-1));)r--;for(i=u;i<t.length&&f(t.charAt(i));)i++;t=t.substr(0,r)+" "+t.substr(i)}return(c=this.m_Markdown.GetLinkDefinition(t),c==null)?null:this.CreateDataToken(a,new ct(c,o))},n.ProcessCodeSpan=function(){for(var n=this.m_Scanner,t=n.m_position,r=0,i,e,u;n.SkipChar("`");)r++;if((n.SkipWhitespace(),n.eof())||(i=n.m_position,!n.Find(n.buf.substr(t,r))))return this.CreateToken(k,t,n.m_position-t);for(e=n.m_position+r;f(n.CharAtOffset(-1));)n.SkipForward(-1);return u=this.CreateToken(tu,i,n.m_position-i),n.m_position=e,u},n.CreateToken=function(n,t,i){if(this.m_SpareTokens.length!=0){var r=this.m_SpareTokens.pop();return r.type=n,r.startOffset=t,r.length=i,r.data=null,r}return new kr(n,t,i)},n.CreateDataToken=function(n,t){var i;return this.m_SpareTokens.length!=0?(i=this.m_SpareTokens.pop(),i.type=n,i.data=t,i):(i=new kr(n,0,0),i.data=t,i)},n.FreeToken=function(n){n.data=null,this.m_SpareTokens.push(n)};var i=0,nt=1,dr=2,au=3,yu=4,wu=5,pu=6,st=7,tr=8,o=9,a=10,c=11,r=12,h=13,wt=14,y=15,lt=16,ci=17,oi=18,ur=19,pi=20,di=21,yi=22,hi=23,bi=24,u=25,ft=26,nr=27,s=28,li=29;n=ai.prototype,n.buf=null,n.blockType=i,n.contentStart=0,n.contentLen=0,n.lineStart=0,n.lineLen=0,n.children=null,n.data=null,n.get_Content=function(){return this.buf==null?null:this.contentStart==-1?this.buf:this.buf.substr(this.contentStart,this.contentLen)},n.get_CodeContent=function(){for(var t=new v,n=0;n<this.children.length;n++)t.Append(this.children[n].get_Content()),t.Append("\n");return t.ToString()},n.RenderChildren=function(n,t){for(var i=0;i<this.children.length;i++)this.children[i].Render(n,t)},n.ResolveHeaderID=function(n){if(this.data!=null)return this.data;var i=yr(this.buf,this.contentStart,this.get_contentEnd()),t=null;return i!=null?(this.set_contentEnd(i.end),t=i.id):t=n.MakeUniqueHeaderID(this.buf,this.contentStart,this.contentLen),this.data=t,t},n.Render=function(n,t){var k,h,l,e,b,w,f,d;switch(this.blockType){case i:return;case r:n.m_SpanFormatter.FormatParagraph(t,this.buf,this.contentStart,this.contentLen);break;case ci:n.m_SpanFormatter.Format(t,this.buf,this.contentStart,this.contentLen),t.Append("\n");break;case nt:case dr:case au:case yu:case wu:case pu:n.ExtraMode&&!n.SafeMode?(t.Append("<h"+(this.blockType-nt+1).toString()),k=this.ResolveHeaderID(n),k?(t.Append(' id="'),t.Append(k),t.Append('">')):t.Append(">")):t.Append("<h"+(this.blockType-nt+1).toString()+">"),n.m_SpanFormatter.Format(t,this.buf,this.contentStart,this.contentLen),t.Append("</h"+(this.blockType-nt+1).toString()+">\n");break;case wt:t.Append("<hr />\n");return;case a:case c:t.Append("<li>"),n.m_SpanFormatter.Format(t,this.buf,this.contentStart,this.contentLen),t.Append("</li>\n");break;case y:t.Append(this.buf.substr(this.contentStart,this.contentLen));return;case lt:t.HtmlEncode(this.buf,this.contentStart,this.contentLen);return;case oi:for(t.Append("<pre"),n.FormatCodeBlockAttributes!=null&&t.Append(n.FormatCodeBlockAttributes(this.data)),t.Append("><code>"),h=t,n.FormatCodeBlock&&(h=t,t=new v),f=0;f<this.children.length;f++)l=this.children[f],t.HtmlEncodeAndConvertTabsToSpaces(l.buf,l.contentStart,l.contentLen),t.Append("\n");n.FormatCodeBlock&&(h.Append(n.FormatCodeBlock(t.ToString(),this.data)),t=h),t.Append("</code></pre>\n\n");return;case o:t.Append("<blockquote>\n"),this.RenderChildren(n,t),t.Append("</blockquote>\n");return;case ur:t.Append("<li>\n"),this.RenderChildren(n,t),t.Append("</li>\n");return;case pi:t.Append("<ol>\n"),this.RenderChildren(n,t),t.Append("</ol>\n");return;case di:t.Append("<ul>\n"),this.RenderChildren(n,t),t.Append("</ul>\n");return;case yi:e=this.data,b=e.name.toLowerCase(),b=="a"?n.OnPrepareLink(e):b=="img"&&n.OnPrepareImage(e,n.RenderingTitledImage),e.RenderOpening(t),t.Append("\n"),this.RenderChildren(n,t),e.RenderClosing(t),t.Append("\n");return;case hi:case s:this.RenderChildren(n,t);return;case bi:this.data.Render(n,t);return;case u:t.Append("<dd>"),this.children!=null?(t.Append("\n"),this.RenderChildren(n,t)):n.m_SpanFormatter.Format(t,this.buf,this.contentStart,this.contentLen),t.Append("</dd>\n");break;case ft:if(this.children==null)for(w=this.get_Content().split("\n"),f=0;f<w.length;f++)d=w[f],t.Append("<dt>"),n.m_SpanFormatter.Format2(t,p(d)),t.Append("</dt>\n");else t.Append("<dt>\n"),this.RenderChildren(n,t),t.Append("</dt>\n");break;case nr:t.Append("<dl>\n"),this.RenderChildren(n,t),t.Append("</dl>\n");return;case li:t.Append("<p>"),this.contentLen>0&&(n.m_SpanFormatter.Format(t,this.buf,this.contentStart,this.contentLen),t.Append("&nbsp;")),t.Append(this.data),t.Append("</p>\n")}},n.RevertToPlain=function(){this.blockType=r,this.contentStart=this.lineStart,this.contentLen=this.lineLen},n.get_contentEnd=function(){return this.contentStart+this.contentLen},n.set_contentEnd=function(n){this.contentLen=n-this.contentStart},n.get_leadingSpaces=function(){for(var t=0,n=this.lineStart;n<this.lineStart+this.lineLen;n++)if(this.buf.charAt(n)==" ")t++;else break;return t},n.CopyFrom=function(n){return this.blockType=n.blockType,this.buf=n.buf,this.contentStart=n.contentStart,this.contentLen=n.contentLen,this.lineStart=n.lineStart,this.lineLen=n.lineLen,this},n=b.prototype,n.Process=function(n){var t=new yt(n);return this.ScanLines(t)},n.ProcessRange=function(n,t,i){var r=new yt(n,t,i);return this.ScanLines(r)},n.StartTable=function(n,t,i){var r,u;if(i.length>1)return!1;if(i.length==1){if(r=n.m_position,n.m_position=i[0].lineStart,t.m_Headers=t.ParseRow(n),t.m_Headers==null)return!1;n.m_position=r,i.length=0}for(;;){if(r=n.m_position,u=t.ParseRow(n),u!=null){t.m_Rows.push(u);continue}n.m_position=r;break}return!0},n.ScanLines=function(n){for(var e=[],f=[],w=-1,b,t,v,p,y,l;!n.eof();){if(b=w==i,t=this.EvaluateLine(n),w=t.blockType,t.blockType==u&&(t.data=b),t.blockType==st||t.blockType==tr){if(f.length>0&&(l=f.pop(),this.CollapseLines(e,f),l.blockType!=i)){l.RevertToPlain(),l.blockType=t.blockType==st?nt:dr,e.push(l);continue}t.blockType==st?(t.RevertToPlain(),f.push(t)):t.contentLen>=3?(t.blockType=wt,e.push(t)):(t.RevertToPlain(),f.push(t));continue}if(v=f.length>0?f[0].blockType:i,t.blockType==bi)if(p=t.data,y=n.m_position,this.StartTable(n,p,f)){e.push(t);continue}else n.m_position=y,t.RevertToPlain();switch(t.blockType){case i:switch(v){case i:this.FreeBlock(t);break;case r:this.CollapseLines(e,f),this.FreeBlock(t);break;case o:case a:case c:case u:case s:case h:f.push(t)}break;case r:switch(v){case i:case r:f.push(t);break;case o:case a:case c:case u:case s:l=f[f.length-1],l.blockType==i?(this.CollapseLines(e,f),f.push(t)):f.push(t);break;case h:this.CollapseLines(e,f),f.push(t)}break;case h:switch(v){case i:f.push(t);break;case r:case o:l=f[f.length-1],l.blockType==i?(this.CollapseLines(e,f),f.push(t)):(t.RevertToPlain(),f.push(t));break;case a:case c:case h:case u:case s:f.push(t)}break;case o:v!=o&&this.CollapseLines(e,f),f.push(t);break;case a:case c:switch(v){case i:f.push(t);break;case r:case o:l=f[f.length-1],l.blockType==i||this.m_parentType==a||this.m_parentType==c||this.m_parentType==u?(this.CollapseLines(e,f),f.push(t)):(t.RevertToPlain(),f.push(t));break;case a:case c:case u:case s:t.blockType!=v&&this.CollapseLines(e,f),f.push(t);break;case h:this.CollapseLines(e,f),f.push(t)}break;case u:case s:switch(v){case i:case r:case u:case s:this.CollapseLines(e,f),f.push(t);break;default:t.RevertToPlain(),f.push(t)}break;default:this.CollapseLines(e,f),e.push(t)}}return this.CollapseLines(e,f),this.m_Markdown.ExtraMode&&this.BuildDefinitionLists(e),e},n.CreateBlock=function(n){var t;return t=this.m_Markdown.m_SpareBlocks.length>1?this.m_Markdown.m_SpareBlocks.pop():new ai,t.lineStart=n,t},n.FreeBlock=function(n){this.m_Markdown.m_SpareBlocks.push(n)},n.FreeBlocks=function(n){for(var t=0;t<n.length;t++)this.m_Markdown.m_SpareBlocks.push(n[t]);n.length=0},n.RenderLines=function(n){for(var r=this.m_Markdown.GetStringBuilder(),i,t=0;t<n.length;t++)i=n[t],r.Append(i.buf.substr(i.contentStart,i.contentLen)),r.Append("\n");return r.ToString()},n.CollapseLines=function(n,t){for(var l,d,k,w,v,y,e,f,p;t.length>0&&t[t.length-1].blockType==i;)this.FreeBlock(t.pop());if(t.length!=0)switch(t[0].blockType){case r:l=this.CreateBlock(t[0].lineStart),l.blockType=r,l.buf=t[0].buf,l.contentStart=t[0].contentStart,l.set_contentEnd(t[t.length-1].get_contentEnd()),n.push(l),this.FreeBlocks(t);break;case o:d=this.RenderLines(t),k=new b(this.m_Markdown,this.m_bMarkdownInHtml),k.m_parentType=o,w=this.CreateBlock(t[0].lineStart),w.blockType=o,w.children=k.Process(d),this.FreeBlocks(t),n.push(w);break;case a:case c:n.push(this.BuildList(t));break;case u:if(n.length>0){v=n[n.length-1];switch(v.blockType){case r:v.blockType=ft;break;case u:break;default:y=this.CreateBlock(v.lineStart),y.blockType=ft,y.children=[],y.children.push(v),n.pop(),n.push(y)}}n.push(this.BuildDefinition(t));break;case s:this.m_Markdown.AddFootnote(this.BuildFootnote(t));break;case h:for(e=this.CreateBlock(t[0].lineStart),e.blockType=oi,e.children=[],f=t[0].get_Content(),f.substr(0,2)=="{{"&&f.substr(f.length-2,2)=="}}"&&(e.data=f.substr(2,f.length-4),t.splice(0,1)),p=0;p<t.length;p++)e.children.push(t[p]);n.push(e),t.length=0}},n.EvaluateLine=function(n){var t=this.CreateBlock(n.m_position);return t.buf=n.buf,t.contentStart=n.m_position,t.contentLen=-1,t.blockType=this.EvaluateLineInternal(n,t),t.contentLen<0&&(n.SkipToEol(),t.contentLen=n.m_position-t.contentStart),t.lineLen=n.m_position-t.lineStart,n.SkipEol(),t},n.EvaluateLineInternal=function(n,t){var v,e,y,b,tt,l,it,rt,w,k,ft,ut,d,g;if(n.eol())return i;if(v=n.m_position,e=n.current(),e=="#"){for(y=1,n.SkipForward(1);n.current()=="#";)y++,n.SkipForward(1);for(y>6&&(y=6),n.SkipLinespace(),t.contentStart=n.m_position,n.SkipToEol(),this.m_Markdown.ExtraMode&&!this.m_Markdown.SafeMode&&(b=yr(n.buf,t.contentStart,n.m_position),b!=null&&(t.data=b.id,n.m_position=b.end));n.m_position>t.contentStart&&n.CharAtOffset(-1)=="#";)n.SkipForward(-1);while(n.m_position>t.contentStart&&f(n.CharAtOffset(-1)))n.SkipForward(-1);return t.contentLen=n.m_position-t.contentStart,n.SkipToEol(),nt+(y-1)}if(e=="-"||e=="="){for(w=e;n.current()==w;)n.SkipForward(1);if(n.SkipLinespace(),n.eol())return w=="="?st:tr;n.m_position=v}if(this.m_Markdown.ExtraMode){if(tt=uu(n),tt!=null)return t.data=tt,bi;if(n.m_position=v,e=="~"){if(this.ProcessFencedCodeBlock(n,t))return t.blockType;n.m_position=v}}for(l=-1,it=0;!n.eol();){if(n.current()==" ")l<0&&it++;else if(n.current()=="\t")l<0&&(l=n.m_position);else break;n.SkipForward(1)}if(n.eol())return t.contentLen=0,i;if(it>=4)return t.contentStart=v+4,h;if(l>=0&&l-v<4)return t.contentStart=l+1,h;if(t.contentStart=n.m_position,e=n.current(),e=="<"){if(this.ScanHtml(n,t))return t.blockType;n.m_position=t.contentStart}if(e==">")return at(n.CharAtOffset(1))?(n.SkipForward(2),t.contentStart=n.m_position,o):(n.SkipForward(1),t.contentStart=n.m_position,o);if(e=="-"||e=="_"||e=="*"){for(rt=0;!n.eol();){if(w=n.current(),n.current()==e){rt++,n.SkipForward(1);continue}if(at(n.current())){n.SkipForward(1);continue}break}if(n.eol()&&rt>=3)return wt;n.m_position=t.contentStart}if(this.m_Markdown.ExtraMode&&e=="*"&&n.CharAtOffset(1)=="["){for(n.SkipForward(2),n.SkipLinespace(),n.Mark();!n.eol()&&n.current()!="]";)n.SkipForward(1);if(k=p(n.Extract()),n.current()=="]"&&n.CharAtOffset(1)==":"&&k)return n.SkipForward(2),n.SkipLinespace(),n.Mark(),n.SkipToEol(),ft=n.Extract(),this.m_Markdown.AddAbbreviation(k,ft),i;n.m_position=t.contentStart}if((e=="*"||e=="+"||e=="-")&&at(n.CharAtOffset(1)))return n.SkipForward(1),n.SkipLinespace(),t.contentStart=n.m_position,c;if(e==":"&&this.m_Markdown.ExtraMode&&at(n.CharAtOffset(1)))return n.SkipForward(1),n.SkipLinespace(),t.contentStart=n.m_position,u;if(fi(e)){for(n.SkipForward(1);fi(n.current());)n.SkipForward(1);if(n.SkipChar(".")&&n.SkipLinespace())return t.contentStart=n.m_position,a;n.m_position=t.contentStart}if(e=="["){if(this.m_Markdown.ExtraMode&&n.CharAtOffset(1)=="^"){if(ut=n.m_position,n.SkipForward(2),d=n.SkipFootnoteID(),d!=null&&n.SkipChar("]")&&n.SkipChar(":"))return n.SkipLinespace(),t.contentStart=n.m_position,t.data=d,s;n.m_position=ut}if(g=gu(n,this.m_Markdown.ExtraMode),g!=null)return this.m_Markdown.AddLinkDefinition(g),i}return r};var ki=0,dt=1,gt=2,vt=3,ni=4;n.GetMarkdownMode=function(n){var t=n.attributes.markdown;return t==undefined?this.m_bMarkdownInHtml?vt:ki:(delete n.attributes.markdown,t=="1")?(n.get_Flags()&lr)!=0?gt:dt:t=="block"?dt:t=="deep"?vt:t=="span"?gt:ni},n.ProcessMarkdownEnabledHtml=function(n,t,i,r){for(var f=n.m_position,s=1,h=!1,o,e,c,u;!n.eof();){if(!n.Find("<"))break;if(o=n.m_position,e=pt(n),e==null){n.SkipForward(1);continue}if((this.m_Markdown.SafeMode&&r==ni&&!h&&(e.IsSafe()||(h=!0)),!e.closed)&&e.name==i.name)if(e.closing){if(s--,s==0){n.SkipLinespace(),n.SkipEol(),t.blockType=yi,t.data=i,t.set_contentEnd(n.m_position);switch(r){case gt:u=this.CreateBlock(f),u.buf=n.buf,u.blockType=ci,u.contentStart=f,u.contentLen=o-f,t.children=[],t.children.push(u);break;case dt:case vt:c=new b(this.m_Markdown,r==vt),t.children=c.ProcessRange(n.buf,f,o-f);break;case ni:h?(t.blockType=lt,t.set_contentEnd(n.m_position)):(u=this.CreateBlock(f),u.buf=n.buf,u.blockType=y,u.contentStart=f,u.contentLen=o-f,t.children=[],t.children.push(u))}return!0}}else s++}return!1},n.ScanHtml=function(n,t){var f=n.m_position,e=pt(n),h,a,v,b,o,w,c,u,s,l,r,k;if(e==null||e.closing||(h=!1,this.m_Markdown.SafeMode&&!e.IsSafe()&&(h=!0),a=e.get_Flags(),(a&cr)==0))return!1;if((a&ar)!=0||e.closed)return n.SkipLinespace(),n.SkipEol(),t.contentLen=n.m_position-t.contentStart,t.blockType=h?lt:y,!0;if((a&si)!=0&&(n.SkipLinespace(),!n.eol()))return!1;if(v=this.m_Markdown.ExtractHeadBlocks&&e.name.toLowerCase()=="head",b=n.m_position,!v&&this.m_Markdown.ExtraMode&&(s=this.GetMarkdownMode(e),s!=ki))return this.ProcessMarkdownEnabledHtml(n,t,e,s);for(o=null,w=1;!n.eof();){if(!n.Find("<"))break;if(c=n.m_position,u=pt(n),u==null){n.SkipForward(1);continue}if(this.m_Markdown.SafeMode&&!u.IsSafe()&&(h=!0),!u.closed){if(!v&&!u.closing&&this.m_Markdown.ExtraMode&&!h&&(s=this.GetMarkdownMode(u),s!=ki))if(l=this.CreateBlock(f),this.ProcessMarkdownEnabledHtml(n,l,u,s)){o==null&&(o=[]),c>f&&(r=this.CreateBlock(f),r.buf=n.buf,r.blockType=y,r.contentStart=f,r.contentLen=c-f,o.push(r)),o.push(l),f=n.m_position;continue}else this.FreeBlock(l);if(u.name==e.name&&!u.closed)if(u.closing){if(w--,w==0)return(n.SkipLinespace(),n.SkipEol(),h)?(t.blockType=lt,t.set_contentEnd(n.m_position),!0):o!=null?(n.m_position>f&&(r=this.CreateBlock(f),r.buf=n.buf,r.blockType=y,r.contentStart=f,r.contentLen=n.m_position-f,o.push(r)),t.blockType=hi,t.set_contentEnd(n.m_position),t.children=o,!0):v?(k=n.buf.substr(b,c-b),this.m_Markdown.HeadBlockContent=this.m_Markdown.HeadBlockContent+p(k)+"\n",t.blockType=y,t.contentStart=n.position,t.contentEnd=n.position,t.lineStart=n.position,!0):(t.blockType=y,t.contentLen=n.m_position-t.contentStart,!0)}else w++}}return i},n.BuildList=function(n){for(var l=n[0].blockType,g=n[0].get_leadingSpaces(),k,d,f,o,e,w,v,a,s,p,u,y,t=1;t<n.length;t++){if(n[t].blockType==r&&(n[t-1].blockType==r||n[t-1].blockType==l)){n[t-1].set_contentEnd(n[t].get_contentEnd()),this.FreeBlock(n[t]),n.splice(t,1),t--;continue}n[t].blockType!=h&&n[t].blockType!=i&&(k=n[t].get_leadingSpaces(),k>g&&(n[t].blockType=h,d=n[t].get_contentEnd(),n[t].contentStart=n[t].lineStart+k,n[t].set_contentEnd(d)))}for(f=this.CreateBlock(0),f.blockType=l==c?di:pi,f.children=[],t=0;t<n.length;t++){for(o=t;o>0&&n[o-1].blockType==i;)o--;for(e=t;e<n.length-1&&n[e+1].blockType!=l;)e++;if(o==e)f.children.push(this.CreateBlock().CopyFrom(n[t]));else{for(w=!1,v=this.m_Markdown.GetStringBuilder(),u=o;u<=e;u++)a=n[u],v.Append(a.buf.substr(a.contentStart,a.contentLen)),v.Append("\n"),n[u].blockType==i&&(w=!0);if(s=this.CreateBlock(),s.blockType=ur,s.lineStart=n[o].lineStart,p=new b(this.m_Markdown),p.m_parentType=l,s.children=p.Process(v.ToString()),!w)for(u=0;u<s.children.length;u++)y=s.children[u],y.blockType==r&&(y.blockType=ci);f.children.push(s)}t=e}return f.lineStart=f.children[0].lineStart,this.FreeBlocks(n),n.length=0,f},n.BuildDefinition=function(n){for(var h,s,i,f,e,o,t=1;t<n.length;t++)if(n[t].blockType==r&&(n[t-1].blockType==r||n[t-1].blockType==u)){n[t-1].set_contentEnd(n[t].get_contentEnd()),this.FreeBlock(n[t]),n.splice(t,1),t--;continue}if(h=n[0].data,n.length==1&&!h)return s=n[0],n.length=0,s;for(i=this.m_Markdown.GetStringBuilder(),t=0;t<n.length;t++)f=n[t],i.Append(f.buf.substr(f.contentStart,f.contentLen)),i.Append("\n");return e=this.CreateBlock(n[0].lineStart),e.blockType=u,o=new b(this.m_Markdown),o.m_parentType=u,e.children=o.Process(i.ToString()),this.FreeBlocks(n),n.length=0,e},n.BuildDefinitionLists=function(n){for(var i=null,t=0;t<n.length;t++)switch(n[t].blockType){case ft:case u:i==null&&(i=this.CreateBlock(n[t].lineStart),i.blockType=nr,i.children=[],n.splice(t,0,i),t++),i.children.push(n[t]),n.splice(t,1),t--;break;default:i=null}},n.BuildFootnote=function(n){for(var u,f,e,i,t=1;t<n.length;t++)if(n[t].blockType==r&&(n[t-1].blockType==r||n[t-1].blockType==s)){n[t-1].set_contentEnd(n[t].get_contentEnd()),this.FreeBlock(n[t]),n.splice(t,1),t--;continue}for(u=this.m_Markdown.GetStringBuilder(),t=0;t<n.length;t++)f=n[t],u.Append(f.buf.substr(f.contentStart,f.contentLen)),u.Append("\n");return e=new b(this.m_Markdown),e.m_parentType=s,i=this.CreateBlock(n[0].lineStart),i.blockType=s,i.data=n[0].data,i.children=e.Process(u.ToString()),this.FreeBlocks(n),n.length=0,i},n.ProcessFencedCodeBlock=function(n,t){var e=n.m_position,r,f,u,i;for(n.Mark();n.current()=="~";)n.SkipForward(1);return(r=n.Extract(),r.length<3)?!1:(n.SkipLinespace(),!n.eol())?!1:(n.SkipEol(),f=n.m_position,!n.Find(r))?!1:ii(n.CharAtOffset(-1))?(u=n.m_position,n.SkipForward(r.length),n.SkipLinespace(),!n.eol())?!1:(t.blockType=oi,t.children=[],u--,i=this.CreateBlock(e),i.blockType=h,i.buf=n.buf,i.contentStart=f,i.contentLen=u-f,t.children.push(i),!0):!1};var ou=0,rr=1,fr=2,ir=3;n=kt.prototype,n.LeadingBar=!1,n.TrailingBar=!1,n.ParseRow=function(n){var i,t;if(n.SkipLinespace(),n.eol())return null;if(i=this.LeadingBar,this.LeadingBar&&!n.SkipChar("|"))return i=!0,null;for(t=[];!n.eol();){for(n.Mark();!n.eol()&&n.current()!="|";)n.SkipForward(1);t.push(p(n.Extract())),i|=n.SkipChar("|")}if(!i)return null;while(t.length<this.m_Columns.length)t.push("&nbsp;");return n.SkipEol(),t},n.RenderRow=function(n,t,i,r){for(var u=0;u<i.length;u++){if(t.Append("\t<"),t.Append(r),u<this.m_Columns.length)switch(this.m_Columns[u]){case rr:t.Append(' align="left"');break;case fr:t.Append(' align="right"');break;case ir:t.Append(' align="center"')}t.Append(">"),n.m_SpanFormatter.Format2(t,i[u]),t.Append("</"),t.Append(r),t.Append(">\n")}},n.Render=function(n,t){var i,r;for(t.Append("<table>\n"),this.m_Headers!=null&&(t.Append("<thead>\n<tr>\n"),this.RenderRow(n,t,this.m_Headers,"th"),t.Append("</tr>\n</thead>\n")),t.Append("<tbody>\n"),i=0;i<this.m_Rows.length;i++)r=this.m_Rows[i],t.Append("<tr>\n"),this.RenderRow(n,t,r,"td"),t.Append("</tr>\n");t.Append("</tbody>\n"),t.Append("</table>\n")},this.Markdown=l,this.HtmlTag=g},MarkdownDeepEditor=new function(){function u(n,t){return n.substr(0,t.length)==t}function et(n,t){return n.substr(-t.length)==t}function i(n){return n==" "||n=="\t"||n=="\r"||n=="\n"}function r(n){return n=="\r"||n=="\n"}function o(n){for(var t=0,r=n.length;t<r&&i(n.charAt(t));)t++;while(r-1>t&&i(n.charAt(r-1)))r--;return n.substr(t,r-t)}function e(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}function v(n){return n.preventDefault&&n.preventDefault(),n.cancelBubble!==undefined&&(n.cancelBubble=!0,n.keyCode=0,n.returnValue=!1),!1}function f(){}function b(n,t,i,r){return n<t?n:n<t+i?t:n+r-i}function a(n,t){n.setSelectionRange||(s=!0),this.m_lastContent=null,this.m_undoStack=[],this.m_undoPos=0,this.m_undoMode=h,this.Markdown=new MarkdownDeep.Markdown,this.Markdown.SafeMode=!1,this.Markdown.ExtraMode=!0,this.Markdown.NewWindowForLocalLinks=!0,this.Markdown.NewWindowForExternalLinks=!0,this.m_textarea=n,this.m_divHtml=t;var i=this;e(n,"keyup",function(){i.onMarkdownChanged()}),e(n,"keydown",function(n){return i.onKeyDown(n)}),e(n,"paste",function(){i.onMarkdownChanged()}),e(n,"input",function(){i.onMarkdownChanged()}),e(n,"mousedown",function(){i.SetUndoMode(h)}),this.onMarkdownChanged()}var s=!1,g=9,y=13,d=33,k=34,tt=36,ot=35,ht=37,rt=39,nt=38,ut=40,ft=8,it=46,c=0,l=1,w=2,h=3,st=4,p={Z:"undo",Y:"redo",B:"bold",I:"italic",H:"heading",K:"code",U:"ullist",O:"ollist",Q:"indent",E:"outdent",L:"link",G:"img",R:"hr","0":"h0","1":"h1","2":"h2","3":"h3","4":"h4","5":"h5","6":"h6"},n,t;n=f.prototype,n.InitFromTextArea=function(n){var t,r,i;this.m_textarea=n,s?(t=document.selection.createRange(),r=t.duplicate(),r.moveToElementText(n),i=-r.moveStart("character",-1e7),this.m_selectionStart=-t.moveStart("character",-1e7)-i,this.m_selectionEnd=-t.moveEnd("character",-1e7)-i,this.m_text=n.value.replace(/\r\n/gm,"\n")):(this.m_selectionStart=n.selectionStart,this.m_selectionEnd=n.selectionEnd,this.m_text=n.value)},n.Duplicate=function(){var n=new f;return n.m_textarea=this.m_textarea,n.m_selectionEnd=this.m_selectionEnd,n.m_selectionStart=this.m_selectionStart,n.m_text=this.m_text,n},n.Apply=function(){var n,t;s?(this.m_textarea.value=this.m_text,this.m_textarea.focus(),n=this.m_textarea.createTextRange(),n.collapse(!0),n.moveEnd("character",this.m_selectionEnd),n.moveStart("character",this.m_selectionStart),n.select()):(t=this.m_textarea.scrollTop,this.m_textarea.value=this.m_text,this.m_textarea.focus(),this.m_textarea.setSelectionRange(this.m_selectionStart,this.m_selectionEnd),this.m_textarea.scrollTop=t)},n.ReplaceSelection=function(n){this.m_text=this.m_text.substr(0,this.m_selectionStart)+n+this.m_text.substr(this.m_selectionEnd),this.m_selectionEnd=this.m_selectionStart+n.length},n.ReplaceAt=function(n,t,i){this.m_text=this.m_text.substr(0,n)+i+this.m_text.substr(n+t),this.m_selectionStart=b(this.m_selectionStart,n,t,i.length),this.m_selectionEnd=b(this.m_selectionEnd,n,t,i.length)},n.getSelectedText=function(){return this.m_text.substr(this.m_selectionStart,this.m_selectionEnd-this.m_selectionStart)},n.InflateSelection=function(n,t){this.m_selectionEnd+=t,this.m_selectionStart-=n},n.PreceededBy=function(n){return this.m_selectionStart>=n.length&&this.m_text.substr(this.m_selectionStart-n.length,n.length)==n},n.FollowedBy=function(n){return this.m_text.substr(this.m_selectionEnd,n.length)==n},n.TrimSelection=function(){while(i(this.m_text.charAt(this.m_selectionStart)))this.m_selectionStart++;while(this.m_selectionEnd>this.m_selectionStart&&i(this.m_text.charAt(this.m_selectionEnd-1)))this.m_selectionEnd--},n.IsStartOfLine=function(n){return n==0||r(this.m_text.charAt(n-1))},n.FindStartOfLine=function(n){while(n>0&&!r(this.m_text.charAt(n-1)))n--;return n},n.FindEndOfLine=function(n){while(n<this.m_text.length&&!r(this.m_text.charAt(n)))n++;return n},n.FindNextLine=function(n){return this.SkipEol(this.FindEndOfLine(n))},n.SkipWhiteSpace=function(n){while(n<this.m_text.length&&i(this.m_text.charAt(n)))n++;return n},n.SkipEol=function(n){return this.m_text.substr(n,2)=="\r\n"?n+2:r(this.m_text.charAt(n))?n+1:n},n.SkipPreceedingEol=function(n){return n>2&&this.m_text.substr(n-2,2)=="\r\n"?n-2:n>1&&r(this.m_text.charAt(n-1))?n-1:n},n.SelectWholeLines=function(){this.m_selectionStart=this.FindStartOfLine(this.m_selectionStart),this.IsStartOfLine(this.m_selectionEnd)||(this.m_selectionEnd=this.SkipEol(this.FindEndOfLine(this.m_selectionEnd)))},n.SkipPreceedingWhiteSpace=function(n){while(n>0&&i(this.m_text.charAt(n-1)))n--;return n},n.SkipFollowingWhiteSpace=function(n){while(i(this.m_text.charAt(n)))n++;return n},n.SelectSurroundingWhiteSpace=function(){this.m_selectionStart=this.SkipPreceedingWhiteSpace(this.m_selectionStart),this.m_selectionEnd=this.SkipFollowingWhiteSpace(this.m_selectionEnd)},n.CheckSimpleSelection=function(){var t=this.getSelectedText(),n=t.match(/\n[ \t\r]*\n/);return n?(alert("Please make a selection that doesn't include a paragraph break"),!1):!0},n.IsBlankLine=function(n){for(var f=this.m_text.length,u,t=n;t<f;t++){if(u=this.m_text[t],r(u))return!0;if(!i(this.m_text.charAt(t)))return!1}return!0},n.FindStartOfParagraph=function(n){var i=n,t;if(n=this.FindStartOfLine(n),this.IsBlankLine(n))return n;while(n>0){if(t=this.FindStartOfLine(this.SkipPreceedingEol(n)),t==0)break;if(this.IsBlankLine(t))break;n=t}if(this.DetectListType(n).m_prefixLen!=0)for(n=this.FindStartOfLine(i);n>0;){if(this.DetectListType(n).m_prefixLen!=0)return n;n=this.FindStartOfLine(this.SkipPreceedingEol(n))}return n},n.FindEndOfParagraph=function(n){while(n<this.m_text.length){if(this.IsBlankLine(n))break;n=this.FindNextLine(n)}return n},n.SelectParagraph=function(){this.m_selectionStart=this.FindStartOfParagraph(this.m_selectionStart),this.m_selectionEnd=this.FindEndOfParagraph(this.m_selectionStart)},n.DetectListType=function(n){var i=this.m_text.substr(n,10),t=i.match(/^\s{0,3}(\*|\d+\.)(?:\ |\t)*/);return t?t[1]=="*"?{m_listType:"*",m_prefixLen:t[0].length}:{m_listType:"1",m_prefixLen:t[0].length}:{m_listType:"",m_prefixLen:0}},n=a.prototype,t=a.prototype,n.onKeyDown=function(n){var t=null,r=!0,i;if(n.ctrlKey||n.metaKey){if(i=String.fromCharCode(n.charCode||n.keyCode),!this.disableShortCutKeys&&p[i]!=undefined)return this.InvokeCommand(p[i]),v(n);switch(i){case"V":t=l;break;case"X":t=w}}else switch(n.keyCode){case g:if(this.disableTabHandling)t=l;else return this.InvokeCommand(n.shiftKey?"untab":"tab"),v(n);break;case ht:case rt:case nt:case ut:case tt:case ot:case d:case k:t=h;break;case ft:case it:t=w;break;case y:t=st;break;default:t=l}t!=null&&this.SetUndoMode(t),this.disableAutoIndent||n.keyCode==y&&(!s||n.ctrlKey)&&this.IndentNewLine()},n.SetUndoMode=function(n){this.m_undoMode!=n&&(this.m_undoMode=n,this.CaptureUndoState())},n.CaptureUndoState=function(){var n=new f;n.InitFromTextArea(this.m_textarea),this.m_undoStack.splice(this.m_undoPos,this.m_undoStack.length-this.m_undoPos,n),this.m_undoPos=this.m_undoStack.length},n.onMarkdownChanged=function(){var t=this.m_textarea.value,i;if(t!==this.m_lastContent||this.m_lastContent===null){if(this.onPreTransform)this.onPreTransform(this,t);if(i=this.Markdown.Transform(t),this.onPostTransform)this.onPostTransform(this,i);if(this.m_divHtml&&(this.m_divHtml.innerHTML=i),this.onPostUpdateDom)this.onPostUpdateDom(this);this.m_lastContent=t}},t.onOptionsChanged=function(){this.m_lastContent=null,this.onMarkdownChanged()},t.cmd_undo=function(){this.m_undoPos>0&&(this.m_undoPos==this.m_undoStack.length&&(this.CaptureUndoState(),this.m_undoPos--),this.m_undoPos--,this.m_undoStack[this.m_undoPos].Apply(),this.m_undoMode=c,this.onMarkdownChanged())},t.cmd_redo=function(){this.m_undoPos+1<this.m_undoStack.length&&(this.m_undoPos++,this.m_undoStack[this.m_undoPos].Apply(),this.m_undoMode=c,this.onMarkdownChanged(),this.m_undoPos==this.m_undoStack.length-1&&this.m_undoStack.pop())},n.setHeadingLevel=function(n,t){var i,f,r,u,s,e,h;if(n.SelectParagraph(),n.SelectSurroundingWhiteSpace(),i=n.getSelectedText(),i=o(i),f=0,r=i.match(/^(\#+)(.*?)(\#+)?$/),r?(i=o(r[2]),f=r[1].length):(r=i.match(/^(.*?)(?:\r\n|\n|\r)\s*(\-*|\=*)$/),r?(i=o(r[1]),f=r[2].charAt(0)=="="?1:0):(i=i.replace(/(\r\n|\n|\r)/gm,""),f=0)),t==-1&&(t=(f+1)%4),u=0,s=0,t==0){if(i=="Heading")return n.ReplaceSelection(""),!0;s=i.length,u=0}else{for(i==""&&(i="Heading"),u=t+1,s=i.length,e="",h=0;h<t;h++)e+="#";i=e+" "+i+" "+e}return i+="\n\n",n.m_selectionStart!=0&&(i="\n\n"+i,u+=2),n.ReplaceSelection(i),n.m_selectionStart+=u,n.m_selectionEnd=n.m_selectionStart+s,!0},t.cmd_heading=function(n){return this.setHeadingLevel(n,-1)},t.cmd_h0=function(n){return this.setHeadingLevel(n,0)},t.cmd_h1=function(n){return this.setHeadingLevel(n,1)},t.cmd_h2=function(n){return this.setHeadingLevel(n,2)},t.cmd_h3=function(n){return this.setHeadingLevel(n,3)},t.cmd_h4=function(n){return this.setHeadingLevel(n,4)},t.cmd_h5=function(n){return this.setHeadingLevel(n,5)},t.cmd_h6=function(n){return this.setHeadingLevel(n,6)},n.IndentCodeBlock=function(n,t){var r,e,f,h,i,s;for(n.SelectWholeLines(),r=n.getSelectedText().split("\n"),i=0;i<r.length;i++)if(r[i].charAt(0)=="\t"){for(e="",f=0;r[i].charAt(f)=="\t";)e+="    ",f++;h=e+r[i].substr(f),r.splice(i,1,h)}if(t===null){for(i=0;i<r.length;i++)if(o(r[i])!=""){if(r[i].charAt(0)=="\t"){for(e="",f=0;r[i].charAt(f)=="\t";)e+="    ",f++;h=e+r[i].substr(i),r.splice(i,1,h)}if(!u(r[i],"    "))break}t=i!=r.length}for(i=0;i<r.length;i++)o(r[i])!=""&&(s=r[i],t?s="    "+r[i]:u(r[i],"\t")?s=r[i].substr(1):u(r[i],"    ")&&(s=r[i].substr(4)),r.splice(i,1,s));n.ReplaceSelection(r.join("\n"))},t.cmd_code=function(n){if(n.m_selectionStart==n.m_selectionEnd){var t=n.FindStartOfLine(n.m_selectionStart);if(n.IsBlankLine(t))return n.SelectSurroundingWhiteSpace(),n.ReplaceSelection("\n\n    Code\n\n"),n.m_selectionStart+=6,n.m_selectionEnd=n.m_selectionStart+4,!0}return n.getSelectedText().indexOf("\n")<0?(n.TrimSelection(),n.PreceededBy("`")&&n.m_selectionStart--,n.FollowedBy("`")&&n.m_selectionEnd++,this.bold_or_italic(n,"`")):(this.IndentCodeBlock(n,null),!0)},t.cmd_tab=function(n){var i,t,r;if(n.getSelectedText().indexOf("\n")>0)this.IndentCodeBlock(n,!0);else{for(i=n.FindStartOfLine(n.m_selectionStart),t=i;t<n.m_selectionStart;t++)if(n.m_text.charAt(t)!=" ")break;t==n.m_selectionStart?(r=4-(t-i)%4,n.ReplaceSelection("    ".substr(0,r))):n.ReplaceSelection("\t"),n.m_selectionStart=n.m_selectionEnd}return!0},t.cmd_untab=function(n){return n.getSelectedText().indexOf("\n")>0?(this.IndentCodeBlock(n,!1),!0):!1},n.bold_or_italic=function(n,t){var f=n.m_text,r=t.length,i=n.getSelectedText();return u(i,t)&&et(i,t)?n.ReplaceSelection(i.substr(r,i.length-r*2)):(n.TrimSelection(),i=n.getSelectedText(),i=i?i.replace(/(\r\n|\n|\r)/gm,""):"text",n.ReplaceSelection(t+i+t),n.InflateSelection(-r,-r)),!0},t.cmd_bold=function(n){return n.CheckSimpleSelection()?(n.TrimSelection(),n.PreceededBy("**")&&(n.m_selectionStart-=2),n.FollowedBy("**")&&(n.m_selectionEnd+=2),this.bold_or_italic(n,"**")):!1},t.cmd_italic=function(n){return n.CheckSimpleSelection()?(n.TrimSelection(),(n.PreceededBy("*")&&!n.PreceededBy("**")||n.PreceededBy("***"))&&(n.m_selectionStart-=1),(n.FollowedBy("*")&&!n.PreceededBy("**")||n.FollowedBy("***"))&&(n.m_selectionEnd+=1),this.bold_or_italic(n,"*")):!1},n.indent_or_outdent=function(n,t){var r,i,f;if(!1&&n.m_selectionStart==n.m_selectionEnd)return n.SelectSurroundingWhiteSpace(),n.ReplaceSelection("\n\n> Quote\n\n"),n.m_selectionStart+=4,n.m_selectionEnd=n.m_selectionStart+5,!0;for(n.SelectWholeLines(),r=n.getSelectedText().split("\n"),i=0;i<r.length-1;i++)f=r[i],t?u(r[i],"> ")&&(f=r[i].substr(2)):f="> "+r[i],r.splice(i,1,f);return n.ReplaceSelection(r.join("\n")),!0},t.cmd_indent=function(n){return this.indent_or_outdent(n,!1)},t.cmd_outdent=function(n){return this.indent_or_outdent(n,!0)},n.handle_list=function(n,t){var f=[],c,u,h,r,o,i,e,l,s;if(n.getSelectedText().indexOf("\n")>0)for(n.SelectWholeLines(),u=n.m_selectionStart,f.push(u);;){if(u=n.FindNextLine(u),u>=n.m_selectionEnd)break;f.push(u)}else f.push(n.FindStartOfLine(n.m_selectionStart));for(c=t=="*"?"* ":"1. ",i=0;i<f.length;i++)if(e=n.DetectListType(f[i]),e.m_listType==t){c="";break}for(i=f.length-1;i>=0;i--)u=f[i],e=n.DetectListType(u),n.ReplaceAt(u,e.m_prefixLen,c);for(h=new MarkdownDeep.Markdown,h.ExtraMode=!0,r=h.GetListItems(n.m_text,n.m_selectionStart);r!=null;){for(o=0,i=0;i<r.length-1;i++){if(e=n.DetectListType(r[i]+o),e.m_listType!="1")break;l=(i+1).toString()+". ",n.ReplaceAt(r[i]+o,e.m_prefixLen,l),o+=l.length-e.m_prefixLen}s=h.GetListItems(n.m_text,r[r.length-1]+o),r=s!=null&&s[0]!=r[0]?s:null}return f.length>1&&n.SelectWholeLines(),!0},t.cmd_ullist=function(n){return this.handle_list(n,"*")},t.cmd_ollist=function(n){return this.handle_list(n,"1")},t.cmd_link=function(n){var i,t,r;return(n.TrimSelection(),!n.CheckSimpleSelection())?!1:(i=prompt("Enter the target URL:"),i===null)?!1:(t=n.getSelectedText(),t.length==0&&(t="link text"),r="["+t+"]("+i+")",n.ReplaceSelection(r),n.m_selectionStart++,n.m_selectionEnd=n.m_selectionStart+t.length,!0)},t.cmd_img=function(n){var i,t,r;return(n.TrimSelection(),!n.CheckSimpleSelection())?!1:(i=prompt("Enter the image URL"),i===null)?!1:(t=n.getSelectedText(),t.length==0&&(t="Image Text"),r="!["+t+"]("+i+")",n.ReplaceSelection(r),n.m_selectionStart+=2,n.m_selectionEnd=n.m_selectionStart+t.length,!0)},t.cmd_hr=function(n){return n.SelectSurroundingWhiteSpace(),n.m_selectionStart==0?n.ReplaceSelection("----------\n\n"):n.ReplaceSelection("\n\n----------\n\n"),n.m_selectionStart=n.m_selectionEnd,!0},t.IndentNewLine=function(){var i=this,n,t=function(){var t,u,r,e;for(window.clearInterval(n),t=new f,t.InitFromTextArea(i.m_textarea),u=t.FindStartOfLine(t.SkipPreceedingEol(t.m_selectionStart)),r=u;;){if(e=t.m_text.charAt(r),e!=" "&&e!="\t")break;r++}r>u&&(t.ReplaceSelection(t.m_text.substr(u,r-u)),t.m_selectionStart=t.m_selectionEnd),t.Apply()};return n=window.setInterval(t,1),!1},t.cmd_indented_newline=function(n){var i,t,r;for(n.ReplaceSelection("\n"),n.m_selectionStart=n.m_selectionEnd,i=n.FindStartOfLine(n.SkipPreceedingEol(n.m_selectionStart)),t=i;;){if(r=n.m_text.charAt(t),r!=" "&&r!="\t")break;t++}return t>i&&(n.ReplaceSelection(n.m_text.substr(i,t-i)),n.m_selectionStart=n.m_selectionEnd),!0},t.InvokeCommand=function(n){var t,i;if(n=="undo"||n=="redo"){this["cmd_"+n](),this.m_textarea.focus();return}return t=new f,t.InitFromTextArea(this.m_textarea),i=t.Duplicate(),this["cmd_"+n](t)?(this.m_undoMode=c,this.m_undoStack.splice(this.m_undoPos,this.m_undoStack.length-this.m_undoPos,i),this.m_undoPos++,t.Apply(),this.onMarkdownChanged(),!0):(this.m_textarea.focus(),!1)},delete n,delete t,this.Editor=a},CodeMirror=function(){function t(o,y){function po(n){return ti&&(l&&n==229||window.opera&&n==197)||p&&l}function vu(n){return n>=0&&n<at.size}function ni(n){return ii(at,n)}function eu(n,t){var r,i;for(sr=!0,r=t-n.height,i=n;i;i=i.parent)i.height+=r}function ho(n){var t={line:0,ch:0};ie(t,{line:at.size-1,ch:ni(at.size-1).text.length},f(n),t,t),di=!0}function bo(){var t=[];return at.iter(0,at.size,function(n){t.push(n.text)}),t.join("\n")}function rs(t){function v(n){var t=gr(n,!0),i;t&&!r(t,c)&&(tr||nu(),c=t,pr(f,t),di=!1,i=ke(),(t.line>=i.to||t.line<i.from)&&(h=setTimeout(fi(function(){v(n)}),150)))}for(var f,o,c,h,a,s,e=ct(t);e!=ci;e=e.parentNode)if(e.parentNode==ki&&e!=du)return;for(e=ct(t);e!=ci;e=e.parentNode)if(e.parentNode==hu){if(rt.onGutterClick)rt.onGutterClick(wi,b(hu.childNodes,e)+ai,t);return i(t)}f=gr(t);switch(ei(t)){case 3:l&&!p&&he(t);return;case 2:f&&yr(f.line,f.ch,!0);return}if(!f){ct(t)==kt&&i(t);return}if(tr||nu(),o=+new Date,fu&&fu.time>o-400&&r(fu.pos,f))return i(t),setTimeout(wr,20),bs(f.line);if(ef&&ef.time>o-400&&r(ef.pos,f))return fu={time:o,pos:f},i(t),co(f);if(ef={time:o,pos:f},c=f,ri&&!r(w.from,w.to)&&!u(f,w.from)&&!u(w.to,f)){tt&&(li.draggable=!0),s=n(vr,"mouseup",fi(function(n){tt&&(li.draggable=!1),wf=!1,s(),Math.abs(t.clientX-n.clientX)+Math.abs(t.clientY-n.clientY)<10&&(i(n),yr(f.line,f.ch,!0),wr())}),!0),wf=!0;return}i(t),yr(f.line,f.ch,!0),a=n(vr,"mousemove",fi(function(n){clearTimeout(h),i(n),v(n)}),!0),s=n(vr,"mouseup",fi(function(n){clearTimeout(h);var t=gr(n);t&&pr(f,t),i(n),wr(),di=!0,a(),s()}),!0)}function ts(n){for(var r,t=ct(n);t!=ci;t=t.parentNode)if(t.parentNode==hu)return i(n);(r=gr(n),r)&&(fu={time:+new Date,pos:r},i(n),co(r))}function ns(n){var t,u,r,i;if(n.preventDefault(),t=gr(n,!0),u=n.dataTransfer.files,t&&!rt.readOnly)if(u&&u.length&&window.FileReader&&window.File){function c(n,r){var u=new FileReader;u.onload=function(){i[r]=u.result,++h==f&&(t=hi(t),fi(function(){var n=ar(i.join(""),t,t);pr(t,n)})())},u.readAsText(n)}var f=u.length,i=Array(f),h=0;for(r=0;r<f;++r)c(u[r],r)}else try{if(i=n.dataTransfer.getData("Text"),i){var s=ar(i,t,t),e=w.from,o=w.to;pr(t,s),wf&&ar("",e,o),wr()}}catch(n){}}function yo(n){var t=te();d(t),n.dataTransfer.setDragImage(s,0,0),n.dataTransfer.setData("Text",t)}function us(n){var t,r,f,u;if(tr||nu(),t=n.keyCode,nt&&t==27&&(n.returnValue=!1),r=(p?n.metaKey:n.ctrlKey)&&!n.altKey,f=n.ctrlKey||n.altKey||n.metaKey,nr=t==16||n.shiftKey?nr||(w.inverted?w.to:w.from):null,!rt.onKeyEvent||!rt.onKeyEvent(wi,bt(n))){if(t==33||t==34)return ss(t==34),i(n);if(r&&(t==36||t==35||p&&(t==38||t==40)))return hs(t==36||t==38),i(n);if(r&&t==65)return as(),i(n);if(!rt.readOnly){if(!f&&t==13)return;if(!f&&t==9&&cs(n.shiftKey))return i(n);if(r&&t==90)return to(),i(n);if(r&&(n.shiftKey&&t==90||t==89))return fo(),i(n)}if(t==36&&rt.smartHome)return vs(),i(n);uu=(r?"c":"")+(n.altKey?"a":"")+t,w.inverted&&c[uu]===!0&&(u=it(oi),u&&(kr={anchor:u.start},h(oi,u.start,u.start))),r||n.altKey||(uu=null),br(uu),rt.pollForIME&&po(t)&&(tu=50)}}function fs(n){rt.onKeyEvent&&rt.onKeyEvent(wi,bt(n))||(kr&&(kr=null,di=!0),n.keyCode==16&&(nr=null),tu<2e3&&!vf&&(tu=2e3))}function is(n){var r,t;rt.onKeyEvent&&rt.onKeyEvent(wi,bt(n))||(rt.electricChars&&vi.electricChars&&(r=String.fromCharCode(n.charCode==null?n.keyCode:n.charCode),vi.electricChars.indexOf(r)>-1&&setTimeout(fi(function(){iu(w.to.line,"smart")}),50)),t=n.keyCode,t==13?(rt.readOnly||ls(),i(n)):n.ctrlKey||n.altKey||n.metaKey||t!=9||rt.tabMode=="default"?br(uu):i(n))}function nu(){if(rt.readOnly!="nocursor"){if(!tr){if(rt.onFocus)rt.onFocus(wi);tr=!0,ci.className.search(/\bCodeMirror-focused\b/)==-1&&(ci.className+=" CodeMirror-focused"),yu||ue()}tf(),pe()}}function eo(){if(tr){if(rt.onBlur)rt.onBlur(wi);tr=!1,ci.className=ci.className.replace(" CodeMirror-focused","")}clearInterval(ne),setTimeout(function(){tr||(nr=null)},150)}function ie(n,t,i,r,u){if(rr){var f=[];for(at.iter(n.line,t.line+1,function(n){f.push(n.text)}),rr.addChange(n.line,i.length,f);rr.done.length>rt.undoDepth;)rr.done.shift()}uo(n,t,i,r,u)}function oo(n,t){var i=n.pop(),r,u,f;i&&(r=[],u=i.start+i.added,at.iter(i.start,u,function(n){r.push(n.text)}),t.push({start:i.start,added:i.old.length,old:r}),f=hi({line:i.start+i.old.length-1,ch:ui(r[r.length-1],i.old[i.old.length-1])}),uo({line:i.start,ch:0},{line:u-1,ch:ni(u-1).text.length},i.old,f,f),di=!0)}function to(){oo(rr.done,rr.undone)}function fo(){oo(rr.undone,rr.done)}function uo(n,t,i,r,u){function d(n){return n<=Math.min(t.line,t.line+l)?n:n+l}var k=!1,c=hr.length,h,p,g,a,l,f,nt,v,b;rt.lineWrapping||at.iter(n.line,t.line,function(n){if(n.text.length==c)return k=!0,!0});var y=t.line-n.line,o=ni(n.line),s=ni(t.line);if(o==s)if(i.length==1)o.replace(n.ch,t.ch,i[0]);else{for(s=o.split(t.ch,i[i.length-1]),o.replace(n.ch,null,i[0]),o.fixMarkEnds(s),h=[],f=1,p=i.length-1;f<p;++f)h.push(e.inheritMarks(i[f],o));h.push(s),at.insert(n.line+1,h)}else if(i.length==1)o.replace(n.ch,null,i[0]),s.replace(null,t.ch,""),o.append(s),at.remove(n.line+1,y);else{for(h=[],o.replace(n.ch,null,i[0]),s.replace(null,t.ch,i[i.length-1]),o.fixMarkEnds(s),f=1,p=i.length-1;f<p;++f)h.push(e.inheritMarks(i[f],o));y>1&&at.remove(n.line+1,y-1),at.insert(n.line+1,h)}for(rt.lineWrapping?(g=kt.clientWidth/wu()-3,at.iter(n.line,n.line+i.length,function(n){if(!n.hidden){var t=Math.ceil(n.text.length/g)||1;t!=n.height&&eu(n,t)}})):(at.iter(n.line,f+i.length,function(n){var t=n.text;t.length>c&&(hr=t,c=t.length,cr=null,k=!1)}),k&&(c=0,hr="",cr=null,at.iter(0,at.size,function(n){var t=n.text;t.length>c&&(c=t.length,hr=t)}))),a=[],l=i.length-y-1,f=0,nt=er.length;f<nt;++f)v=er[f],v<n.line?a.push(v):v>t.line&&a.push(v+l);b=n.line+Math.min(i.length,500),ko(n.line,b),a.push(b),er=a,df(100),yi.push({from:n.line,to:t.line+1,diff:l}),kf={from:n,to:t,text:i},dr(r,u,d(w.from.line),d(w.to.line)),ki.style.height=at.height*fr()+2*lu()+"px"}function ar(n,t,i){function e(f){if(u(f,t))return f;if(!u(i,f))return r;var o=f.line+n.length-(i.line-t.line)-1,e=f.ch;return f.line==i.line&&(e+=n[n.length-1].length-(i.ch-(i.line==t.line?t.ch:0))),{line:o,ch:e}}t=hi(t),i=i?hi(i):t,n=f(n);var r;return ro(n,t,i,function(n){return r=n,{from:e(w.from),to:e(w.to)}}),r}function pu(n,t){ro(f(n),w.from,w.to,function(n){return t=="end"?{from:n,to:n}:t=="start"?{from:w.from,to:w.from}:{from:w.from,to:n}})}function ro(n,t,i,r){var f=n.length==1?n[0].length+t.ch:n[n.length-1].length,u=r({line:t.line+n.length-1,ch:f});ie(t,i,n,u.from,u.to)}function so(n,t){var r=n.line,u=t.line,i;return r==u?ni(r).text.slice(n.ch,t.ch):(i=[ni(r).text.slice(n.ch)],at.iter(r+1,u,function(n){i.push(n.text)}),i.push(ni(u).text.slice(0,t.ch)),i.join("\n"))}function te(){return so(w.from,w.to)}function tf(){nf||gf.set(tu,function(){cf(),vo(),tr&&tf(),af()})}function br(n){function t(){cf();var r=vo();r&&n&&(r=="moved"&&c[n]==null&&(c[n]=!0),r=="changed"&&(c[n]=!1)),r||i?(nf=!1,tf()):(i=!0,gf.set(80,t)),af()}var i=!1;nf=!0,gf.set(20,t)}function vo(){function d(n,t){for(var u=0,i;;){if(i=r.indexOf("\n",u),i==-1||(r.charAt(i-1)=="\r"?i-1:i)>=n)return{line:t,ch:n-u};++t,u=i+1}}var n,e,v,p,h,k;if(!yu&&tr){var y=!1,r=oi.value,i=it(oi);if(!i)return!1;var y=pi.text!=r,l=kr,g=y||i.start!=pi.start||i.end!=(l?pi.start:pi.end);if(!g&&!l)return!1;if(y&&(nr=kr=null,rt.readOnly))return di=!0,"changed";if(n=d(i.start,pi.from),e=d(i.end,pi.from),l&&(v=i.start==l.anchor?e:n,p=nr?w.to:i.start==l.anchor?n:e,(w.inverted=u(v,p))?(n=v,e=p):(kr=null,n=p,e=v)),n.line!=e.line||n.line!=w.from.line||n.line!=w.to.line||nr||(di=!1),y){for(var t=0,s=r.length,nt=Math.min(s,pi.text.length),c,a=pi.from,h=-1;t<nt&&(c=r.charAt(t))==pi.text.charAt(t);)++t,c=="\n"&&(a++,h=t);for(var tt=h>-1?t-h:t,b=pi.to-1,o=pi.text.length;;){if(c=pi.text.charAt(o),r.charAt(s)!=c){++s,++o;break}if(c=="\n"&&b--,o<=t||s<=t)break;--s,--o}h=pi.text.lastIndexOf("\n",o-1),k=h==-1?o:o-h-1,ie({line:a,ch:tt},{line:b,ch:k},f(r.slice(t,s)),n,e),(a!=b||n.line!=a)&&(di=!0)}else dr(n,e);return pi.text=r,pi.start=i.start,pi.end=i.end,y?"changed":g?"moved":!1}}function ue(){var i=[],r=Math.max(0,w.from.line-1),u=Math.min(at.size,w.to.line+2),n,t;at.iter(r,u,function(n){i.push(n.text)}),i=oi.value=i.join(g),n=w.from.ch,t=w.to.ch,at.iter(r,w.from.line,function(t){n+=g.length+t.text.length}),at.iter(r,w.to.line,function(n){t+=g.length+n.text.length}),pi={text:i,from:r,to:u,start:n,end:t},h(oi,n,kr?n:t)}function wr(){rt.readOnly!="nocursor"&&oi.focus()}function ks(){if(ur.getBoundingClientRect){var n=ur.getBoundingClientRect(),t=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(n.top<0||n.bottom>t)&&ur.scrollIntoView()}}function ge(){var n=rf(w.inverted?w.from:w.to),t=rt.lineWrapping?Math.min(n.x,li.offsetWidth):n.x;return de(t,n.y,t,n.yBot)}function de(n,t,i,r){var c=re(),h=lu(),l=fr();t+=h,r+=h,n+=c,i+=c;var v=kt.clientHeight,a=kt.scrollTop,u=!1,f=!0;t<a?(kt.scrollTop=Math.max(0,t-2*l),u=!0):r>a+v&&(kt.scrollTop=r+l-v,u=!0);var s=kt.clientWidth,o=kt.scrollLeft,e=rt.fixedGutter?bi.clientWidth:0;if(n<o+e?(n<50&&(n=0),kt.scrollLeft=Math.max(0,n-10-e),u=!0):i>s+o&&(kt.scrollLeft=i+10-s,u=!0,i>ki.clientWidth&&(f=!1)),u&&rt.onScroll)rt.onScroll(wi);return f}function ke(){var t=fr(),n=kt.scrollTop-lu(),r=Math.max(0,Math.floor(n/t)),i=Math.ceil((n+kt.clientHeight)/t);return{from:vt(at,r),to:vt(at,i)}}function ku(n){var e,t,r,u,c,f,i,o,l,h,s;if(!kt.clientWidth){ai=gi=ru=0;return}if(e=ke(),n===!0||n.length!=0||!(e.from>=ai)||!(e.to<=gi)){for(t=Math.max(e.from-100,0),r=Math.min(at.size,e.to+100),ai<t&&t-ai<20&&(t=ai),gi>r&&gi-r<20&&(r=Math.min(at.size,gi)),u=n===!0?[]:ps([{from:ai,to:gi,domStart:0}],n),c=0,f=0;f<u.length;++f)i=u[f],i.from<t&&(i.domStart+=t-i.from,i.from=t),i.to>r&&(i.to=r),i.from>=i.to?u.splice(f--,1):c+=i.to-i.from;if(c!=r-t){if(u.sort(function(n,t){return n.domStart-t.domStart}),o=fr(),l=bi.style.display,ir.style.display=bi.style.display="none",ws(t,r,u),ir.style.display="",h=t!=ai||r!=gi||ao!=kt.clientHeight,h&&(ao=kt.clientHeight),ai=t,gi=r,ru=lt(at,t),du.style.top=ru*o+"px",ki.style.height=at.height*o+2*lu()+"px",ir.childNodes.length!=gi-ai)throw new Error("BAD PATCH! "+JSON.stringify(u)+" size="+(gi-ai)+" nodes="+ir.childNodes.length);rt.lineWrapping?(cr=kt.clientWidth,s=ir.firstChild,at.iter(ai,gi,function(n){if(!n.hidden){var t=Math.round(s.offsetHeight/o)||1;n.height!=t&&(eu(n,t),sr=!0)}s=s.nextSibling})):(cr==null&&(cr=sf(hr)),cr>kt.clientWidth?(li.style.width=cr+"px",ki.style.width="",ki.style.width=kt.scrollWidth+"px"):li.style.width=ki.style.width=""),bi.style.display=l,(h||sr)&&io(),no()}}}function ps(n,t){for(var f,h,i,o=0,s=t.length||0;o<s;++o){var r=t[o],u=[],e=r.diff||0;for(f=0,h=n.length;f<h;++f)i=n[f],r.to<=i.from&&r.diff?u.push({from:i.from+e,to:i.to+e,domStart:i.domStart}):r.to<=i.from||r.from>=i.to?u.push(i):(r.from>i.from&&u.push({from:i.from,to:r.from,domStart:i.domStart}),r.to<i.to&&u.push({from:r.to+e,to:i.to+e,domStart:i.domStart+(r.to-i.from)}));n=u}return n}function ws(n,t,i){var s,r,b,o,e,u,v;if(i.length){function y(n){var t=n.nextSibling;return n.parentNode.removeChild(n),t}for(s=0,r=ir.firstChild,o=0;o<i.length;++o){for(e=i[o];e.domStart>s;)r=y(r),s++;for(u=0,v=e.to-e.from;u<v;++u)r=r.nextSibling,s++}while(r)r=y(r)}else ir.innerHTML="";var f=i.shift(),r=ir.firstChild,u=n,a=w.from.line,c=w.to.line,h=a<n&&c>=n,l=vr.createElement("div"),p;at.iter(n,t,function(n){var t=null,e=null;h?(t=0,c==u&&(h=!1,e=w.to.ch)):a==u&&(c==u?(t=w.from.ch,e=w.to.ch):(h=!0,t=w.from.ch)),f&&f.to==u&&(f=i.shift()),!f||f.from>u?(l.innerHTML=n.hidden?"<pre></pre>":n.getHTML(t,e,!0),ir.insertBefore(l.firstChild,r)):r=r.nextSibling,++u})}function io(){var r,u,n,f;if(rt.gutter||rt.lineNumbers){r=du.offsetHeight,u=kt.clientHeight,bi.style.height=(r-u<2?u:r)+"px",n=[],f=ai,at.iter(ai,Math.max(gi,ai+1),function(t){var r,i,u;if(t.hidden)n.push("<pre></pre>");else{for(r=t.gutterMarker,i=rt.lineNumbers?f+rt.firstLineNumber:null,r&&r.text?i=r.text.replace("%N%",i!=null?i:""):i==null&&(i=" "),n.push(r&&r.style?'<pre class="'+r.style+'">':"<pre>",i),u=1;u<t.height;++u)n.push("<br>&nbsp;");n.push("</pre>")}++f}),bi.style.display="none",hu.innerHTML=n.join("");for(var e=String(at.size).length,i=hu.firstChild,o=si(i),t="";o.length+t.length<e;)t+=" ";t&&i.insertBefore(vr.createTextNode(t),i.firstChild),bi.style.display="",li.style.marginLeft=bi.offsetWidth+"px",sr=!1}}function no(){var i=w.inverted?w.from:w.to,u=fr(),n=rf(i,!0),t=n.y+ru*fr();cu.style.top=Math.max(Math.min(t,kt.offsetHeight),0)+"px",cu.style.left=n.x-kt.scrollLeft+"px",r(w.from,w.to)?(ur.style.top=n.y+"px",ur.style.left=(rt.lineWrapping?Math.min(n.x,li.offsetWidth):n.x)+"px",ur.style.display=""):ur.style.display="none"}function pr(n,t){var i=nr&&hi(nr);i&&(u(i,n)?n=i:u(t,i)&&(t=i)),dr(n,t)}function dr(n,t,i,f){if(i==null&&(i=w.from.line,f=w.to.line),!r(w.from,n)||!r(w.to,t)){if(u(t,n)){var e=t;t=n,n=e}n.line!=i&&(n=gu(n,i,w.from.ch)),t.line!=f&&(t=gu(t,f,w.to.ch)),r(n,t)?w.inverted=!1:r(n,w.to)?w.inverted=!1:r(t,w.from)&&(w.inverted=!0),r(n,t)?r(w.from,w.to)||yi.push({from:i,to:f+1}):r(w.from,w.to)?yi.push({from:n.line,to:t.line+1}):(r(n,w.from)||(n.line<i?yi.push({from:n.line,to:Math.min(t.line,i)+1}):yi.push({from:i,to:Math.min(f,n.line)+1})),r(t,w.to)||(t.line<f?yi.push({from:Math.max(i,n.line),to:f+1}):yi.push({from:Math.max(n.line,f),to:t.line+1}))),w.from=n,w.to=t,lr=!0}}function gu(n,t,i){function r(t){for(var f=n.line+t,e=t==1?at.size:-1,u,r;f!=e;){if(u=ni(f),!u.hidden)return r=n.ch,(r>i||r>u.text.length)&&(r=u.text.length),{line:f,ch:r};f+=t}}var u=ni(n.line);return u.hidden?n.line>=t?r(1)||r(-1):r(-1)||r(1):n}function yr(n,t,i){var r=hi({line:n,ch:t||0});(i?pr:dr)(r,r)}function bu(n){return Math.max(0,Math.min(n,at.size-1))}function hi(n){if(n.line<0)return{line:0,ch:0};if(n.line>=at.size)return{line:at.size-1,ch:ni(at.size-1).text.length};var t=n.ch,i=ni(n.line).text.length;return t==null||t>i?{line:n.line,ch:i}:t<0?{line:n.line,ch:0}:n}function ss(n){var r=Math.floor(kt.clientHeight/fr()),t=w.inverted?w.from:w.to,i=lt(at,t.line)+Math.max(r-1,1)*(n?1:-1);yr(vt(at,i),t.ch,!0)}function hs(n){var t=n?{line:0,ch:0}:{line:at.size-1,ch:ni(at.size-1).text.length};pr(t,t)}function as(){var n=at.size-1;dr({line:0,ch:0},{line:n,ch:ni(n).text.length})}function co(n){for(var r=ni(n.line).text,t=n.ch,i=n.ch;t>0&&/\w/.test(r.charAt(t-1));)--t;while(i<r.length&&/\w/.test(r.charAt(i)))++i;pr({line:n.line,ch:t},{line:n.line,ch:i})}function bs(n){pr({line:n,ch:0},{line:n,ch:ni(n).text.length})}function ls(){pu("\n","end"),rt.enterMode!="flat"&&iu(w.from.line,rt.enterMode=="keep"?"prev":"smart")}function cs(n){function t(n){var i,t;if(r(w.from,w.to))return iu(w.from.line,n);for(i=w.to.line-(w.to.ch?0:1),t=w.from.line;t<=i;++t)iu(t,n)}nr=null;switch(rt.tabMode){case"default":return!1;case"indent":t("smart");break;case"classic":if(r(w.from,w.to)){n?iu(w.from.line,"smart"):pu("\t","end");break}case"shift":t(n?"subtract":"add")}return!0}function vs(){var n=Math.max(0,ni(w.from.line).text.search(/\S/));yr(w.from.line,w.from.ch<=n&&w.from.ch?0:n,!0)}function iu(n,t){var h,c,r,u,f;t=="smart"&&(vi.indent?h=ff(n):t="prev");var o=ni(n),e=o.indentation(),s=o.text.match(/^\s*/)[0],i;if(t=="prev"?i=n?ni(n-1).indentation():0:t=="smart"?i=vi.indent(h,o.text.slice(s.length)):t=="add"?i=e+rt.indentUnit:t=="subtract"&&(i=e-rt.indentUnit),i=Math.max(0,i),c=i-e,c){if(r="",u=0,rt.indentWithTabs)for(f=Math.floor(i/ut);f;--f)u+=ut,r+="\t";while(u<i)++u,r+=" "}else{if(w.from.line!=n&&w.to.line!=n)return;r=s}ar(r,{line:n,ch:0},{line:n,ch:s.length})}function se(){vi=t.getMode(rt,rt.mode),at.iter(0,at.size,function(n){n.stateAfter=null}),er=[0],df()}function os(){var n=rt.gutter||rt.lineNumbers;bi.style.display=n?"":"none",n?sr=!0:ir.parentNode.style.marginLeft=0}function es(){if(rt.lineWrapping){ci.className+=" CodeMirror-wrap";var i=kt.clientWidth/wu()-3;at.iter(0,at.size,function(n){if(!n.hidden){var t=Math.ceil(n.text.length/i)||1;t!=1&&eu(n,t)}}),li.style.width=ki.style.width=""}else ci.className=ci.className.replace(" CodeMirror-wrap",""),cr=null,hr="",at.iter(0,at.size,function(n){n.height==1||n.hidden||eu(n,1),n.text.length>hr.length&&(hr=n.text)});yi.push({from:0,to:at.size})}function bf(){this.set=[]}function pf(n,t,i){function r(n,t,i,r){mark=ni(n).addMark(new ft(t,i,r,f.set))}var f,u,e;if(n=hi(n),t=hi(t),f=new bf,n.line==t.line)r(n.line,n.ch,t.ch,i);else{for(r(n.line,n.ch,null,i),u=n.line+1,e=t.line;u<e;++u)r(u,null,null,i);r(t.line,null,t.ch,i)}return yi.push({from:n.line,to:t.line+1}),f}function ys(n){n=hi(n);var t=new gt(n.ch);return ni(n.line).addMark(t),t}function gs(n,t,i){return typeof n=="number"&&(n=ni(bu(n))),n.gutterMarker={text:t,style:i},sr=!0,n}function ds(n){typeof n=="number"&&(n=ni(bu(n))),n.gutterMarker=null,sr=!0}function be(n,t){var i=n,r=n;return(typeof n=="number"?r=ni(bu(n)):i=st(n),i==null)?null:(t(r,i)&&yi.push({from:i,to:i+1}),r)}function th(n,t){return be(n,function(n){if(n.className!=t)return n.className=t,!0})}function we(n,t){return be(n,function(n,i){if(n.hidden!=t)return n.hidden=t,eu(n,t?0:1),t&&(w.from.line==i||w.to.line==i)&&dr(gu(w.from,w.from.line,w.from.ch),gu(w.to,w.to.line,w.to.ch)),sr=!0})}function nh(n){var i,t;if(typeof n=="number"){if(!vu(n)||(i=n,n=ni(n),!n))return null}else if(i=st(n),i==null)return null;return t=n.gutterMarker,{line:i,handle:n,text:n.text,markerText:t&&t.text,markerClass:t&&t.style,lineClass:n.className}}function sf(n){return or.innerHTML="<pre><span>x</span></pre>",or.firstChild.firstChild.firstChild.nodeValue=n,or.firstChild.firstChild.offsetWidth||10}function ce(n,t){var e="",u,r;rt.lineWrapping&&(u=n.text.indexOf(" ",t+2),e=n.text.slice(t+1,u<0?n.text.length:u+(nt?5:0))),or.innerHTML="<pre>"+n.getHTML(null,null,!1,t)+'<span id="CodeMirror-temp-'+hf+'">'+(n.text.charAt(t)||" ")+"</span>"+e+"</pre>";var i=document.getElementById("CodeMirror-temp-"+hf),f=i.offsetTop,o=i.offsetLeft;return nt&&t&&f==0&&o==0&&(r=document.createElement("span"),r.innerHTML="x",i.parentNode.insertBefore(r,i.nextSibling),f=r.offsetTop),{top:f,left:o}}function rf(n,t){var u,f=fr(),i=f*(lt(at,n.line)-(t?ru:0)),r;return n.ch==0?u=0:(r=ce(ni(n.line),n.ch),u=r.left,rt.lineWrapping&&(i+=Math.max(0,r.top))),{x:u,y:i,yBot:i+f}}function ee(n,t){function a(n){var t=ce(v,n),i;return w?(i=Math.round(t.top/y),Math.max(0,t.left+(i-l)*kt.clientWidth)):t.left}var f,s,h;t<0&&(t=0);var y=fr(),b=wu(),p=ru+Math.floor(t/y),u=vt(at,p);if(u>=at.size)return{line:at.size-1,ch:0};var v=ni(u),k=v.text,w=rt.lineWrapping,l=w?p-lt(at,u):0;if(n<=0&&l==0)return{line:u,ch:0};for(var e=0,c=0,i=k.length,o,r=Math.min(i,Math.ceil((n+l*kt.clientWidth*.9)/b));;)if(f=a(r),f<=n&&r<i)r=Math.min(i,Math.ceil(r*1.2));else{o=f,i=r;break}if(n>o)return{line:u,ch:i};for(r=Math.floor(i*.8),f=a(r),f<n&&(e=r,c=f);;){if(i-e<=1)return{line:u,ch:o-n>n-c?e:i};s=Math.ceil((e+i)/2),h=a(s),h>n?(i=s,o=h):(e=s,c=h)}}function ae(n){var i=rf(n,!0),t=v(li);return{x:t.left+i.x,y:t.top+i.y,yBot:t.top+i.yBot}}function fr(){var n=ir.offsetHeight;return n==ou?ve:(ou=n,or.innerHTML="<pre>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x<br>x</pre>",ve=or.firstChild.offsetHeight/10||1)}function wu(){return kt.clientWidth==ou?oe:(ou=kt.clientWidth,oe=sf("x"))}function lu(){return li.offsetTop}function re(){return li.offsetLeft}function gr(n,t){var f=v(kt,!0),r,i,u;try{r=n.clientX,i=n.clientY}catch(n){return null}return!t&&(r-f.left>kt.clientWidth||i-f.top>kt.clientHeight)?null:(u=v(li,!0),ee(r-u.left,i-u.top))}function he(t){function e(){var n=f(oi.value).join("\n");n!=c&&fi(pu)(n,"end"),cu.style.position="relative",oi.style.cssText=s,yu=!1,ue(),tf()}var i=gr(t),s,c,o;i&&!window.opera&&((r(w.from,w.to)||u(i,w.from)||!u(i,w.to))&&fi(yr)(i.line,i.ch),s=oi.style.cssText,cu.style.position="absolute",oi.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",yu=!0,c=oi.value=te(),wr(),h(oi,0,oi.value.length),l?(ot(t),o=n(window,"mouseup",function(){o(),setTimeout(e,20)},!0)):setTimeout(e,50))}function pe(){clearInterval(ne);var n=!0;ur.style.visibility="",ne=setInterval(function(){ur.style.visibility=(n=!n)?"":"hidden"},650)}function ye(n){function g(n,t,r){var e,u,v,f,y,c,l,p,a;if(n.text)for(e=n.styles,u=i?0:n.text.length-1,f=i?0:e.length-2,y=i?e.length:-2;f!=y;f+=2*o){if(c=e[f],e[f+1]!=null&&e[f+1]!=h){u+=o*c.length;continue}for(l=i?0:c.length-1,p=i?c.length:-1;l!=p;l+=o,u+=o)if(u>=t&&u<r&&b.test(v=c.charAt(l)))if(a=of[v],a.charAt(1)==">"==i)s.push(v);else{if(s.pop()!=a.charAt(0))return{pos:u,match:!1};if(!s.length)return{pos:u,match:!0}}}}var f=w.inverted?w.from:w.to,e=ni(f.line),r=f.ch-1,a=r>=0&&of[e.text.charAt(r)]||of[e.text.charAt(++r)],h,s,b,t,c;if(a){for(var nt=a.charAt(0),i=a.charAt(1)==">",o=i?1:-1,l=e.styles,k=r+1,t=0,c=l.length;t<c;t+=2)if((k-=l[t].length)<=0){h=l[t+1];break}for(s=[e.text.charAt(r)],b=/[(){}[\]]/,t=f.line,c=i?Math.min(t+100,at.size):Math.max(-1,t-100);t!=c;t+=o){var e=ni(t),v=t==f.line,u=g(e,v&&i?r+1:0,v&&!i?r:e.text.length);if(u)break}u||(u={pos:null,match:!1});var h=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",d=pf({line:f.line,ch:r},{line:f.line,ch:r+1},h),p=u.pos!=null&&pf({line:t,ch:u.pos},{line:t,ch:u.pos+1},h),y=fi(function(){d.clear(),p&&p.clear()});n?setTimeout(y,800):uf=y}}function le(n){for(var e,u,r,i,t=n,f=n-40;t>f;--t){if(t==0)return 0;if(r=ni(t-1),r.stateAfter)return t;i=r.indentation(),(u==null||e>i)&&(u=t-1,e=i)}return u}function ff(n){var i=le(n),t=i&&ni(i-1).stateAfter;return t=t?a(vi,t):wt(vi),at.iter(i,n,function(n){n.highlight(vi,t),n.stateAfter=a(vi,t)}),i<n&&yi.push({from:i,to:n}),n<at.size&&!ni(n).stateAfter&&er.push(n),t}function ko(n,t){var i=ff(n);at.iter(n,t,function(n){n.highlight(vi,i),n.stateAfter=a(vi,i)})}function go(){for(var s=+new Date+rt.workTime,h=er.length,t,r,n;er.length;)if(t=ni(ai).stateAfter?er.pop():ai,!(t>=at.size)){r=le(t),n=r&&ni(r-1).stateAfter,n=n?a(vi,n):wt(vi);var o=0,f=vi.compareStates,u=!1,i=r,e=!1;if(at.iter(i,at.size,function(r){var c=r.stateAfter,h;if(+new Date>s)return er.push(i),df(rt.workDelay),u&&yi.push({from:t,to:i+1}),e=!0;if(h=r.highlight(vi,n),h&&(u=!0),r.stateAfter=a(vi,n),f){if(c&&f(c,n))return!0}else if(h===!1&&c){if(++o>3)return!0}else o=0;++i}),e)return;u&&yi.push({from:t,to:i+1})}if(h&&rt.onHighlightComplete)rt.onHighlightComplete(wi)}function df(n){er.length&&wo.set(n,fi(go))}function cf(){di=null,yi=[],kf=lr=!1}function af(){var t=!1,n;if(lr&&(t=!ge()),yi.length?ku(yi):(lr&&no(),sr&&io()),t&&ge(),lr&&(ks(),pe()),tr&&!yu&&(di===!0||di!==!1&&lr)&&ue(),lr&&rt.matchBrackets&&setTimeout(fi(function(){uf&&(uf(),uf=null),ye(!1)}),20),n=kf,lr&&rt.onCursorActivity)rt.onCursorActivity(wi);if(n&&rt.onChange&&wi)rt.onChange(wi,n)}function fi(n){return function(){lf++||cf();try{var t=n.apply(this,arguments)}finally{--lf||af()}return t}}function fe(n,t,i){if(this.atOccurrence=!1,i==null&&(i=typeof n=="string"&&n==n.toLowerCase()),t=t&&typeof t=="object"?hi(t):{line:0,ch:0},this.pos={from:t,to:t},typeof n!="string")this.matches=function(t,i){var o,e;if(t)for(var u=ni(i.line).text.slice(0,i.ch),r=u.match(n),f=0;r;){if(o=u.indexOf(r[0]),f+=o,u=u.slice(o+1),e=u.match(n),e)r=e;else break;f++}else var u=ni(i.line).text.slice(i.ch),r=u.match(n),f=r&&i.ch+u.indexOf(r[0]);if(r)return{from:{line:i.line,ch:f},to:{line:i.line,ch:f+r[0].length},match:r}};else{i&&(n=n.toLowerCase());var u=i?function(n){return n.toLowerCase()}:function(n){return n},r=n.split("\n");this.matches=r.length==1?function(t,i){var e=u(ni(i.line).text),f=n.length,r;if(t?i.ch>=f&&(r=e.lastIndexOf(n,i.ch-f))!=-1:(r=e.indexOf(n,i.ch))!=-1)return{from:{line:i.line,ch:r},to:{line:i.line,ch:r+f}}}:function(n,t){var s=t.line,o=n?r.length-1:0,i=r[o],f=u(ni(s).text),e=n?f.indexOf(i)+i.length:f.lastIndexOf(i),h,l,c;if(!(n?e>=t.ch||e!=i.length:e<=t.ch||e!=f.length-i.length))for(;;){if(n?!s:s==at.size-1)return;if(f=u(ni(s+=n?-1:1).text),i=r[n?--o:++o],o>0&&o<r.length-1){if(f!=i)return;continue}return(h=n?f.lastIndexOf(i):f.indexOf(i)+i.length,n?h!=f.length-i.length:h!=i.length)?void 0:(l={line:t.line,ch:e},c={line:s,ch:h},{from:n?c:l,to:n?l:c})}}}}var rt={},yf=t.defaults,au,vr,ci,lo,wi,nf,hf,ve,oe,ou,of,lf,su;for(au in yf)yf.hasOwnProperty(au)&&(rt[au]=(y&&y.hasOwnProperty(au)?y:yf)[au]);vr=rt.document,ci=vr.createElement("div"),ci.className="CodeMirror"+(rt.lineWrapping?" CodeMirror-wrap":""),ci.innerHTML='<div style="overflow: hidden; position: relative; width: 1px; height: 0px;"><textarea style="position: absolute; width: 10000px;" wrap="off" autocorrect="off" autocapitalize="off"></textarea></div><div class="CodeMirror-scroll cm-s-'+rt.theme+'"><div style="position: relative"><div style="position: relative"><div class="CodeMirror-gutter"><div class="CodeMirror-gutter-text"></div></div><div class="CodeMirror-lines"><div style="position: relative"><div style="position: absolute; width: 100%; height: 0; overflow: hidden; visibility: hidden"></div><pre class="CodeMirror-cursor">&#160;</pre><div></div></div></div></div></div></div>',o.appendChild?o.appendChild(ci):o(ci);var cu=ci.firstChild,oi=cu.firstChild,kt=ci.lastChild,ki=kt.firstChild,du=ki.firstChild,bi=du.firstChild,hu=bi.firstChild,li=bi.nextSibling.firstChild,or=li.firstChild,ur=or.nextSibling,ir=ur.nextSibling;tt||(li.draggable=!0),rt.tabindex!=null&&(oi.tabindex=rt.tabindex),rt.gutter||rt.lineNumbers||(bi.style.display="none");try{sf("x")}catch(ih){ih.message.match(/unknown runtime/i)&&(ih=new Error("A CodeMirror inside a P-style element does not work in Internet Explorer. (innerHTML bug)"));throw ih;}var gf=new dt,wo=new dt,ne,vi,at=new et([new ht([new e("")])]),er,tr;se();var w={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},nr,kr,ef,fu,wf,di,yi,kf,lr,yu,sr,ru=0,ai=0,gi=0,ao=0,uu=null,pi,uf,hr="",cr;fi(function(){ho(rt.value||""),di=!1})();var rr=new pt,tu=2e3,vf=!ti&&!p&&(l||window.opera);rt.pollForIME&&vf&&(tu=50),n(kt,"mousedown",fi(rs)),n(kt,"dblclick",fi(ts)),n(li,"dragstart",yo),n(li,"selectstart",i),l||n(kt,"contextmenu",he),n(kt,"scroll",function(){if(ku([]),rt.fixedGutter&&(bi.style.left=kt.scrollLeft+"px"),rt.onScroll)rt.onScroll(wi)}),n(window,"resize",function(){ku(!0)}),n(oi,"keyup",fi(fs)),n(oi,"input",function(){br(uu)}),n(oi,"keydown",fi(us)),n(oi,"keypress",fi(is)),n(oi,"focus",nu),n(oi,"blur",eo),n(kt,"dragenter",ot),n(kt,"dragover",ot),n(kt,"drop",fi(ns)),n(kt,"paste",function(){wr(),br()}),n(oi,"paste",function(){br()}),n(oi,"cut",function(){br()});try{lo=vr.activeElement==oi}catch(ih){}lo?setTimeout(nu,20):eo(),wi=ci.CodeMirror={getValue:bo,setValue:fi(ho),getSelection:te,replaceSelection:fi(pu),focus:function(){wr(),nu(),br()},setOption:function(n,t){var i=rt[n];rt[n]=t,n=="mode"||n=="indentUnit"?se():n=="readOnly"&&t=="nocursor"?oi.blur():n=="theme"?kt.className=kt.className.replace(/cm-s-\w+/,"cm-s-"+t):n=="lineWrapping"&&i!=t?fi(es)():n=="pollForIME"&&vf&&(tu=t?50:2e3),(n=="lineNumbers"||n=="gutter"||n=="firstLineNumber"||n=="theme")&&fi(os)()},getOption:function(n){return rt[n]},undo:fi(to),redo:fi(fo),indentLine:fi(function(n,t){vu(n)&&iu(n,t==null?"smart":t?"add":"subtract")}),historySize:function(){return{undo:rr.done.length,redo:rr.undone.length}},clearHistory:function(){rr=new pt},matchBrackets:fi(function(){ye(!0)}),getTokenAt:fi(function(n){return n=hi(n),ni(n.line).getTokenAt(vi,ff(n.line),n.ch)}),getStateAfter:function(n){return n=bu(n==null?at.size-1:n),ff(n+1)},cursorCoords:function(n){return n==null&&(n=w.inverted),ae(n?w.from:w.to)},charCoords:function(n){return ae(hi(n))},coordsChar:function(n){var t=v(li);return ee(n.x-t.left,n.y-t.top)},getSearchCursor:function(n,t,i){return new fe(n,t,i)},markText:fi(pf),setBookmark:ys,setMarker:fi(gs),clearMarker:fi(ds),setLineClass:fi(th),hideLine:fi(function(n){return we(n,!0)}),showLine:fi(function(n){return we(n,!1)}),lineInfo:nh,addWidget:function(n,t,i,r,u){var e,f,s,o;n=rf(hi(n)),e=n.yBot,f=n.x,t.style.position="absolute",ki.appendChild(t),r=="over"?e=n.y:r=="near"&&(s=Math.max(kt.offsetHeight,at.height*fr()),o=Math.max(ki.clientWidth,li.clientWidth)-re(),n.yBot+t.offsetHeight>s&&n.y>t.offsetHeight&&(e=n.y-t.offsetHeight),f+t.offsetWidth>o&&(f=o-t.offsetWidth)),t.style.top=e+lu()+"px",t.style.left=t.style.right="",u=="right"?(f=ki.clientWidth-t.offsetWidth,t.style.right="0px"):(u=="left"?f=0:u=="middle"&&(f=(ki.clientWidth-t.offsetWidth)/2),t.style.left=f+re()+"px"),i&&de(f,e,f+t.offsetWidth,e+t.offsetHeight)},lineCount:function(){return at.size},getCursor:function(n){return n==null&&(n=w.inverted),yt(n?w.from:w.to)},somethingSelected:function(){return!r(w.from,w.to)},setCursor:fi(function(n,t){t==null&&typeof n.line=="number"?yr(n.line,n.ch):yr(n,t)}),setSelection:fi(function(n,t){dr(hi(n),hi(t||n))}),getLine:function(n){if(vu(n))return ni(n).text},setLine:fi(function(n,t){vu(n)&&ar(t,{line:n,ch:0},{line:n,ch:ni(n).text.length})}),removeLine:fi(function(n){vu(n)&&ar("",{line:n,ch:0},hi({line:n+1,ch:0}))}),replaceRange:fi(ar),getRange:function(n,t){return so(hi(n),hi(t))},coordsFromIndex:function(n){var i=0,t;return at.iter(0,at.size,function(r){var u=r.text.length+1;if(u>n)return t=n,!0;n-=u,++i}),hi({line:i,ch:t})},operation:function(n){return fi(n)()},refresh:function(){ku(!0)},getInputField:function(){return oi},getWrapperElement:function(){return ci},getScrollerElement:function(){return kt},getGutterElement:function(){return bi}},nf=!1,bf.prototype.clear=fi(function(){for(var n,t,i=0,r=this.set.length;i<r;++i)if(n=this.set[i].marked,n)for(t=0;t<n.length;++t)n[t].set==this.set&&n.splice(t--,1);yi.push({from:0,to:at.size})}),bf.prototype.find=function(){for(var e,o,f,u,t,n,r,i=0,s=this.set.length;i<s;++i)for(f=this.set[i],u=f.marked,t=0;t<u.length;++t)n=u[t],n.set==this.set&&(n.from!=null||n.to!=null)&&(r=st(f),r!=null&&(n.from!=null&&(e={line:r,ch:n.from}),n.to!=null&&(o={line:r,ch:n.to})));return{from:e,to:o}},hf=Math.floor(Math.random()*16777215).toString(16),ou=0,of={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},lf=0,fe.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(n){function i(n){var t={line:n,ch:0};return r.pos={from:t,to:t},r.atOccurrence=!1,!1}for(var r=this,t=hi(n?this.pos.from:this.pos.to);;){if(this.pos=this.matches(n,t))return this.atOccurrence=!0,this.pos.match||!0;if(n){if(!t.line)return i(0);t={line:t.line-1,ch:ni(t.line-1).text.length}}else{if(t.line==at.size-1)return i(at.size);t={line:t.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return yt(this.pos.from)},to:function(){if(this.atOccurrence)return yt(this.pos.to)},replace:function(n){var t=this;this.atOccurrence&&fi(function(){t.pos.to=ar(n,t.pos.from,t.pos.to)})()}};for(su in k)k.propertyIsEnumerable(su)&&!wi.propertyIsEnumerable(su)&&(wi[su]=k[su]);return wi}function a(n,t){var r,u,i;if(t===!0)return t;if(n.copyState)return n.copyState(t);r={};for(u in t)i=t[u],i instanceof Array&&(i=i.concat([])),r[u]=i;return r}function wt(n,t,i){return n.startState?n.startState(t,i):!0}function rt(n){this.pos=this.start=0,this.string=n}function ft(n,t,i,r){this.from=n,this.to=t,this.style=i,this.set=r}function gt(n){this.from=n,this.to=n,this.line=null}function e(n,t){this.styles=t||[n,null],this.text=n,this.height=1,this.marked=this.gutterMarker=this.className=null,this.stateAfter=this.parent=this.hidden=null}function at(n,t,i,r){for(var u,e,o=0,f=0,s=0;f<t;o+=2)u=i[o],e=f+u.length,s==0?(e>n&&r.push(u.slice(n-f,Math.min(u.length,t-f)),i[o+1]),e>=n&&(s=1)):s==1&&(e>t?r.push(u.slice(0,t-f),i[o+1]):r.push(u,i[o+1])),f=e}function ht(n){this.lines=n,this.parent=null;for(var t=0,r=n.length,i=0;t<r;++t)n[t].parent=this,i+=n[t].height;this.height=i}function et(n){var u,r,t,f,i;for(this.children=n,u=0,r=0,t=0,f=n.length;t<f;++t)i=n[t],u+=i.chunkSize(),r+=i.height,i.parent=this;this.size=u,this.height=r,this.parent=null}function ii(n,t){for(var i,f,u,r;;){for(i=0,f=n.children.length;i<f;++i){if(u=n.children[i],r=u.chunkSize(),t<r){n=u;break}t-=r}if(n.lines)return n.lines[t]}}function st(n){var i,u,t,r,f;if(n.parent==null)return null;for(i=n.parent,u=b(i.lines,n),t=i.parent;t;i=t,t=t.parent)for(r=0,f=t.children.length;;++r){if(t.children[r]==i)break;u+=t.children[r].chunkSize()}return u}function vt(n,t){var o=0,r,e,i,u,s,f;n:do{for(i=0,u=n.children.length;i<u;++i){if(r=n.children[i],e=r.height,t<e){n=r;continue n}t-=e,o+=r.chunkSize()}return o}while(!n.lines);for(i=0,u=n.lines.length;i<u;++i){if(s=n.lines[i],f=s.height,t<f)break;t-=f}return o+i}function lt(n,t){var u=0,e,r,f,i;n:do{for(i=0,e=n.children.length;i<e;++i){if(r=n.children[i],f=r.chunkSize(),t<f){n=r;continue n}t-=f,u+=r.height}return u}while(!n.lines);for(i=0;i<t;++i)u+=n.lines[i].height;return u}function pt(){this.time=0,this.done=[],this.undone=[]}function hi(){ot(this)}function bt(n){return n.stop||(n.stop=hi),n}function i(n){n.preventDefault?n.preventDefault():n.returnValue=!1}function fi(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0}function ot(n){i(n),fi(n)}function ct(n){return n.target||n.srcElement}function ei(n){return n.which?n.which:n.button&1?1:n.button&2?3:n.button&4?2:void 0}function n(n,t,i,r){function u(n){i(n||window.event)}if(typeof n.addEventListener=="function"){if(n.addEventListener(t,u,!1),r)return function(){n.removeEventListener(t,u,!1)}}else if(n.attachEvent("on"+t,u),r)return function(){n.detachEvent("on"+t,u)}}function dt(){this.id=null}function kt(n,t){t==null&&(t=n.search(/[^\s\u00a0]/),t==-1&&(t=n.length));for(var r=0,i=0;r<t;++r)n.charAt(r)=="\t"?i+=ut-i%ut:++i;return i}function oi(n){return n.currentStyle?n.currentStyle:window.getComputedStyle(n,null)}function v(n,t){for(var h=n.ownerDocument.body,u=0,r=0,s=!1,e,f,o,i=n;i;i=i.offsetParent)e=i.offsetLeft,f=i.offsetTop,i==h?(u+=Math.abs(e),r+=Math.abs(f)):(u+=e,r+=f),t&&oi(i).position=="fixed"&&(s=!0);for(o=t&&!s?null:h,i=n.parentNode;i!=o;i=i.parentNode)i.scrollLeft!=null&&(u-=i.scrollLeft,r-=i.scrollTop);return{left:u,top:r}}function si(n){return n.textContent||n.innerText||n.nodeValue||""}function r(n,t){return n.line==t.line&&n.ch==t.ch}function u(n,t){return n.line<t.line||n.line==t.line&&n.ch<t.ch}function yt(n){return{line:n.line,ch:n.ch}}function d(n){return ni?(s.innerHTML="",s.appendChild(document.createTextNode(n))):s.textContent=n,s.innerHTML}function ui(n,t){if(!t)return n?n.length:0;if(!n)return t.length;for(var r=n.length,i=t.length;r>=0&&i>=0;--r,--i)if(n.charAt(r)!=t.charAt(i))break;return i+1}function b(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0,r=n.length;i<r;++i)if(n[i]==t)return i;return-1}var y,o,k,w,s,ni,f,it,h;t.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,tabMode:"classic",enterMode:"indent",electricChars:!0,onKeyEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,smartHome:!0,onChange:null,onCursorActivity:null,onGutterClick:null,onHighlightComplete:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,workTime:100,workDelay:200,undoDepth:40,tabindex:null,pollForIME:!1,document:window.document},y={},o={},t.defineMode=function(n,i){t.defaults.mode||n=="null"||(t.defaults.mode=n),y[n]=i},t.defineMIME=function(n,t){o[n]=t},t.getMode=function(n,i){var r,f,u;return(typeof i=="string"&&o.hasOwnProperty(i)&&(i=o[i]),typeof i=="string"?(r=i,f={}):i!=null&&(r=i.name,f=i),u=y[r],!u)?(window.console&&console.warn("No mode "+r+" found, falling back to plain text."),t.getMode(n,"text/plain")):u(n,f||{})},t.listModes=function(){var t=[],n;for(n in y)y.propertyIsEnumerable(n)&&t.push(n);return t},t.listMIMEs=function(){var t=[],n;for(n in o)o.propertyIsEnumerable(n)&&t.push({mime:n,mode:o[n]});return t},k={},t.defineExtension=function(n,t){k[n]=t},t.fromTextArea=function(i,r){function f(){i.value=u.getValue()}var o,e,u;if(r||(r={}),r.value=i.value,!r.tabindex&&i.tabindex&&(r.tabindex=i.tabindex),i.form&&(o=n(i.form,"submit",f,!0),typeof i.form.submit=="function")){e=i.form.submit;function s(){f(),i.form.submit=e,i.form.submit(),i.form.submit=s}i.form.submit=s}return i.style.display="none",u=t(function(n){i.parentNode.insertBefore(n,i.nextSibling)},r),u.save=f,u.toTextArea=function(){f(),i.parentNode.removeChild(u.getWrapperElement()),i.style.display="",i.form&&(o(),typeof i.form.submit=="function"&&(i.form.submit=e))},u},t.copyState=a,t.startState=wt,rt.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(n){var t=this.string.charAt(this.pos),i;return i=typeof n=="string"?t==n:t&&(n.test?n.test(t):n(t)),i?(++this.pos,t):void 0},eatWhile:function(n){for(var t=this.pos;this.eat(n););return this.pos>t},eatSpace:function(){for(var n=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>n},skipToEnd:function(){this.pos=this.string.length},skipTo:function(n){var t=this.string.indexOf(n,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(n){this.pos-=n},column:function(){return kt(this.string,this.start)},indentation:function(){return kt(this.string)},match:function(n,t,i){if(typeof n=="string"){function u(n){return i?n.toLowerCase():n}if(u(this.string).indexOf(u(n),this.pos)==this.pos)return t!==!1&&(this.pos+=n.length),!0}else{var r=this.string.slice(this.pos).match(n);return r&&t!==!1&&(this.pos+=r[0].length),r}},current:function(){return this.string.slice(this.start,this.pos)}},t.StringStream=rt,ft.prototype={attach:function(n){this.set.push(n)},detach:function(n){var t=b(this.set,n);t>-1&&this.set.splice(t,1)},split:function(n,t){if(this.to<=n&&this.to!=null)return null;var r=this.from<n||this.from==null?null:this.from-n+t,i=this.to==null?null:this.to-n+t;return new ft(r,i,this.style,this.set)},dup:function(){return new ft(null,null,this.style,this.set)},clipTo:function(n,t,i,r,u){this.from!=null&&this.from>=t&&(this.from=Math.max(r,this.from)+u),this.to!=null&&this.to>t&&(this.to=r<this.to?this.to+u:t),n&&r>this.from&&(r<this.to||this.to==null)&&(this.from=null),i&&(t<this.to||this.to==null)&&(t>this.from||this.from==null)&&(this.to=null)},isDead:function(){return this.from!=null&&this.to!=null&&this.from>=this.to},sameSet:function(n){return this.set==n.set}},gt.prototype={attach:function(n){this.line=n},detach:function(n){this.line==n&&(this.line=null)},split:function(n,t){if(n<this.from)return this.from=this.to=this.from-n+t,this},isDead:function(){return this.from>this.to},clipTo:function(n,t,i,r,u){(n||t<this.from)&&(i||r>this.to)?(this.from=0,this.to=-1):this.from>t&&(this.from=this.to=Math.max(r,this.from)+u)},sameSet:function(){return!1},find:function(){return!this.line||!this.line.parent?null:{line:st(this.line),ch:this.from}},clear:function(){if(this.line){var n=b(this.line.marked,this);n!=-1&&this.line.marked.splice(n,1),this.line=null}}},e.inheritMarks=function(n,t){var u=new e(n),r=t.marked,i;if(r)for(i=0;i<r.length;++i)if(r[i].to==null&&r[i].style){var o=u.marked||(u.marked=[]),s=r[i],f=s.dup();o.push(f),f.attach(u)}return u},e.prototype={replace:function(n,t,i){var s,r,u;n||t!=null&&t!=this.text.length||(this.className=this.gutterMarker=null);var e=[],o=this.marked,f=t==null?this.text.length:t;if(at(0,n,this.styles,e),i&&e.push(i,null),at(f,this.text.length,this.styles,e),this.styles=e,this.text=this.text.slice(0,n)+i+this.text.slice(f),this.stateAfter=null,o)for(s=i.length-(f-n),r=0,u=o[r];r<o.length;++r)u.clipTo(n==null,n||0,t==null,f,s),u.isDead()&&(u.detach(this),o.splice(r--,1))},split:function(n,t){var o=[t,null],f=this.marked,i,r,s,u;if(at(n,this.text.length,this.styles,o),i=new e(t+this.text.slice(n),o),f)for(r=0;r<f.length;++r)s=f[r],u=s.split(n,t.length),u&&(i.marked||(i.marked=[]),i.marked.push(u),u.attach(i));return i},append:function(n){var e=this.text.length,f=n.marked,r=this.marked,t,i,o,u;if(this.text+=n.text,at(0,n.text.length,n.styles,this.styles),r)for(t=0;t<r.length;++t)r[t].to==null&&(r[t].to=e);if(f&&f.length){r||(this.marked=r=[]);n:for(t=0;t<f.length;++t){if(i=f[t],!i.from)for(o=0;o<r.length;++o)if(u=r[o],u.to==e&&u.sameSet(i)){u.to=i.to==null?null:i.to+e,u.isDead()&&(u.detach(this),f.splice(t--,1));continue n}r.push(i),i.attach(this),i.from+=e,i.to!=null&&(i.to+=e)}}},fixMarkEnds:function(n){var f=this.marked,e=n.marked,u,t,i,r;if(f)for(u=0;u<f.length;++u){if(t=f[u],i=t.to==null,i&&e)for(r=0;r<e.length;++r)if(e[r].sameSet(t)){i=!1;break}i&&(t.to=this.text.length)}},addMark:function(n){n.attach(this),this.marked==null&&(this.marked=[]),this.marked.push(n),this.marked.sort(function(n,t){return(n.from||0)-(t.from||0)})},highlight:function(n,t){var u=new rt(this.text),r=this.styles,i=0,f=!1,h=r[0],s,e,o;for(this.text==""&&n.blankLine&&n.blankLine(t);!u.eol();)if(e=n.token(u,t),o=this.text.slice(u.start,u.pos),u.start=u.pos,i&&r[i-1]==e?r[i-2]+=o:o&&(!f&&(r[i+1]!=e||i&&r[i-2]!=s)&&(f=!0),r[i++]=o,r[i++]=e,s=h,h=r[i]),u.pos>5e3){r[i++]=this.text.slice(u.pos),r[i++]=null;break}return r.length!=i&&(r.length=i,f=!0),i&&r[i-2]!=s&&(f=!0),f||(r.length<5&&this.text.length<10?null:!1)},getTokenAt:function(n,t,i){for(var f=this.text,r=new rt(f),u;r.pos<i&&!r.eol();)r.start=r.pos,u=n.token(r,t);return{start:r.start,end:r.pos,string:r.current(),className:u||null,state:t}},indentation:function(){return kt(this.text)},getHTML:function(n,t,i,r){function p(n,t){n&&(ft&&nt&&n.charAt(0)==" "&&(n=" "+n.slice(1)),ft=!1,t?v.push('<span class="',t,'">',d(n),"</span>"):v.push(d(n)))}var v=[],ft=!0,o,s,a,u,l,w,g;i&&v.push(this.className?'<pre class="'+this.className+'">':"<pre>");var y=this.styles,it=this.text,k=this.marked;if(n==t&&(n=null),o=it.length,r!=null&&(o=Math.min(r,o)),it||r!=null)if(k||n!=null){var e=0,s=0,c="",h,et=0,tt=-1,f=null;function ut(){k&&(tt+=1,f=tt<k.length?k[tt]:null)}for(ut();e<o;){for(u=o,l="",n!=null&&(n>e?u=n:(t==null||t>e)&&(l=" CodeMirror-selected",t!=null&&(u=Math.min(u,t))));f&&f.to!=null&&f.to<=e;)ut();for(f&&(f.from>e?u=Math.min(u,f.from):(l+=" "+f.style,f.to!=null&&(u=Math.min(u,f.to))));;){if(w=e+c.length,g=h,l&&(g=h?h+l:l),p(w>u?c.slice(0,u-e):c,g),w>=u){c=c.slice(u-e),e=u;break}e=w,c=y[s++],h="cm-"+y[s++]}}n!=null&&t==null&&p(" ","CodeMirror-selected")}else for(s=0,a=0;a<o;s+=2){var b=y[s],h=y[s+1],rt=b.length;a+rt>o&&(b=b.slice(0,o-a)),a+=rt,p(b,h&&"cm-"+h)}else p(" ",n!=null&&t==null?"CodeMirror-selected":null);return i&&v.push("</pre>"),v.join("")},cleanUp:function(){if(this.parent=null,this.marked)for(var n=0,t=this.marked.length;n<t;++n)this.marked[n].detach(this)}},ht.prototype={chunkSize:function(){return this.lines.length},remove:function(n,t){for(var r,i=n,u=n+t;i<u;++i)r=this.lines[i],r.cleanUp(),this.height-=r.height;this.lines.splice(n,t)},collapse:function(n){n.splice.apply(n,[n.length,0].concat(this.lines))},insertHeight:function(n,t,i){this.height+=i,this.lines.splice.apply(this.lines,[n,0].concat(t));for(var r=0,u=t.length;r<u;++r)t[r].parent=this},iterN:function(n,t,i){for(var r=n+t;n<r;++n)if(i(this.lines[n]))return!0}},et.prototype={chunkSize:function(){return this.size},remove:function(n,t){var u,i,r,f,o,e;for(this.size-=t,u=0;u<this.children.length;++u)if(i=this.children[u],r=i.chunkSize(),n<r){if(f=Math.min(t,r-n),o=i.height,i.remove(n,f),this.height-=o-i.height,r==f&&(this.children.splice(u--,1),i.parent=null),(t-=f)==0)break;n=0}else n-=r;this.size-t<25&&(e=[],this.collapse(e),this.children=[new ht(e)])},collapse:function(n){for(var t=0,i=this.children.length;t<i;++t)this.children[t].collapse(n)},insert:function(n,t){for(var u=0,i=0,r=t.length;i<r;++i)u+=t[i].height;this.insertHeight(n,t,u)},insertHeight:function(n,t,i){var u,o,r,e,s,f;for(this.size+=t.length,this.height+=i,u=0,o=this.children.length;u<o;++u){if(r=this.children[u],e=r.chunkSize(),n<=e){if(r.insertHeight(n,t,i),r.lines&&r.lines.length>50){while(r.lines.length>50)s=r.lines.splice(r.lines.length-25,25),f=new ht(s),r.height-=f.height,this.children.splice(u+1,0,f),f.parent=this;this.maybeSpill()}break}n-=e}},maybeSpill:function(){var n,u,t,i,r;if(!(this.children.length<=10)){n=this;do u=n.children.splice(n.children.length-5,5),t=new et(u),n.parent?(n.size-=t.size,n.height-=t.height,r=b(n.parent.children,n),n.parent.children.splice(r+1,0,t)):(i=new et(n.children),i.parent=n,n.children=[i,t],n=i),t.parent=n.parent;while(n.children.length>10);n.parent.maybeSpill()}},iter:function(n,t,i){this.iterN(n,t-n,i)},iterN:function(n,t,i){for(var e,r,f,u=0,o=this.children.length;u<o;++u)if(e=this.children[u],r=e.chunkSize(),n<r){if(f=Math.min(t,r-n),e.iterN(n,f,i))return!0;if((t-=f)==0)break;n=0}else n-=r}},pt.prototype={addChange:function(n,t,i){var e,r,f,u,o;if(this.undone.length=0,e=+new Date,r=this.done[this.done.length-1],e-this.time>400||!r||r.start>n+t||r.start+r.added<n-r.added+r.old.length)this.done.push({start:n,added:t,old:i});else{if(f=0,n<r.start){for(u=r.start-n-1;u>=0;--u)r.old.unshift(i[u]);r.added+=r.start-n,r.start=n}else r.start<n&&(f=n-r.start,t+=f);for(u=r.added-f,o=i.length;u<o;++u)r.old.push(i[u]);r.added<t&&(r.added=t)}this.time=e}},dt.prototype={set:function(n,t){clearTimeout(this.id),this.id=setTimeout(t,n)}};var ri=function(){if(/MSIE [1-8]\b/.test(navigator.userAgent))return!1;var n=document.createElement("div");return"draggable"in n}(),l=/gecko\/\d{7}/i.test(navigator.userAgent),nt=/MSIE \d/.test(navigator.userAgent),tt=/WebKit\//.test(navigator.userAgent),g="\n";(function(){var n=document.createElement("textarea");n.value="foo\nbar",n.value.indexOf("\r")>-1&&(g="\r\n")})();var ut=8,p=/Mac/.test(navigator.platform),ti=/Win/.test(navigator.platform),c={};for(w=35;w<=40;++w)c[w]=c["c"+w]=!0;return document.documentElement.getBoundingClientRect!=null&&(v=function(n,t){var i,r;try{i=n.getBoundingClientRect(),i={top:i.top,left:i.left}}catch(u){i={top:0,left:0}}return t||(window.pageYOffset==null?(r=document.documentElement||document.body.parentNode,r.scrollTop==null&&(r=document.body),i.top+=r.scrollTop,i.left+=r.scrollLeft):(i.top+=window.pageYOffset,i.left+=window.pageXOffset)),i}),s=document.createElement("pre"),ni=d("\t")!="\t",t.htmlEscape=d,f="\n\nb".split(/\n/).length!=3?function(n){for(var i=0,t,r=[];(t=n.indexOf("\n",i))>-1;)r.push(n.slice(i,n.charAt(t-1)=="\r"?t-1:t)),i=t+1;return r.push(n.slice(i)),r}:function(n){return n.split(/\r?\n/)},t.splitLines=f,window.getSelection?(it=function(n){try{return{start:n.selectionStart,end:n.selectionEnd}}catch(t){return null}},h=tt?function(n,t,i){t==i?n.setSelectionRange(t,i):(n.setSelectionRange(t,i-1),window.getSelection().modify("extend","forward","character"))}:function(n,t,i){try{n.setSelectionRange(t,i)}catch(r){}}):(it=function(n){var o,s,r,e,t;try{o=n.ownerDocument.selection.createRange()}catch(h){return null}if(!o||o.parentElement()!=n)return null;var u=n.value,f=u.length,i=n.createTextRange();if(i.moveToBookmark(o.getBookmark()),s=n.createTextRange(),s.collapse(!1),i.compareEndPoints("StartToEnd",s)>-1)return{start:f,end:f};for(r=-i.moveStart("character",-f),t=u.indexOf("\r");t>-1&&t<r;t=u.indexOf("\r",t+1),r++);if(i.compareEndPoints("EndToEnd",s)>-1)return{start:r,end:f};for(e=-i.moveEnd("character",-f),t=u.indexOf("\r");t>-1&&t<e;t=u.indexOf("\r",t+1),e++);return{start:r,end:e}},h=function(n,t,i){var u=n.createTextRange(),r;u.collapse(!0);var o=u.duplicate(),f=0,e=n.value;for(r=e.indexOf("\n");r>-1&&r<t;r=e.indexOf("\n",r+1))++f;for(u.move("character",t-f);r>-1&&r<i;r=e.indexOf("\n",r+1))++f;o.move("character",i-f),u.setEndPoint("EndToEnd",o),u.select()}),t.defineMode("null",function(){return{token:function(n){n.skipToEnd()}}}),t.defineMIME("text/plain","null"),t}();CodeMirror.defineMode("javascript",function(n,t){function et(n,t,i){return t.tokenize=i,i(n,t)}function st(n,t){for(var i=!1,r;(r=n.next())!=null;){if(r==t&&!i)return!1;i=!i&&r=="\\"}return i}function s(n,t,i){return a=n,ot=i,t}function y(n,t){var i=n.next(),r,u;return i=='"'||i=="'"?et(n,t,ni(i)):/[\[\]{}\(\),;\:\.]/.test(i)?s(i):i=="0"&&n.eat(/x/i)?(n.eatWhile(/[\da-f]/i),s("number","number")):/\d/.test(i)?(n.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),s("number","number")):i=="/"?n.eat("*")?et(n,t,gt):n.eat("/")?(n.skipToEnd(),s("comment","comment")):t.reAllowed?(st(n,"/"),n.eatWhile(/[gimy]/),s("regexp","string")):(n.eatWhile(g),s("operator",null,n.current())):i=="#"?(n.skipToEnd(),s("error","error")):g.test(i)?(n.eatWhile(g),s("operator",null,n.current())):(n.eatWhile(/[\w\$_]/),r=n.current(),u=ft.propertyIsEnumerable(r)&&ft[r],u?s(u.type,u.style,r):s("variable","variable",r))}function ni(n){return function(t,i){return st(t,n)||(i.tokenize=y),s("string","string")}}function gt(n,t){for(var r=!1,i;i=n.next();){if(i=="/"&&r){t.tokenize=y;break}r=i=="*"}return s("comment","comment")}function lt(n,t,i,r,u,f){this.indented=n,this.column=t,this.type=i,this.prev=u,this.info=f,r!=null&&(this.align=r)}function dt(n,t){for(var i=n.localVars;i;i=i.next)if(i.name==t)return!0}function kt(n,t,i,u,e){var o=n.cc,s;for(r.state=n,r.stream=e,r.marked=null,r.cc=o,n.lexical.hasOwnProperty("align")||(n.lexical.align=!0);;)if(s=o.length?o.pop():pt?f:l,s(i,u)){while(o.length&&o[o.length-1].lex)o.pop()();return r.marked?r.marked:i=="variable"&&dt(n,u)?"variable-2":t}}function c(){for(var n=arguments.length-1;n>=0;n--)r.cc.push(arguments[n])}function i(){return c.apply(null,arguments),!0}function b(n){var i=r.state,t;if(i.context){for(r.marked="def",t=i.localVars;t;t=t.next)if(t.name==n)return;i.localVars={name:n,next:i.localVars}}}function ht(){r.state.context||(r.state.localVars=yt),r.state.context={prev:r.state.context,vars:r.state.localVars}}function rt(){r.state.localVars=r.state.context.vars,r.state.context=r.state.context.prev}function e(n,t){var i=function(){var i=r.state;i.lexical=new lt(i.indented,r.stream.column(),n,null,i.lexical,t)};return i.lex=!0,i}function u(){var n=r.state;n.lexical.prev&&(n.lexical.type==")"&&(n.indented=n.lexical.indented),n.lexical=n.lexical.prev)}function o(n){return function(t){return t==n?i():n==";"?c():i(arguments.callee)}}function l(n){return n=="var"?i(e("vardef"),d,o(";"),u):n=="keyword a"?i(e("form"),f,l,u):n=="keyword b"?i(e("form"),l,u):n=="{"?i(e("}"),nt,u):n==";"?i():n=="function"?i(k):n=="for"?i(e("form"),o("("),e(")"),vt,o(")"),u,l,u):n=="variable"?i(e("stat"),bt):n=="switch"?i(e("form"),f,e("}","switch"),o("{"),nt,u,u):n=="case"?i(f,o(":")):n=="default"?i(o(":")):n=="catch"?i(e("form"),ht,o("("),ct,o(")"),l,u,rt):c(e("stat"),f,o(";"),u)}function f(n){return ut.hasOwnProperty(n)?i(h):n=="function"?i(k):n=="keyword c"?i(wt):n=="("?i(e(")"),f,o(")"),u,h):n=="operator"?i(f):n=="["?i(e("]"),w(f,"]"),u,h):n=="{"?i(e("}"),w(ii,"}"),u,h):i()}function wt(n){return n.match(/[;\}\)\],]/)?c():c(f)}function h(n,t){return n=="operator"&&/\+\+|--/.test(t)?i(h):n=="operator"?i(f):n==";"?void 0:n=="("?i(e(")"),w(f,")"),u,h):n=="."?i(ti,h):n=="["?i(e("]"),f,o("]"),u,h):void 0}function bt(n){return n==":"?i(u,l):c(h,o(";"),u)}function ti(n){if(n=="variable")return r.marked="property",i()}function ii(n){return n=="variable"&&(r.marked="property"),ut.hasOwnProperty(n)?i(o(":"),f):void 0}function w(n,t){function r(u){return u==","?i(n,r):u==t?i():i(o(t))}return function(u){return u==t?i():c(n,r)}}function nt(n){return n=="}"?i():c(l,nt)}function d(n,t){return n=="variable"?(b(t),i(tt)):i()}function tt(n,t){return t=="="?i(f,tt):n==","?i(d):void 0}function vt(n){return n=="var"?i(d,p):n==";"?c(p):n=="variable"?i(at):c(p)}function at(n,t){return t=="in"?i(f):i(h,p)}function p(n,t){return n==";"?i(it):t=="in"?i(f):i(f,o(";"),it)}function it(n){n!=")"&&i(f)}function k(n,t){return n=="variable"?(b(t),i(k)):n=="("?i(e(")"),ht,w(ct,")"),u,l,rt):void 0}function ct(n,t){if(n=="variable")return b(t),i()}var v=n.indentUnit,pt=t.json,ft=function(){function n(n){return{type:n,style:"keyword"}}var u=n("keyword a"),r=n("keyword b"),t=n("keyword c"),f=n("operator"),i={type:"atom",style:"atom"};return{"if":u,"while":u,"with":u,"else":r,"do":r,"try":r,"finally":r,"return":t,"break":t,"continue":t,"new":t,"delete":t,"throw":t,"var":n("var"),"const":n("var"),let:n("var"),"function":n("function"),"catch":n("catch"),"for":n("for"),"switch":n("switch"),"case":n("case"),"default":n("default"),"in":f,"typeof":f,"instanceof":f,"true":i,"false":i,"null":i,undefined:i,NaN:i,Infinity:i}}(),g=/[+\-*&%=<>!?|]/,a,ot,ut={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},r={state:null,column:null,marked:null,cc:null},yt={name:"this",next:{name:"arguments"}};return u.lex=!0,{startState:function(n){return{tokenize:y,reAllowed:!0,cc:[],lexical:new lt((n||0)-v,0,"block",!1),localVars:null,context:null,indented:0}},token:function(n,t){if(n.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=n.indentation()),n.eatSpace())return null;var i=t.tokenize(n,t);return a=="comment"?i:(t.reAllowed=a=="operator"||a=="keyword c"||a.match(/^[\[{}\(,;:]$/),kt(t,i,a,ot,n))},indent:function(n,t){if(n.tokenize!=y)return 0;var f=t&&t.charAt(0),i=n.lexical,r=i.type,u=f==r;return r=="vardef"?i.indented+4:r=="form"&&f=="{"?i.indented:r=="stat"||r=="form"?i.indented+v:i.info!="switch"||u?i.align?i.column+(u?0:1):i.indented+(u?0:v):i.indented+(/^(?:case|default)\b/.test(t)?v:2*v)},electricChars:":{}"}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0});
/*!
* JSHint, by JSHint Community.
*
* Licensed under the same slightly modified MIT license that JSLint is.
* It stops evil-doers everywhere.
*
* JSHint is a derivative work of JSLint:
*
*   Copyright (c) 2002 Douglas Crockford  (www.JSLint.com)
*
*   Permission is hereby granted, free of charge, to any person obtaining
*   a copy of this software and associated documentation files (the "Software"),
*   to deal in the Software without restriction, including without limitation
*   the rights to use, copy, modify, merge, publish, distribute, sublicense,
*   and/or sell copies of the Software, and to permit persons to whom
*   the Software is furnished to do so, subject to the following conditions:
*
*   The above copyright notice and this permission notice shall be included
*   in all copies or substantial portions of the Software.
*
*   The Software shall be used for Good, not Evil.
*
*   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
*   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
*   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
*   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
*   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
*   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
*   DEALINGS IN THE SOFTWARE.
*
* JSHint was forked from 2010-12-16 edition of JSLint.
*
*/
JSHINT=function(){"use strict";function vr(){}function tt(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function g(n,t){var i;for(i in t)tt(t,i)&&(n[i]=t[i])}function gr(){r.couch&&g(v,cu),r.rhino&&g(v,ku),r.prototypejs&&g(v,tf),r.node&&g(v,gu),r.devel&&g(v,vu),r.dojo&&g(v,pu),r.browser&&g(v,lu),r.nonstandard&&g(v,uu),r.jquery&&g(v,yu),r.mootools&&g(v,wu),r.wsh&&g(v,su),r.esnext&&ru(),r.globalstrict&&r.strict!==!1&&(r.strict=!0)}function sr(n,t,i){var r=Math.floor(t/it.length*100);throw{name:"JSHintError",line:t,character:i,message:n+" ("+r+"% scanned).",raw:n};}function dr(n,t,i,r){return JSHINT.undefs.push([n,t,i,r])}function i(i,u,f,e,o,s){var l,h,c;return u=u||n,u.id==="(end)"&&(u=t),h=u.line||0,l=u.from||0,c={id:"(error)",raw:i,evidence:it[h-1]||"",line:h,character:l,a:f,b:e,c:o,d:s},c.reason=i.supplant(c),JSHINT.errors.push(c),r.passfail&&sr("Stopping. ",h,l),ur+=1,ur>=r.maxerr&&sr("Too many errors.",h,l),c}function e(n,t,r,u,f,e,o){return i(n,{line:t,from:r},u,f,e,o)}function o(n,t,r,u,f,e){var o=i(n,t,r,u,f,e)}function et(n,t,i,r,u,f,e){return o(n,{line:t,from:i},r,u,f,e)}function bt(t,f){t==="hasOwnProperty"&&i("'hasOwnProperty' is a really bad name."),tt(u,t)&&!u["(global)"]&&(u[t]===!0?r.latedef&&i("'{a}' was used before it was defined.",n,t):r.shadow||f==="exception"||i("'{a}' is already defined.",n,t)),u[t]=f,u["(global)"]?(di[t]=u,tt(wt,t)&&(r.latedef&&i("'{a}' was used before it was defined.",n,t),delete wt[t])):c[t]=u}function nf(){var i,e,h,s=n.value,t,f;switch(s){case"*/":o("Unbegun comment.");break;case"/*members":case"/*member":s="/*members",gt||(gt={}),e=gt;break;case"/*jshint":case"/*jslint":e=r,h=au;break;case"/*global":e=v;break;default:o("What?")}t=at.token();n:for(;;){for(;;){if(t.type==="special"&&t.value==="*/")break n;if(t.id!=="(endline)"&&t.id!==",")break;t=at.token()}t.type!=="(string)"&&t.type!=="(identifier)"&&s!=="/*members"&&o("Bad option.",t),f=at.token(),f.id===":"?(f=at.token(),e===gt&&o("Expected '{a}' and instead saw '{b}'.",t,"*/",":"),t.value==="indent"&&(s==="/*jshint"||s==="/*jslint")?(i=+f.value,(typeof i!="number"||!isFinite(i)||i<=0||Math.floor(i)!==i)&&o("Expected a small integer and instead saw '{a}'.",f,f.value),e.white=!0,e.indent=i):t.value==="maxerr"&&(s==="/*jshint"||s==="/*jslint")?(i=+f.value,(typeof i!="number"||!isFinite(i)||i<=0||Math.floor(i)!==i)&&o("Expected a small integer and instead saw '{a}'.",f,f.value),e.maxerr=i):t.value==="maxlen"&&(s==="/*jshint"||s==="/*jslint")?(i=+f.value,(typeof i!="number"||!isFinite(i)||i<=0||Math.floor(i)!==i)&&o("Expected a small integer and instead saw '{a}'.",f,f.value),e.maxlen=i):t.value==="validthis"?u["(global)"]?o("Option 'validthis' can't be used in a global scope."):f.value==="true"||f.value==="false"?e[t.value]=f.value==="true":o("Bad option value.",f):f.value==="true"?e[t.value]=!0:f.value==="false"?e[t.value]=!1:o("Bad option value.",f),t=at.token()):((s==="/*jshint"||s==="/*jslint")&&o("Missing option value.",t),e[t.value]=!1,t=f)}h&&gr()}function ut(n){for(var r=n||0,t=0,i;t<=r;)i=vi[t],i||(i=vi[t]=at.token()),t+=1;return i}function f(r,u){switch(t.id){case"(number)":n.id==="."&&i("A dot following a number can be confused with a decimal point.",t);break;case"-":(n.id==="-"||n.id==="--")&&i("Confusing minusses.");break;case"+":(n.id==="+"||n.id==="++")&&i("Confusing plusses.")}for((t.type==="(string)"||t.identifier)&&(kt=t.value),r&&n.id!==r&&(u?n.id==="(end)"?i("Unmatched '{a}'.",u,u.id):i("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",n,r,u.id,u.line,n.value):(n.type!=="(identifier)"||n.value!==r)&&i("Expected '{a}' and instead saw '{b}'.",n,r,n.value)),p=t,t=n;;){if(n=vi.shift()||at.token(),n.id==="(end)"||n.id==="(error)")return;if(n.type==="special")nf();else if(n.id!=="(endline)")break}}function s(r,e){var s,h=!1;if(n.id==="(end)"&&o("Unexpected early end of program.",t),f(),e&&(kt="anonymous",u["(verb)"]=t.value),e===!0&&t.fud)s=t.fud();else{if(t.nud)s=t.nud();else{if(n.type==="(number)"&&t.id===".")return i("A leading decimal point can be confused with a dot: '.{a}'.",t,n.value),f(),t;o("Expected an identifier and instead saw '{a}'.",t,t.id)}while(r<n.lbp)h=t.value==="Array",f(),h&&t.id==="("&&n.id===")"&&i("Use the array literal notation [].",t),t.led?s=t.led(s):o("Expected an operator and instead saw '{a}'.",t,t.id)}return s}function ot(u,f){u=u||t,f=f||n,r.white&&u.character!==f.from&&u.line===f.line&&(u.from+=u.character-u.from,i("Unexpected space after '{a}'.",u,u.value))}function gi(u,f){u=u||t,f=f||n,r.white&&(u.character!==f.from||u.line!==f.line)&&i("Unexpected space before '{a}'.",f,f.value)}function w(i,u){i=i||t,u=u||n,r.white&&!i.comment&&i.line===u.line&&ot(i,u)}function h(u,f){r.white&&(u=u||t,f=f||n,u.line===f.line&&u.character===f.from&&(u.from+=u.character-u.from,i("Missing space after '{a}'.",u,u.value)))}function tu(u,f){u=u||t,f=f||n,r.laxbreak||u.line===f.line?r.white&&(u=u||t,f=f||n,u.character===f.from&&(u.from+=u.character-u.from,i("Missing space after '{a}'.",u,u.value))):i("Bad line breaking before '{a}'.",f,f.id)}function ft(t){var u;r.white&&n.id!=="(end)"&&(u=a+(t||0),n.from!==u&&i("Expected '{a}' to have an indentation at {b} instead at {c}.",n,n.value,u,n.from))}function ti(r){r=r||t,r.line!==n.line&&i("Line breaking error '{a}'.",r,r.value)}function rt(){t.line!==n.line?r.laxcomma||(rt.first&&(i("Comma warnings can be turned off with 'laxcomma'"),rt.first=!1),i("Bad line breaking before '{a}'.",t,n.id)):!t.comment&&t.character!==n.from&&r.white&&(t.from+=t.character-t.from,i("Unexpected space after '{a}'.",t,t.value)),f(","),h(t,n)}function yt(n,t){var i=d[n];return i&&typeof i=="object"||(d[n]=i={id:n,lbp:t,value:n}),i}function y(n){return yt(n,0)}function ct(n,t){var i=y(n);return i.identifier=i.reserved=!0,i.fud=t,i}function ii(n,t){var i=ct(n,t);return i.block=!0,i}function nr(n){var t=n.id.charAt(0);return(t>="a"&&t<="z"||t>="A"&&t<="Z")&&(n.identifier=n.reserved=!0),n}function k(n,t){var u=yt(n,150);return nr(u),u.nud=typeof t=="function"?t:function(){return this.right=s(150),this.arity="unary",(this.id==="++"||this.id==="--")&&(r.plusplus?i("Unexpected use of '{a}'.",this,this.id):(!this.right.identifier||this.right.reserved)&&this.right.id!=="."&&this.right.id!=="["&&i("Bad operand.",this)),this},u}function li(n,t){var i=y(n);return i.type=n,i.nud=t,i}function l(n,t){var i=li(n,t);return i.identifier=i.reserved=!0,i}function lt(n,t){return l(n,function(){return typeof t=="function"&&t(this),this})}function b(r,u,f,e){var o=yt(r,f);return nr(o),o.led=function(o){return e||(tu(p,t),h(t,n)),r==="in"&&o.id==="!"&&i("Confusing use of '{a}'.",o,"!"),typeof u=="function"?u(o,this):(this.left=o,this.right=s(f),this)},o}function pt(r,u){var f=yt(r,100);return f.led=function(r){tu(p,t),h(t,n);var f=s(100);return r&&r.id==="NaN"||f&&f.id==="NaN"?i("Use the isNaN function to compare with NaN.",this):u&&u.apply(this,[r,f]),r.id==="!"&&i("Confusing use of '{a}'.",r,"!"),f.id==="!"&&i("Confusing use of '{a}'.",f,"!"),this.left=r,this.right=f,this},f}function ci(n){return n&&(n.type==="(number)"&&+n.value==0||n.type==="(string)"&&n.value===""||n.type==="null"&&!r.eqnull||n.type==="true"||n.type==="false"||n.type==="undefined")}function ni(n){return yt(n,20).exps=!0,b(n,function(n,f){var e;if(f.left=n,v[n.value]===!1&&c[n.value]["(global)"]===!0?i("Read only.",n):n["function"]&&i("'{a}' is a function.",n,n.value),n){if(r.esnext&&u[n.value]==="const"&&i("Attempting to override '{a}' which is a constant",n,n.value),n.id==="."||n.id==="[")return n.left&&n.left.value!=="arguments"||i("Bad assignment.",f),f.right=s(19),f;if(n.identifier&&!n.reserved)return u[n.value]==="exception"&&i("Do not assign to the exception parameter.",n),f.right=s(19),f;n===d["function"]&&i("Expected an identifier in an assignment and instead saw a function invocation.",t)}o("Bad assignment.",f)},20)}function ri(n,t,u){var f=yt(n,u);return nr(f),f.led=typeof t=="function"?t:function(n){return r.bitwise&&i("Unexpected use of '{a}'.",this,this.id),this.left=n,this.right=s(u),this},f}function ui(u){return yt(u,20).exps=!0,b(u,function(u,f){if(r.bitwise&&i("Unexpected use of '{a}'.",f,f.id),h(p,t),h(t,n),u)return u.id==="."||u.id==="["||u.identifier&&!u.reserved?(s(19),f):(u===d["function"]&&i("Expected an identifier in an assignment, and instead saw a function invocation.",t),f);o("Bad assignment.",f)},20)}function pr(n){var u=yt(n,150);return u.led=function(n){return r.plusplus?i("Unexpected use of '{a}'.",this,this.id):(!n.identifier||n.reserved)&&n.id!=="."&&n.id!=="["&&i("Bad operand.",this),this.left=n,this},u}function hr(u){if(n.identifier)return f(),t.reserved&&!r.es5&&(u&&t.value==="undefined"||i("Expected an identifier and instead saw '{a}' (a reserved word).",t,t.id)),t.value}function ei(r){var u=hr(r);if(u)return u;t.id==="function"&&n.id==="("?i("Missing name in function declaration."):o("Expected an identifier and instead saw '{a}'.",n,n.value)}function ai(t){var f=0,u;if(n.id===";"&&!bi)for(;;){if(u=ut(f),u.reach)return;if(u.id!=="(endline)"){if(u.id==="function"){if(!r.latedef)break;i("Inner functions should be listed at the top of the outer function.",u);break}i("Unreachable '{a}' after '{b}'.",u,u.value,t);break}f+=1}}function ar(u){var y=a,l,v=c,o=n;if(o.id===";"){f(";");return}return o.identifier&&!o.reserved&&ut().id===":"&&(f(),f(":"),c=Object.create(v),bt(o.value,"label"),n.labelled||i("Label '{a}' on {b} statement.",n,o.value,n.value),pi.test(o.value+":")&&i("Label '{a}' looks like a javascript url.",o,o.value),n.label=o.value,o=n),u||ft(),l=s(0,!0),o.block||(r.expr||l&&l.exps?r.nonew&&l.id==="("&&l.left.id==="new"&&i("Do not use 'new' for side effects."):i("Expected an assignment or function call and instead saw an expression.",t),n.id!==";"?r.asi||r.lastsemic&&n.id==="}"&&n.line===t.line||e("Missing semicolon.",t.line,t.character):(ot(t,n),f(";"),h(t,n))),a=y,c=v,l}function wi(t){for(var u=[],e,r;!n.reach&&n.id!=="(end)";)n.id===";"?(r=ut(),r&&r.id==="("||i("Unnecessary semicolon."),f(";")):u.push(ar(t===n.line));return u}function yr(){for(var o,e,u;;){if(n.id==="(string)"){if(e=ut(0),e.id==="(endline)"){o=1;do u=ut(o),o=o+1;while(u.id==="(endline)");if(u.id!==";"){if(u.id!=="(string)"&&u.id!=="(number)"&&u.id!=="(regexp)"&&u.identifier!==!0&&u.id!=="}")break;i("Missing semicolon.",n)}else e=u}else if(e.id==="}")i("Missing semicolon.",e);else if(e.id!==";")break;ft(),f(),nt[t.value]&&i('Unnecessary directive "{a}".',t,t.value),t.value==="use strict"&&(r.newcap=!0,r.undef=!0),nt[t.value]=!0,e.id===";"&&f(";");continue}break}}function st(e,s,l){var v,d=si,k=a,y,g=c,b,p,w;if(si=e,e&&r.funcscope||(c=Object.create(c)),h(t,n),b=n,n.id==="{"){if(f("{"),p=t.line,n.id!=="}"){for(a+=r.indent;!e&&n.from>a;)a+=r.indent;if(l){y={};for(w in nt)tt(nt,w)&&(y[w]=nt[w]);yr(),r.strict&&u["(context)"]["(global)"]&&(y["use strict"]||nt["use strict"]||i('Missing "use strict" statement.'))}v=wi(p),l&&(nt=y),a-=r.indent,p!==n.line&&ft()}else p!==n.line&&ft();f("}",b),a=k}else e?((!s||r.curly)&&i("Expected '{a}' and instead saw '{b}'.",n,"{",n.value),bi=!0,a+=r.indent,v=[ar(n.line===t.line)],a-=r.indent,bi=!1):o("Expected '{a}' and instead saw '{b}'.",n,"{",n.value);return u["(verb)"]=null,e&&r.funcscope||(c=g),si=d,e&&r.noempty&&(!v||v.length===0)&&i("Empty block."),v}function ir(n){gt&&typeof gt[n]!="boolean"&&i("Unexpected /*member '{a}'.",t,n),typeof dt[n]=="number"?dt[n]+=1:dt[n]=1}function tr(n){var r=n.value,i=n.line,t=wt[r];typeof t=="function"&&(t=!1),t?t[t.length-1]!==i&&t.push(i):(t=[i],wt[r]=t)}function er(){var t=hr(!0);return t||(n.id==="(string)"?(t=n.value,f()):n.id==="(number)"&&(t=n.value.toString(),f())),t}function fu(){var i,u=n,r=[];if(f("("),w(),n.id===")"){f(")");return}for(;;)if(i=ei(!0),r.push(i),bt(i,"parameter"),n.id===",")rt();else return f(")",u),w(p,t),r}function yi(i,f){var e,s=r,o=c;return r=Object.create(r),c=Object.create(c),u={"(name)":i||'"'+kt+'"',"(line)":n.line,"(context)":u,"(breakage)":0,"(loopage)":0,"(scope)":c,"(statement)":f},e=u,t.funct=u,hi.push(u),i&&bt(i,"function"),u["(params)"]=fu(),st(!1,!1,!0),c=o,r=s,u["(last)"]=t.line,u=u["(context)"],e}function fr(){function e(){var u={},e=n;if(f("{"),n.id!=="}")for(;;){if(n.id==="(end)")o("Missing '}' to match '{' from line {a}.",n,e.line);else if(n.id==="}"){i("Unexpected comma.",t);break}else n.id===","?o("Unexpected comma.",n):n.id!=="(string)"&&i("Expected a string and instead saw {a}.",n,n.value);if(u[n.value]===!0?i("Duplicate key '{a}'.",n,n.value):(n.value!=="__proto__"||r.proto)&&(n.value!=="__iterator__"||r.iterator)?u[n.value]=!0:i("The '{a}' key may produce unexpected results.",n,n.value),f(),f(":"),fr(),n.id!==",")break;f(",")}f("}")}function u(){var r=n;if(f("["),n.id!=="]")for(;;){if(n.id==="(end)")o("Missing ']' to match '[' from line {a}.",n,r.line);else if(n.id==="]"){i("Unexpected comma.",t);break}else n.id===","&&o("Unexpected comma.",n);if(fr(),n.id!==",")break;f(",")}f("]")}switch(n.id){case"{":e();break;case"[":u();break;case"true":case"false":case"null":case"(number)":case"(string)":f();break;case"-":f("-"),t.character!==n.from&&i("Unexpected space after '-'.",t),ot(t,n),f("(number)");break;default:o("Expected a JSON value.",n)}}var kt,hu={"<":!0,"<=":!0,"==":!0,"===":!0,"!==":!0,"!=":!0,">":!0,">=":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0},au={asi:!0,bitwise:!0,boss:!0,browser:!0,couch:!0,curly:!0,debug:!0,devel:!0,dojo:!0,eqeqeq:!0,eqnull:!0,es5:!0,esnext:!0,evil:!0,expr:!0,forin:!0,funcscope:!0,globalstrict:!0,immed:!0,iterator:!0,jquery:!0,lastsemic:!0,latedef:!0,laxbreak:!0,laxcomma:!0,loopfunc:!0,mootools:!0,multistr:!0,newcap:!0,noarg:!0,node:!0,noempty:!0,nonew:!0,nonstandard:!0,nomen:!0,onevar:!0,onecase:!0,passfail:!0,plusplus:!0,proto:!0,prototypejs:!0,regexdash:!0,regexp:!0,rhino:!0,undef:!0,scripturl:!0,shadow:!0,smarttabs:!0,strict:!0,sub:!0,supernew:!0,trailing:!0,validthis:!0,white:!0,wsh:!0},lu={ArrayBuffer:!1,ArrayBufferView:!1,Audio:!1,addEventListener:!1,applicationCache:!1,blur:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,DataView:!1,defaultStatus:!1,document:!1,event:!1,FileReader:!1,Float32Array:!1,Float64Array:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,Image:!1,length:!1,localStorage:!1,location:!1,moveBy:!1,moveTo:!1,name:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,print:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,top:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,WebSocket:!1,window:!1,Worker:!1,XMLHttpRequest:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},cu={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},vu={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},pu={dojo:!1,dijit:!1,dojox:!1,define:!1,require:!1},eu={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"/":"\\/","\\":"\\\\"},u,oi=["closure","exception","global","label","outer","unused","var"],hi,di,wt,si,a,vt,yu={$:!1,jQuery:!1},it,vi,dt,gt,wu={$:!1,$$:!1,Assets:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,Iframe:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1},n,gu={__filename:!1,__dirname:!1,Buffer:!1,console:!1,exports:!1,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,setTimeout:!1,clearTimeout:!1,setInterval:!1,clearInterval:!1},bi,r,v,cr,p,tf={$:!1,$$:!1,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Class:!1,Enumerable:!1,Element:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},ku={defineClass:!1,deserialize:!1,gc:!1,help:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},c,du,bu={Array:!1,Boolean:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,eval:!1,EvalError:!1,Function:!1,hasOwnProperty:!1,isFinite:!1,isNaN:!1,JSON:!1,Math:!1,Number:!1,Object:!1,parseInt:!1,parseFloat:!1,RangeError:!1,ReferenceError:!1,RegExp:!1,String:!1,SyntaxError:!1,TypeError:!1,URIError:!1},uu={escape:!1,unescape:!1},rf={E:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,MAX_VALUE:!0,MIN_VALUE:!0,NEGATIVE_INFINITY:!0,PI:!0,POSITIVE_INFINITY:!0,SQRT1_2:!0,SQRT2:!0},nt,d={},lr,t,ki,ru,ur,su={ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0},ou,iu,kr,br,wr,nu,rr,pi,or,at,fi,ht;return function(){ou=/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i,iu=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,kr=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jshint|jslint|members?|global)?|=|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/,br=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,wr=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,nu=/\*\/|\/\*/,rr=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,pi=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i,or=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/}(),typeof Array.isArray!="function"&&(Array.isArray=function(n){return Object.prototype.toString.apply(n)==="[object Array]"}),typeof Object.create!="function"&&(Object.create=function(n){return vr.prototype=n,new vr}),typeof Object.keys!="function"&&(Object.keys=function(n){var i=[],t;for(t in n)tt(n,t)&&i.push(t);return i}),typeof String.prototype.entityify!="function"&&(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),typeof String.prototype.isAlpha!="function"&&(String.prototype.isAlpha=function(){return this>="a"&&this<="z￿"||this>="A"&&this<="Z￿"}),typeof String.prototype.isDigit!="function"&&(String.prototype.isDigit=function(){return this>="0"&&this<="9"}),typeof String.prototype.supplant!="function"&&(String.prototype.supplant=function(n){return this.replace(/\{([^{}]*)\}/g,function(t,i){var r=n[i];return typeof r=="string"||typeof r=="number"?r:t})}),typeof String.prototype.name!="function"&&(String.prototype.name=function(){return rr.test(this)?this:br.test(this)?'"'+this.replace(wr,function(n){var t=eu[n];return t?t:"\\u"+("0000"+n.charCodeAt().toString(16)).slice(-4)})+'"':'"'+this+'"'}),at=function at(){function s(){var t,f;return i>=it.length?!1:(u=1,n=it[i],i+=1,t=r.smarttabs?n.search(/ \t/):n.search(/ \t|\t /),t>=0&&e("Mixed spaces and tabs.",i,t+1),n=n.replace(/\t/g,lr),t=n.search(iu),t>=0&&e("Unsafe character.",i,t),r.maxlen&&r.maxlen<n.length&&e("Line too long.",i,n.length),f=/\s+$/.test(n),r.trailing&&f&&!/^\s+$/.test(n)&&e("Trailing whitespace.",i,f),!0)}function o(n,o){var h,s;return s=n==="(color)"||n==="(range)"?{type:n}:n==="(punctuator)"||n==="(identifier)"&&tt(d,o)?d[o]||d["(error)"]:d[n],s=Object.create(s),(n==="(string)"||n==="(range)")&&!r.scripturl&&pi.test(o)&&e("Script URL.",i,f),n==="(identifier)"&&(s.identifier=!0,o!=="__proto__"||r.proto?o!=="__iterator__"||r.iterator?r.nomen&&(o.charAt(0)==="_"||o.charAt(o.length-1)==="_")&&(r.node&&t.id!=="."&&(o==="__dirname"||o==="__filename")||e("Unexpected {a} in '{b}'.",i,f,"dangling '_'",o)):e("'{a}' is only available in JavaScript 1.7.",i,f,o):e("The '{a}' property is deprecated.",i,f,o)),s.value=o,s.line=i,s.character=u,s.from=f,h=s.id,h!=="(endline)"&&(cr=h&&("(,=:[!&|?{};".indexOf(h.charAt(h.length-1))>=0||h==="return"||h==="case")),s}var u,f,i,n;return{init:function(n){it=typeof n=="string"?n.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"):n,it[0]&&it[0].substr(0,2)==="#!"&&(it[0]=""),i=0,s(),f=1},range:function(t,r){var s,h="";for(f=u,n.charAt(0)!==t&&et("Expected '{a}' and instead saw '{b}'.",i,u,t,n.charAt(0));;){n=n.slice(1),u+=1,s=n.charAt(0);switch(s){case"":et("Missing '{a}'.",i,u,s);break;case r:return n=n.slice(1),u+=1,o("(range)",h);case"\\":e("Unexpected '{a}'.",i,u,s)}h+=s}},token:function(){function it(t){var r=t.exec(n),i;if(r)return h=r[0].length,i=r[1],c=i.charAt(0),n=n.substr(h),f=u+h-i.length,u+=h,i}function tt(t){function p(t){var r=parseInt(n.substr(c+1,t),16);c+=t,r>=32&&r<=126&&r!==34&&r!==92&&r!==39&&e("Unnecessary escapement.",i,u),u+=t,h=String.fromCharCode(r)}var h,c,y="",a=!1,l,v;vt&&t!=='"'&&e("Strings must use doublequote.",i,u),c=0;n:for(;;){while(c>=n.length){if(c=0,l=i,v=f,!s()){et("Unclosed string.",l,v);break n}a?a=!1:e("Unclosed string.",l,v)}if(h=n.charAt(c),h===t)return u+=1,n=n.substr(c+1),o("(string)",y,t);if(h<" "){if(h==="\n"||h==="\r")break;e("Control character in string: {a}.",i,u+c,n.slice(0,c))}else if(h==="\\"){c+=1,u+=1,h=n.charAt(c);switch(h){case"\\":case'"':case"/":break;case"'":vt&&e("Avoid \\'.",i,u);break;case"b":h="\b";break;case"f":h="\f";break;case"n":h="\n";break;case"r":h="\r";break;case"t":h="\t";break;case"u":p(4);break;case"v":vt&&e("Avoid \\v.",i,u),h='\v';break;case"x":vt&&e("Avoid \\x-.",i,u),p(2);break;case"":if(a=!0,r.multistr){vt&&e("Avoid EOL escapement.",i,u),h="",u-=1;break}e("Bad escapement of EOL. Use option multistr if needed.",i,u);break;default:e("Bad escapement.",i,u)}}y+=h,u+=1,c+=1}}for(var g,c,nt,d,w,p,k,h,b,v,l,y,a;;){if(!n)return o(s()?"(endline)":"(end)","");if(l=it(kr),l){if(c.isAlpha()||c==="_"||c==="$")return o("(identifier)",l);if(c.isDigit())return isFinite(Number(l))||e("Bad number '{a}'.",i,u,l),n.substr(0,1).isAlpha()&&e("Missing space after '{a}'.",i,u,l),c==="0"&&(d=l.substr(1,1),d.isDigit()?t.id!=="."&&e("Don't use extra leading zeros '{a}'.",i,u,l):vt&&(d==="x"||d==="X")&&e("Avoid 0x-. '{a}'.",i,u,l)),l.substr(l.length-1)==="."&&e("A trailing decimal point can be confused with a dot '{a}'.",i,u,l),o("(number)",l);switch(l){case'"':case"'":return tt(l);case"//":n="",t.comment=!0;break;case"/*":for(;;){if(k=n.search(nu),k>=0)break;s()||et("Unclosed comment.",i,u)}u+=k+2,n.substr(k,1)==="/"&&et("Nested comment.",i,u),n=n.substr(k+2),t.comment=!0;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:l,type:"special",line:i,character:u,from:f};case"":break;case"/":if(t.id==="/="&&et("A regular expression literal can be confused with '/='.",i,f),cr){for(w=0,nt=0,h=0;;){g=!0,c=n.charAt(h),h+=1;switch(c){case"":return et("Unclosed regular expression.",i,f),sr("Stopping.",i,f);case"/":for(w>0&&e("{a} unterminated regular expression group(s).",i,f+h,w),c=n.substr(0,h-1),v={g:!0,i:!0,m:!0};v[n.charAt(h)]===!0;)v[n.charAt(h)]=!1,h+=1;return u+=h,n=n.substr(h),v=n.charAt(0),(v==="/"||v==="*")&&et("Confusing regular expression.",i,f),o("(regexp)",c);case"\\":c=n.charAt(h),c<" "?e("Unexpected control character in regular expression.",i,f+h):c==="<"&&e("Unexpected escaped character '{a}' in regular expression.",i,f+h,c),h+=1;break;case"(":if(w+=1,g=!1,n.charAt(h)==="?"){h+=1;switch(n.charAt(h)){case":":case"=":case"!":h+=1;break;default:e("Expected '{a}' and instead saw '{b}'.",i,f+h,":",n.charAt(h))}}else nt+=1;break;case"|":g=!1;break;case")":w===0?e("Unescaped '{a}'.",i,f+h,")"):w-=1;break;case" ":for(v=1;n.charAt(h)===" ";)h+=1,v+=1;v>1&&e("Spaces are hard to count. Use {{a}}.",i,f+h,v);break;case"[":c=n.charAt(h),c==="^"&&(h+=1,r.regexp?e("Insecure '{a}'.",i,f+h,c):n.charAt(h)==="]"&&et("Unescaped '{a}'.",i,f+h,"^")),c==="]"&&e("Empty class.",i,f+h-1),y=!1,a=!1;n:do{c=n.charAt(h),h+=1;switch(c){case"[":case"^":e("Unescaped '{a}'.",i,f+h,c),a?a=!1:y=!0;break;case"-":y&&!a?(y=!1,a=!0):a?a=!1:n.charAt(h)==="]"?a=!0:(r.regexdash!==(h===2||h===3&&n.charAt(1)==="^")&&e("Unescaped '{a}'.",i,f+h-1,"-"),y=!0);break;case"]":a&&!r.regexdash&&e("Unescaped '{a}'.",i,f+h-1,"-");break n;case"\\":c=n.charAt(h),c<" "?e("Unexpected control character in regular expression.",i,f+h):c==="<"&&e("Unexpected escaped character '{a}' in regular expression.",i,f+h,c),h+=1,/[wsd]/i.test(c)?(a&&(e("Unescaped '{a}'.",i,f+h,"-"),a=!1),y=!1):a?a=!1:y=!0;break;case"/":e("Unescaped '{a}'.",i,f+h-1,"/"),a?a=!1:y=!0;break;case"<":a?a=!1:y=!0;break;default:a?a=!1:y=!0}}while(c);break;case".":r.regexp&&e("Insecure '{a}'.",i,f+h,c);break;case"]":case"?":case"{":case"}":case"+":case"*":e("Unescaped '{a}'.",i,f+h,c)}if(g)switch(n.charAt(h)){case"?":case"+":case"*":h+=1,n.charAt(h)==="?"&&(h+=1);break;case"{":for(h+=1,c=n.charAt(h),(c<"0"||c>"9")&&e("Expected a number and instead saw '{a}'.",i,f+h,c),h+=1,b=+c;;){if(c=n.charAt(h),c<"0"||c>"9")break;h+=1,b=+c+b*10}if(p=b,c===","&&(h+=1,p=Infinity,c=n.charAt(h),c>="0"&&c<="9"))for(h+=1,p=+c;;){if(c=n.charAt(h),c<"0"||c>"9")break;h+=1,p=+c+p*10}n.charAt(h)!=="}"?e("Expected '{a}' and instead saw '{b}'.",i,f+h,"}",c):h+=1,n.charAt(h)==="?"&&(h+=1),b>p&&e("'{a}' should not be greater than '{b}'.",i,f+h,b,p)}}return c=n.substr(0,h-1),u+=h,n=n.substr(h),o("(regexp)",c)}return o("(punctuator)",l);case"#":return o("(punctuator)",l);default:return o("(punctuator)",l)}}else{for(l="",c="";n&&n<"!";)n=n.substr(1);n&&(et("Unexpected '{a}'.",i,u,n.substr(0,1)),n="")}}}}}(),rt.first=!0,li("(number)",function(){return this}),li("(string)",function(){return this}),d["(identifier)"]={type:"(identifier)",lbp:0,identifier:!0,nud:function(){var f=this.value,e=c[f],o;if(typeof e=="function"?e=undefined:typeof e=="boolean"&&(o=u,u=hi[0],bt(f,"var"),e=u,u=o),u===e)switch(u[f]){case"unused":u[f]="var";break;case"unction":u[f]="function",this["function"]=!0;break;case"function":this["function"]=!0;break;case"label":i("'{a}' is a statement label.",t,f)}else if(u["(global)"])r.undef&&typeof v[f]!="boolean"&&((kt==="typeof"||kt==="delete")&&(!n||n.value!=="."&&n.value!=="[")||dr(u,"'{a}' is not defined.",t,f)),tr(t);else switch(u[f]){case"closure":case"function":case"var":case"unused":i("'{a}' used out of scope.",t,f);break;case"label":i("'{a}' is a statement label.",t,f);break;case"outer":case"global":break;default:if(e===!0)u[f]=!0;else if(e===null)i("'{a}' is not allowed.",t,f),tr(t);else if(typeof e!="object")r.undef&&((kt==="typeof"||kt==="delete")&&(!n||n.value!=="."&&n.value!=="[")||dr(u,"'{a}' is not defined.",t,f)),u[f]=!0,tr(t);else switch(e[f]){case"function":case"unction":this["function"]=!0,e[f]="closure",u[f]=e["(global)"]?"global":"outer";break;case"var":case"unused":e[f]="closure",u[f]=e["(global)"]?"global":"outer";break;case"closure":case"parameter":u[f]=e["(global)"]?"global":"outer";break;case"label":i("'{a}' is a statement label.",t,f)}}return this},led:function(){o("Expected an operator and instead saw '{a}'.",n,n.value)}},li("(regexp)",function(){return this}),y("(endline)"),y("(begin)"),y("(end)").reach=!0,y("</").reach=!0,y("<!"),y("<!--"),y("-->"),y("(error)").reach=!0,y("}").reach=!0,y(")"),y("]"),y('"').reach=!0,y("'").reach=!0,y(";"),y(":").reach=!0,y(","),y("#"),y("@"),l("else"),l("case").reach=!0,l("catch"),l("default").reach=!0,l("finally"),lt("arguments",function(n){nt["use strict"]&&u["(global)"]&&i("Strict violation.",n)}),lt("eval"),lt("false"),lt("Infinity"),lt("NaN"),lt("null"),lt("this",function(n){nt["use strict"]&&!r.validthis&&(u["(statement)"]&&u["(name)"].charAt(0)>"Z"||u["(global)"])&&i("Possible strict violation.",n)}),lt("true"),lt("undefined"),ni("=","assign",20),ni("+=","assignadd",20),ni("-=","assignsub",20),ni("*=","assignmult",20),ni("/=","assigndiv",20).nud=function(){o("A regular expression literal can be confused with '/='.")},ni("%=","assignmod",20),ui("&=","assignbitand",20),ui("|=","assignbitor",20),ui("^=","assignbitxor",20),ui("<<=","assignshiftleft",20),ui(">>=","assignshiftright",20),ui(">>>=","assignshiftrightunsigned",20),b("?",function(n,t){return t.left=n,t.right=s(10),f(":"),t["else"]=s(10),t},30),b("||","or",40),b("&&","and",50),ri("|","bitor",70),ri("^","bitxor",80),ri("&","bitand",90),pt("==",function(n,t){var u=r.eqnull&&(n.value==="null"||t.value==="null");return!u&&r.eqeqeq?i("Expected '{a}' and instead saw '{b}'.",this,"===","=="):ci(n)?i("Use '{a}' to compare with '{b}'.",this,"===",n.value):ci(t)&&i("Use '{a}' to compare with '{b}'.",this,"===",t.value),this}),pt("==="),pt("!=",function(n,t){var u=r.eqnull&&(n.value==="null"||t.value==="null");return!u&&r.eqeqeq?i("Expected '{a}' and instead saw '{b}'.",this,"!==","!="):ci(n)?i("Use '{a}' to compare with '{b}'.",this,"!==",n.value):ci(t)&&i("Use '{a}' to compare with '{b}'.",this,"!==",t.value),this}),pt("!=="),pt("<"),pt(">"),pt("<="),pt(">="),ri("<<","shiftleft",120),ri(">>","shiftright",120),ri(">>>","shiftrightunsigned",120),b("in","in",120),b("instanceof","instanceof",120),b("+",function(n,t){var u=s(130);return n&&u&&n.id==="(string)"&&u.id==="(string)"?(n.value+=u.value,n.character=u.character,!r.scripturl&&pi.test(n.value)&&i("JavaScript URL.",n),n):(t.left=n,t.right=u,t)},130),k("+","num"),k("+++",function(){return i("Confusing pluses."),this.right=s(150),this.arity="unary",this}),b("+++",function(n){return i("Confusing pluses."),this.left=n,this.right=s(130),this},130),b("-","sub",130),k("-","neg"),k("---",function(){return i("Confusing minuses."),this.right=s(150),this.arity="unary",this}),b("---",function(n){return i("Confusing minuses."),this.left=n,this.right=s(130),this},130),b("*","mult",140),b("/","div",140),b("%","mod",140),pr("++","postinc"),k("++","preinc"),d["++"].exps=!0,pr("--","postdec"),k("--","predec"),d["--"].exps=!0,k("delete",function(){var n=s(0);return n&&(n.id==="."||n.id==="[")||i("Variables should not be deleted."),this.first=n,this}).exps=!0,k("~",function(){return r.bitwise&&i("Unexpected '{a}'.",this,"~"),s(150),this}),k("!",function(){return this.right=s(150),this.arity="unary",hu[this.right.id]===!0&&i("Confusing use of '{a}'.",this,"!"),this}),k("typeof","typeof"),k("new",function(){var u=s(155),f;if(u&&u.id!=="function")if(u.identifier){u["new"]=!0;switch(u.value){case"Object":i("Use the object literal notation {}.",t);break;case"Number":case"String":case"Boolean":case"Math":case"JSON":i("Do not use {a} as a constructor.",t,u.value);break;case"Function":r.evil||i("The Function constructor is eval.");break;case"Date":case"RegExp":break;default:u.id!=="function"&&(f=u.value.substr(0,1),r.newcap&&(f<"A"||f>"Z")&&i("A constructor name should start with an uppercase letter.",t))}}else u.id!=="."&&u.id!=="["&&u.id!=="("&&i("Bad constructor.",t);else r.supernew||i("Weird construction. Delete 'new'.",this);return ot(t,n),n.id==="("||r.supernew||i("Missing '()' invoking a constructor."),this.first=u,this}),d["new"].exps=!0,k("void").exps=!0,b(".",function(n,u){ot(p,t),gi();var f=ei();return typeof f=="string"&&ir(f),u.left=n,u.right=f,n&&n.value==="arguments"&&(f==="callee"||f==="caller")?r.noarg?i("Avoid arguments.{a}.",n,f):nt["use strict"]&&o("Strict violation."):!r.evil&&n&&n.value==="document"&&(f==="write"||f==="writeln")&&i("document.write can be a form of eval.",n),r.evil||f!=="eval"&&f!=="execScript"||i("eval is evil."),u},160,!0),b("(",function(u,e){p.id!=="}"&&p.id!==")"&&gi(p,t),w(),r.immed&&!u.immed&&u.id==="function"&&i("Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.");var h=0,o=[];if(u&&u.type==="(identifier)"&&u.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&u.value!=="Number"&&u.value!=="String"&&u.value!=="Boolean"&&u.value!=="Date"&&(u.value==="Math"?i("Math is not a function.",u):r.newcap&&i("Missing 'new' prefix when invoking a constructor.",u)),n.id!==")")for(;;){if(o[o.length]=s(10),h+=1,n.id!==",")break;rt()}return f(")"),w(p,t),typeof u=="object"&&(u.value==="parseInt"&&h===1&&i("Missing radix parameter.",u),r.evil||(u.value==="eval"||u.value==="Function"||u.value==="execScript"?i("eval is evil.",u):o[0]&&o[0].id==="(string)"&&(u.value==="setTimeout"||u.value==="setInterval")&&i("Implied eval is evil. Pass a function instead of a string.",u)),u.identifier||u.id==="."||u.id==="["||u.id==="("||u.id==="&&"||u.id==="||"||u.id==="?"||i("Bad invocation.",u)),e.left=u,e},155,!0).exps=!0,k("(",function(){w(),n.id==="function"&&(n.immed=!0);var u=s(0);return f(")",this),w(p,t),r.immed&&u.id==="function"&&(n.id==="("?i("Move the invocation into the parens that contain the function.",n):i("Do not wrap function literals in parens unless they are to be immediately invoked.",this)),u}),b("[",function(n,u){gi(p,t),w();var e=s(0),o;return e&&e.type==="(string)"&&(r.evil||e.value!=="eval"&&e.value!=="execScript"||i("eval is evil.",u),ir(e.value),!r.sub&&rr.test(e.value)&&(o=d[e.value],o&&o.reserved||i("['{a}'] is better written in dot notation.",e,e.value))),f("]",u),w(p,t),u.left=n,u.right=e,u},160,!0),k("[",function(){var u=t.line!==n.line;for(this.first=[],u&&(a+=r.indent,n.from===a+r.indent&&(a+=r.indent));n.id!=="(end)";){while(n.id===",")i("Extra comma."),f(",");if(n.id==="]")break;if(u&&t.line!==n.line&&ft(),this.first.push(s(10)),n.id===","){if(rt(),n.id==="]"&&!r.es5){i("Extra comma.",t);break}}else break}return u&&(a-=r.indent,ft()),f("]",this),this},160),function(u){u.nud=function(){function k(t,r){u[t]&&tt(u,t)?i("Duplicate member '{a}'.",n,e):u[t]={},u[t].basic=!0,u[t].basicToken=r}function b(t,r){u[t]&&tt(u,t)?(u[t].basic||u[t].setter)&&i("Duplicate member '{a}'.",n,e):u[t]={},u[t].setter=!0,u[t].setterToken=r}function w(r){u[r]&&tt(u,r)?(u[r].basic||u[r].getter)&&i("Duplicate member '{a}'.",n,e):u[r]={},u[r].getter=!0,u[r].getterToken=t}var v,p,e,d,c,y,u={},l;for(v=t.line!==n.line,v&&(a+=r.indent,n.from===a+r.indent&&(a+=r.indent));;){if(n.id==="}")break;if(v&&ft(),n.value==="get"&&ut().id!==":")f("get"),r.es5||o("get/set are ES5 features."),e=er(),e||o("Missing property name."),w(e),y=n,ot(t,n),p=yi(),c=p["(params)"],c&&i("Unexpected parameter '{a}' in get {b} function.",y,c[0],e),ot(t,n);else if(n.value==="set"&&ut().id!==":")f("set"),r.es5||o("get/set are ES5 features."),e=er(),e||o("Missing property name."),b(e,n),y=n,ot(t,n),p=yi(),c=p["(params)"],c&&c.length===1||i("Expected a single parameter in set {a} function.",y,e);else{if(e=er(),k(e,n),typeof e!="string")break;f(":"),h(t,n),s(10)}if(ir(e),n.id===",")rt(),n.id===","?i("Extra comma.",t):n.id!=="}"||r.es5||i("Extra comma.",t);else break}if(v&&(a-=r.indent,ft()),f("}",this),r.es5)for(l in u)tt(u,l)&&u[l].setter&&!u[l].getter&&i("Setter is defined without getter.",u[l].setterToken);return this},u.fud=function(){o("Expected to see a statement and instead saw a block.",t)}}(y("{")),ru=function(){var r=ct("const",function(r){var e,l,c;for(this.first=[];;){if(h(t,n),e=ei(),u[e]==="const"&&i("const '"+e+"' has already been declared"),u["(global)"]&&v[e]===!1&&i("Redefinition of '{a}'.",t,e),bt(e,"const"),r)break;if(l=t,this.first.push(t),n.id!=="="&&i("const '{a}' is initialized to 'undefined'.",t,e),n.id==="="&&(h(t,n),f("="),h(t,n),n.id==="undefined"&&i("It is not necessary to initialize '{a}' to 'undefined'.",t,e),ut(0).id==="="&&n.identifier&&o("Constant {a} was not declared correctly.",n,n.value),c=s(0),l.first=c),n.id!==",")break;rt()}return this});r.exps=!0},fi=ct("var",function(e){var c,a,l;for(u["(onevar)"]&&r.onevar?i("Too many var statements."):u["(global)"]||(u["(onevar)"]=!0),this.first=[];;){if(h(t,n),c=ei(),r.esnext&&u[c]==="const"&&i("const '"+c+"' has already been declared"),u["(global)"]&&v[c]===!1&&i("Redefinition of '{a}'.",t,c),bt(c,"unused"),e)break;if(a=t,this.first.push(t),n.id==="="&&(h(t,n),f("="),h(t,n),n.id==="undefined"&&i("It is not necessary to initialize '{a}' to 'undefined'.",t,c),ut(0).id==="="&&n.identifier&&o("Variable {a} was not declared correctly.",n,n.value),l=s(0),a.first=l),n.id!==",")break;rt()}return this}),fi.exps=!0,ii("function",function(){si&&i("Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.",t);var f=ei();return r.esnext&&u[f]==="const"&&i("const '"+f+"' has already been declared"),ot(t,n),bt(f,"unction"),yi(f,!0),n.id==="("&&n.line===t.line&&o("Function declarations are not invocable. Wrap the whole function invocation in parens."),this}),k("function",function(){var f=hr();return f?ot(t,n):h(t,n),yi(f),!r.loopfunc&&u["(loopage)"]&&i("Don't make functions within a loop."),this}),ii("if",function(){var u=n;return f("("),h(this,u),w(),s(20),n.id==="="&&(r.boss||i("Expected a conditional expression and instead saw an assignment."),f("="),s(20)),f(")",u),w(p,t),st(!0,!0),n.id==="else"&&(h(t,n),f("else"),n.id==="if"||n.id==="switch"?ar(!0):st(!0,!0)),this}),ii("try",function(){var e,u,r;if(st(!1),n.id==="catch"&&(f("catch"),h(t,n),f("("),r=c,c=Object.create(r),u=n.value,n.type!=="(identifier)"?i("Expected an identifier and instead saw '{a}'.",n,u):bt(u,"exception"),f(),f(")"),st(!1),e=!0,c=r),n.id==="finally"){f("finally"),st(!1);return}return e||o("Expected '{a}' and instead saw '{b}'.",n,"catch",n.value),this}),ii("while",function(){var e=n;return u["(breakage)"]+=1,u["(loopage)"]+=1,f("("),h(this,e),w(),s(20),n.id==="="&&(r.boss||i("Expected a conditional expression and instead saw an assignment."),f("="),s(20)),f(")",e),w(p,t),st(!0,!0),u["(breakage)"]-=1,u["(loopage)"]-=1,this}).labelled=!0,l("with"),ii("switch",function(){var c=n,e=!1;for(u["(breakage)"]+=1,f("("),h(this,c),w(),this.condition=s(20),f(")",c),w(p,t),h(t,n),c=n,f("{"),h(t,n),a+=r.indent,this.cases=[];;)switch(n.id){case"case":switch(u["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:or.test(it[n.line-2])||i("Expected a 'break' statement before 'case'.",t)}ft(-r.indent),f("case"),this.cases.push(s(20)),e=!0,f(":"),u["(verb)"]="case";break;case"default":switch(u["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:or.test(it[n.line-2])||i("Expected a 'break' statement before 'default'.",t)}ft(-r.indent),f("default"),e=!0,f(":");break;case"}":a-=r.indent,ft(),f("}",c),(this.cases.length===1||this.condition.id==="true"||this.condition.id==="false")&&(r.onecase||i("This 'switch' should be an 'if'.",this)),u["(breakage)"]-=1,u["(verb)"]=undefined;return;case"(end)":o("Missing '{a}'.",n,"}");return;default:if(e)switch(t.id){case",":o("Each value should have its own case label.");return;case":":e=!1,wi();break;default:o("Missing ':' on a case clause.",t);return}else if(t.id===":")f(":"),o("Unexpected '{a}'.",t,":"),wi();else{o("Expected '{a}' and instead saw '{b}'.",n,"case",n.value);return}}}).labelled=!0,ct("debugger",function(){return r.debug||i("All 'debugger' statements should be removed."),this}).exps=!0,function(){var e=ct("do",function(){u["(breakage)"]+=1,u["(loopage)"]+=1,this.first=st(!0),f("while");var e=n;return h(t,e),f("("),w(),s(20),n.id==="="&&(r.boss||i("Expected a conditional expression and instead saw an assignment."),f("="),s(20)),f(")",e),w(p,t),u["(breakage)"]-=1,u["(loopage)"]-=1,this});e.labelled=!0,e.exps=!0}(),ii("for",function(){var e,c=n;if(u["(breakage)"]+=1,u["(loopage)"]+=1,f("("),h(this,c),w(),ut(n.id==="var"?1:0).id==="in"){if(n.id==="var")f("var"),fi.fud.call(fi,!0);else{switch(u[n.value]){case"unused":u[n.value]="var";break;case"var":break;default:i("Bad for in variable '{a}'.",n,n.value)}f()}return f("in"),s(20),f(")",c),e=st(!0,!0),r.forin&&e&&(e.length>1||typeof e[0]!="object"||e[0].value!=="if")&&i("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this),u["(breakage)"]-=1,u["(loopage)"]-=1,this}if(n.id!==";")if(n.id==="var")f("var"),fi.fud.call(fi);else for(;;){if(s(0,"for"),n.id!==",")break;rt()}if(ti(t),f(";"),n.id!==";"&&(s(20),n.id==="="&&(r.boss||i("Expected a conditional expression and instead saw an assignment."),f("="),s(20))),ti(t),f(";"),n.id===";"&&o("Expected '{a}' and instead saw '{b}'.",n,")",";"),n.id!==")")for(;;){if(s(0,"for"),n.id!==",")break;rt()}return f(")",c),w(p,t),st(!0,!0),u["(breakage)"]-=1,u["(loopage)"]-=1,this}).labelled=!0,ct("break",function(){var e=n.value;return u["(breakage)"]===0&&i("Unexpected '{a}'.",n,this.value),r.asi||ti(this),n.id!==";"&&t.line===n.line&&(u[e]!=="label"?i("'{a}' is not a statement label.",n,e):c[e]!==u&&i("'{a}' is out of scope.",n,e),this.first=n,f()),ai("break"),this}).exps=!0,ct("continue",function(){var e=n.value;return u["(breakage)"]===0&&i("Unexpected '{a}'.",n,this.value),r.asi||ti(this),n.id!==";"?t.line===n.line&&(u[e]!=="label"?i("'{a}' is not a statement label.",n,e):c[e]!==u&&i("'{a}' is out of scope.",n,e),this.first=n,f()):u["(loopage)"]||i("Unexpected '{a}'.",n,this.value),ai("continue"),this}).exps=!0,ct("return",function(){return this.line===n.line?(n.id==="(regexp)"&&i("Wrap the /regexp/ literal in parens to disambiguate the slash operator."),n.id===";"||n.reach||(h(t,n),ut().value!=="="||r.boss||e("Did you mean to return a conditional instead of an assignment?",t.line,t.character+1),this.first=s(0))):r.asi||ti(this),ai("return"),this}).exps=!0,ct("throw",function(){return ti(this),h(t,n),this.first=s(20),ai("throw"),this}).exps=!0,l("class"),l("const"),l("enum"),l("export"),l("extends"),l("import"),l("super"),l("let"),l("yield"),l("implements"),l("interface"),l("package"),l("private"),l("protected"),l("public"),l("static"),ht=function(e,o,s){var l,h,y,w;if(JSHINT.errors=[],JSHINT.undefs=[],v=Object.create(bu),g(v,s||{}),o){if(l=o.predef,l)if(Array.isArray(l))for(h=0;h<l.length;h+=1)v[l[h]]=!0;else if(typeof l=="object")for(y=Object.keys(l),h=0;h<y.length;h+=1)v[y[h]]=!!l[y[h]];r=o}else r={};for(r.indent=r.indent||4,r.maxerr=r.maxerr||50,lr="",h=0;h<r.indent;h+=1)lr+=" ";a=1,di=Object.create(v),c=di,u={"(global)":!0,"(name)":"(global)","(scope)":c,"(breakage)":0,"(loopage)":0},hi=[u],ki=[],du=null,dt={},gt=null,wt={},si=!1,vi=[],vt=!1,ur=0,at.init(e),cr=!0,nt={},p=t=n=d["(begin)"],gr(),g(v,s||{});try{f();switch(n.id){case"{":case"[":r.laxbreak=!0,vt=!0,fr();break;default:yr(),nt["use strict"]&&!r.globalstrict&&i('Use the function form of "use strict".',p),wi()}for(f("(end)"),h=0;h<JSHINT.undefs.length;h+=1)y=JSHINT.undefs[h].slice(0),c=y.shift(),l=y[2],typeof c[l]!="string"&&typeof u[l]!="string"&&i.apply(i,y)}catch(b){b&&(w=n||{},JSHINT.errors.push({raw:b.raw,reason:b.message,line:b.line||w.line,character:b.character||w.from},null))}return JSHINT.errors.length===0},ht.data=function(){var u={functions:[],options:r},t,l,h=[],i,o,f,a=[],n,s=[],e;ht.errors.length&&(u.errors=ht.errors),vt&&(u.json=!0);for(n in wt)tt(wt,n)&&h.push({name:n,line:wt[n]});for(h.length>0&&(u.implieds=h),ki.length>0&&(u.urls=ki),l=Object.keys(c),l.length>0&&(u.globals=l),o=1;o<hi.length;o+=1){for(i=hi[o],t={},f=0;f<oi.length;f+=1)t[oi[f]]=[];for(n in i)tt(i,n)&&n.charAt(0)!=="("&&(e=i[n],e==="unction"&&(e="unused"),Array.isArray(t[e])&&(t[e].push(n),e==="unused"&&s.push({name:n,line:i["(line)"],"function":i["(name)"]})));for(f=0;f<oi.length;f+=1)t[oi[f]].length===0&&delete t[oi[f]];t.name=i["(name)"],t.param=i["(params)"],t.line=i["(line)"],t.last=i["(last)"],u.functions.push(t)}s.length>0&&(u.unused=s),a=[];for(n in dt)if(typeof dt[n]=="number"){u.member=dt;break}return u},ht.report=function(n){function f(n,t){var f,i,u;if(t){for(r.push("<div><i>"+n+"</i> "),t=t.sort(),i=0;i<t.length;i+=1)t[i]!==u&&(u=t[i],r.push((f?", ":"")+u),f=!0);r.push("</div>")}}var i=ht.data(),o=[],s,c,y,u,t,v,a,l="",e,r=[],h;if(i.errors||i.implieds||i.unused){if(y=!0,r.push("<div id=errors><i>Error:</i>"),i.errors)for(t=0;t<i.errors.length;t+=1)s=i.errors[t],s&&(c=s.evidence||"",r.push("<p>Problem"+(isFinite(s.line)?" at line "+s.line+" character "+s.character:"")+": "+s.reason.entityify()+"</p><p class=evidence>"+(c&&(c.length>80?c.slice(0,77)+"...":c).entityify())+"</p>"));if(i.implieds){for(h=[],t=0;t<i.implieds.length;t+=1)h[t]="<code>"+i.implieds[t].name+"</code>&nbsp;<i>"+i.implieds[t].line+"</i>";r.push("<p><i>Implied global:</i> "+h.join(", ")+"</p>")}if(i.unused){for(h=[],t=0;t<i.unused.length;t+=1)h[t]="<code><u>"+i.unused[t].name+"</u></code>&nbsp;<i>"+i.unused[t].line+"</i> <code>"+i.unused[t]["function"]+"</code>";r.push("<p><i>Unused variable:</i> "+h.join(", ")+"</p>")}i.json&&r.push("<p>JSON: bad.</p>"),r.push("</div>")}if(!n){for(r.push("<br><div id=functions>"),i.urls&&f("URLs<br>",i.urls,"<br>"),i.json&&!y?r.push("<p>JSON: good.</p>"):i.globals?r.push("<div><i>Global</i> "+i.globals.sort().join(", ")+"</div>"):r.push("<div><i>No new global variables introduced.</i></div>"),t=0;t<i.functions.length;t+=1)u=i.functions[t],r.push("<br><div class=function><i>"+u.line+"-"+u.last+"</i> "+(u.name||"")+"("+(u.param?u.param.join(", "):"")+")</div>"),f("<big><b>Unused</b></big>",u.unused),f("Closure",u.closure),f("Variable",u["var"]),f("Exception",u.exception),f("Outer",u.outer),f("Global",u.global),f("Label",u.label);if(i.member){if(o=Object.keys(i.member),o.length){for(o=o.sort(),l="<br><pre id=members>/*members ",a=10,t=0;t<o.length;t+=1)v=o[t],e=v.name(),a+e.length>72&&(r.push(l+"<br>"),l="    ",a=1),a+=e.length+2,i.member[v]===1&&(e="<i>"+e+"</i>"),t<o.length-1&&(e+=", "),l+=e;r.push(l+"<br>*/</pre>")}r.push("</div>")}}return r.join("")},ht.jshint=ht,ht}(),typeof exports=="object"&&exports&&(exports.JSHINT=JSHINT),PageHelper={init:function(n){this.elem=n,this.ui_init(),this.ed_init(),this.md_init()},ui_init:function(){$("#nav_workspace").addClass("active")},ed_init:function(){$(PageHelper.elem).val(js_beautify($(PageHelper.elem).val())),PageHelper.codeEditor=CodeMirror.fromTextArea(document.getElementById(PageHelper.elem.substring(1)),{lineNumbers:!0,tabSize:4,indentUnit:4,indentWithTabs:!0,mode:"application/json",onChange:PageHelper.updateValidation})},md_init:function(){this.mdEditor=new MarkdownDeepEditor.Editor(document.getElementById("Description"),document.getElementById("markdownPreview")),$("#charCount").text(4e3-$("#Description").val().length),$("#Description").keyup(function(){$("#charCount").text(4e3-$("#Description").val().length)}),$("#mdUndo").click(function(){PageHelper.mdEditor.InvokeCommand("undo")}),$("#mdRedo").click(function(){PageHelper.mdEditor.InvokeCommand("redo")}),$("#mdBold").click(function(){PageHelper.mdEditor.InvokeCommand("bold")}),$("#mdItalic").click(function(){PageHelper.mdEditor.InvokeCommand("italic")}),$("#mdOutdent").click(function(){PageHelper.mdEditor.InvokeCommand("outdent")}),$("#mdIndent").click(function(){PageHelper.mdEditor.InvokeCommand("indent")}),$("#mdUL").click(function(){PageHelper.mdEditor.InvokeCommand("ullist")}),$("#mdOL").click(function(){PageHelper.mdEditor.InvokeCommand("ollist")}),$("#mdHeading").click(function(){PageHelper.mdEditor.InvokeCommand("heading")}),$("#mdCode").click(function(){PageHelper.mdEditor.InvokeCommand("code")}),$("#mdSeparator").click(function(){PageHelper.mdEditor.InvokeCommand("hr")}),$("#mdLink").click(function(){PageHelper.mdEditor.InvokeCommand("link")}),$("#mdImage").click(function(){PageHelper.mdEditor.InvokeCommand("img")})},updateValidation:function(){var t=JSHINT(PageHelper.codeEditor.getValue(),{curly:!0,immed:!0,strict:!0,trailing:!0,es5:!0}),n;t?$("#validationMsg").removeClass("alert-error").addClass("alert-info").html("Validation OK"):(n=JSHINT.errors[0],$("#validationMsg").removeClass("alert-info").addClass("alert-error").html("<strong>Error ["+n.line+":"+n.character+"]</strong>: "+n.reason))},elem:null,codeEditor:null,mdEditor:null}